import{d as e,r as a,ac as l,Q as s,o,a as t,c as r,C as i,w as u,D as n,l as d,W as m,ah as p,n as f,k as v,a4 as c,q as _,H as j,an as h,ap as g,aq as y}from"./index-442db11c.js";import{v as k}from"./el-loading-51a0e880.js";import{E as b,a as w,b as x,c as I}from"./el-main-9127b7fc.js";import{_ as T,E,a as W}from"./el-tab-pane-144583aa.js";import{a as z,E as C}from"./el-form-item-644922ab.js";import{E as V}from"./el-button-6cab2065.js";/* empty css                 */import{E as R,a as D}from"./el-descriptions-item-0e68857e.js";import{E as q}from"./el-scrollbar-8102c0d4.js";import{E as F}from"./el-divider-2ba72cc5.js";import{E as S}from"./el-card-013e48ed.js";import{E as U}from"./el-tag-011e2015.js";import{E as H}from"./el-empty-f242d87a.js";import{_ as N}from"./FinishList.vue_vue_type_script_setup_true_lang-fe65e0cb.js";import{g as P,s as $}from"./index-cf387ecb.js";import{u as A}from"./utils-6cebd9eb.js";/* empty css                 *//* empty css                   */import{E as B}from"./index-43c84df1.js";import{_ as G}from"./_plugin-vue_export-helper-1b428a4d.js";import"./throttle-f8a59523.js";import"./debounce-7bbe3209.js";import"./focus-trap-1ae2c557.js";import"./scroll-327f18e0.js";import"./strings-929788f0.js";import"./index-5cf9a293.js";import"./el-tooltip-4ed993c7.js";import"./el-popper-f2b04c8d.js";import"./index-21a87288.js";import"./index-4cf5760a.js";import"./el-dialog-86c454b9.js";import"./el-overlay-d1673d35.js";import"./refs-384f660f.js";import"./index-78074203.js";import"./index.vue_vue_type_script_setup_true_lang-9f553fa8.js";import"./index-b8912c04.js";const L=e=>(g("data-v-47e34005"),e=e(),y(),e),M={class:"app-container"},O={key:0},Q={key:1,class:"common-layout"},X={"infinite-scroll-immediate":!1,class:"infinite-list"},Y={class:"flex justify-between w-60 text-gray-500"},Z={class:"flow-leave"},J=L((()=>v("h2",{class:"flex justify-center items-center"}," 审批表 ",-1))),K=L((()=>v("h4",{class:"mt-2"}," 审批意见 ",-1))),ee=e({name:"ElementPlus"}),ae=G(e({...ee,setup(e){var g,y;const G=a("todo"),L=l(),ee=a(),ae=s({approverId:null==(g=L.userInfo)?void 0:g.id,status:1,applicationType:"3",current:0,size:5}),le=s({id:"",applicationId:"",approverId:(null==(y=L.userInfo)?void 0:y.id)||"",approvalResult:0,reason:"",applicationType:"3"}),se=a([]),oe=a(),te=a(!0),re=a(!1),ie=a(""),ue=a(!1),ne=()=>{te.value=!0,P(ae).then((e=>{var a;const l=[...se.value,...e.data.records];se.value=[...A(l)],oe.value=se.value[0],ie.value=(null==(a=oe.value)?void 0:a.id)||"",te.value=!1,ae.current+=ae.size,e.data.total>=se.value.length&&(re.value=!0)}))},de=()=>{ne()},me=e=>{se.value=se.value.filter((a=>a.id!==e))};return o((()=>{ne()})),(e,a)=>{const l=H,s=U,o=S,g=F,y=q,P=b,A=T,L=R,ae=D,ne=B,pe=z,fe=V,ve=C,ce=w,_e=x,je=E,he=W,ge=I,ye=k;return t(),r("div",M,[i(o,{shadow:"never"},{default:u((()=>[i(he,{modelValue:G.value,"onUpdate:modelValue":a[3]||(a[3]=e=>G.value=e),class:"demo-tabs"},{default:u((()=>[i(je,{label:"待审批",name:"todo"},{default:u((()=>["todo"===G.value?n((t(),r("div",O,[0===se.value.length?(t(),d(l,{key:0,"image-size":200,class:"h-120",description:"你已经全部审批完了"})):(t(),r("div",Q,[i(_e,null,{default:u((()=>[i(P,null,{default:u((()=>[i(y,{height:"480px"},{default:u((()=>[n((t(),r("div",X,[(t(!0),r(m,null,p(se.value,(e=>(t(),d(o,{key:e.id,shadow:"hover",class:f([{activeCard:ie.value===e.id},"infinite-list-item cursor-pointer"]),onClick:a=>(e=>{oe.value=e,te.value=!1,ie.value=e.id,le.applicationId=e.applicationId,le.id=e.id})(e)},{default:u((()=>[v("h4",null,[i(s,{type:"danger"},{default:u((()=>[c(_(e.flowWorkTimeInfo.reason>8?`${e.flowWorkTimeInfo.reason.substring(0,8)}...`:e.flowWorkTimeInfo.reason),1)])),_:2},1024)]),v("h5",Y,[v("span",null,_(e.flowWorkTimeInfo.proposer.username),1),v("span",null,_(e.flowWorkTimeInfo.createTime),1)])])),_:2},1032,["class","onClick"])))),128)),re.value?(t(),d(g,{key:0,"border-style":"dashed"},{default:u((()=>[c(" 加载完毕 ")])),_:1})):j("",!0)])),[[ge,de]])])),_:1})])),_:1}),i(ce,null,{default:u((()=>[v("div",null,[i(A,{element:".flow-leave","open-tips":"审批表全屏",class:"absolute right-0"}),te.value?(t(),d(l,{key:0,"image-size":200,description:"请点击左侧的待审批单查看数据"})):n((t(),d(y,{key:1,height:"450px"},{default:u((()=>[v("div",Z,[J,n((t(),d(ae,{title:"申请人信息",column:2,"label-align":"right"},{default:u((()=>[i(L,{label:"姓名"},{default:u((()=>[c(_(oe.value.flowWorkTimeInfo.proposer.username),1)])),_:1}),i(L,{label:"手机号码"},{default:u((()=>[c(_(oe.value.flowWorkTimeInfo.proposer.phoneNum),1)])),_:1}),i(L,{label:"部门"},{default:u((()=>[c(" Suzhou ")])),_:1}),i(L,{label:"职位"},{default:u((()=>[i(s,{size:"small"},{default:u((()=>[c(" School ")])),_:1})])),_:1})])),_:1})),[[ye,te.value]]),i(ae,{title:"申请表单",column:2,border:""},{default:u((()=>[i(L,{label:"补充日期"},{default:u((()=>[c(_(oe.value.flowWorkTimeInfo.workDate),1)])),_:1}),i(L,{label:"申请时长"},{default:u((()=>[c(_(oe.value.flowWorkTimeInfo.workDuration)+" 小时 ",1)])),_:1}),i(L,{label:"申请原因"},{default:u((()=>[c(_(oe.value.flowWorkTimeInfo.reason),1)])),_:1})])),_:1}),K,i(ve,{ref_key:"formRef",ref:ee,model:le},{default:u((()=>[i(pe,{prop:"reason",rules:[{required:!0,message:"请输入审批意见",trigger:"blur"}]},{default:u((()=>[i(ne,{modelValue:le.reason,"onUpdate:modelValue":a[0]||(a[0]=e=>le.reason=e),rows:5,type:"textarea",placeholder:"请输入审批意见",maxlength:"30","show-word-limit":""},null,8,["modelValue"])])),_:1}),i(pe,null,{default:u((()=>[i(fe,{type:"success",onClick:a[1]||(a[1]=e=>{var a;(a=ee.value)&&a.validate((e=>{e?(le.approvalResult=0,ue.value=!0,$(le).then((e=>{h.success(e.msg),me(le.id)})).catch((e=>{h.error(e.msg)})).finally((()=>{ue.value=!1,a.resetFields()}))):h.error("请输入审批意见")}))})},{default:u((()=>[c(" 通过 ")])),_:1}),i(fe,{type:"danger",onClick:a[2]||(a[2]=e=>{var a;(a=ee.value)&&a.validate((e=>{e?(ue.value=!0,le.approvalResult=1,$(le).then((e=>{h.success(e.msg),me(le.id)})).catch((e=>{h.error(e.msg)})).finally((()=>{ue.value=!1,a.resetFields()}))):h.error("请输入审批意见")}))})},{default:u((()=>[c(" 拒绝 ")])),_:1})])),_:1})])),_:1},8,["model"])])])),_:1})),[[ye,ue.value]])])])),_:1})])),_:1})]))])),[[ye,te.value]]):j("",!0)])),_:1}),i(je,{label:"已审批",name:"done"},{default:u((()=>["done"===G.value?(t(),d(N,{key:0})):j("",!0)])),_:1})])),_:1},8,["modelValue"])])),_:1})])}}}),[["__scopeId","data-v-47e34005"]]);export{ae as default};
