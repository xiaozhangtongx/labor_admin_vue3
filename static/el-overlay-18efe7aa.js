import{aE as e,aX as o,bu as t,ce as l,bk as a,u as n,cf as s,aS as u,N as c,R as d,bv as r,L as p,cg as i,M as f,bK as y,b as m,g as v,d as E,C as b,e as S,U as C,i as T,a5 as A,h,aJ as M,r as g,ch as D,ci as x,y as k,A as B,a2 as L,o as N,X as O}from"./index-93ba5881.js";import{t as I,U as F}from"./focus-trap-c8e74f19.js";import{u as R}from"./index-81ef74b7.js";import{a as w}from"./scroll-6db31819.js";var P=(e=>(e[e.TEXT=1]="TEXT",e[e.CLASS=2]="CLASS",e[e.STYLE=4]="STYLE",e[e.PROPS=8]="PROPS",e[e.FULL_PROPS=16]="FULL_PROPS",e[e.HYDRATE_EVENTS=32]="HYDRATE_EVENTS",e[e.STABLE_FRAGMENT=64]="STABLE_FRAGMENT",e[e.KEYED_FRAGMENT=128]="KEYED_FRAGMENT",e[e.UNKEYED_FRAGMENT=256]="UNKEYED_FRAGMENT",e[e.NEED_PATCH=512]="NEED_PATCH",e[e.DYNAMIC_SLOTS=1024]="DYNAMIC_SLOTS",e[e.HOISTED=-1]="HOISTED",e[e.BAIL=-2]="BAIL",e))(P||{});const _=e=>{if(!o(e))return{};const a=e.props||{},n=(o(e.type)?e.type.props:void 0)||{},s={};return Object.keys(n).forEach((e=>{t(n[e],"default")&&(s[e]=n[e].default)})),Object.keys(a).forEach((e=>{s[l(e)]=a[e]})),s},Y=t=>{const l=e(t)?t:[t],a=[];return l.forEach((t=>{var l;e(t)?a.push(...Y(t)):o(t)&&e(t.children)?a.push(...Y(t.children)):(a.push(t),o(t)&&(null==(l=t.component)?void 0:l.subTree)&&a.push(...Y(t.component.subTree)))})),a},z=(e,o={})=>{a(e)||I("[useLockscreen]","You need to pass a ref param to this function");const t=o.ns||n("popup"),l=s((()=>t.bm("parent","hidden")));if(!u||c(document.body,l.value))return;let y=0,m=!1,v="0";const E=()=>{setTimeout((()=>{f(null==document?void 0:document.body,l.value),m&&document&&(document.body.style.width=v)}),200)};d(e,(e=>{if(!e)return void E();m=!c(document.body,l.value),m&&(v=document.body.style.width),y=w(t.namespace.value);const o=document.documentElement.clientHeight<document.body.scrollHeight,a=r(document.body,"overflowY");y>0&&(o||"scroll"===a)&&m&&(document.body.style.width=`calc(100% - ${y}px)`),p(document.body,l.value)})),i((()=>E()))},H=e=>{if(!e)return{onClick:y,onMousedown:y,onMouseup:y};let o=!1,t=!1;return{onClick:l=>{o&&t&&e(l),o=t=!1},onMousedown:e=>{o=e.target===e.currentTarget},onMouseup:e=>{t=e.target===e.currentTarget}}},j=m({mask:{type:Boolean,default:!0},customMaskEvent:{type:Boolean,default:!1},overlayClass:{type:v([String,Array,Object])},zIndex:{type:v([String,Number])}});const G=E({name:"ElOverlay",props:j,emits:{click:e=>e instanceof MouseEvent},setup(e,{slots:o,emit:t}){const l=n("overlay"),{onClick:a,onMousedown:s,onMouseup:u}=H(e.customMaskEvent?void 0:e=>{t("click",e)});return()=>e.mask?b("div",{class:[l.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:a,onMousedown:s,onMouseup:u},[S(o,"default")],P.STYLE|P.CLASS|P.PROPS,["onClick","onMouseup","onMousedown"]):C("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[S(o,"default")])}}),U=m({center:{type:Boolean,default:!1},alignCenter:{type:Boolean,default:!1},closeIcon:{type:T},customClass:{type:String,default:""},draggable:{type:Boolean,default:!1},fullscreen:{type:Boolean,default:!1},showClose:{type:Boolean,default:!0},title:{type:String,default:""}}),K={close:()=>!0},V=m({...U,appendToBody:{type:Boolean,default:!1},beforeClose:{type:v(Function)},destroyOnClose:{type:Boolean,default:!1},closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:{type:Boolean,default:!1},modalClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:{type:Boolean,default:!1}}),X={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[F]:e=>A(e),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},$=(e,o)=>{const t=h().emit,{nextZIndex:l}=M();let a="";const n=R(),s=R(),c=g(!1),r=g(!1),p=g(!1),i=g(e.zIndex||l());let f,y;const m=D("namespace",x),v=k((()=>{const o={},t=`--${m.value}-dialog`;return e.fullscreen||(e.top&&(o[`${t}-margin-top`]=e.top),e.width&&(o[`${t}-width`]=B(e.width))),o})),E=k((()=>e.alignCenter?{display:"flex"}:{}));function b(){null==y||y(),null==f||f(),e.openDelay&&e.openDelay>0?({stop:f}=O((()=>T()),e.openDelay)):T()}function S(){null==f||f(),null==y||y(),e.closeDelay&&e.closeDelay>0?({stop:y}=O((()=>A()),e.closeDelay)):A()}function C(){e.beforeClose?e.beforeClose((function(e){e||(r.value=!0,c.value=!1)})):S()}function T(){u&&(c.value=!0)}function A(){c.value=!1}return e.lockScroll&&z(c),d((()=>e.modelValue),(a=>{a?(r.value=!1,b(),p.value=!0,i.value=e.zIndex?i.value++:l(),L((()=>{t("open"),o.value&&(o.value.scrollTop=0)}))):c.value&&S()})),d((()=>e.fullscreen),(e=>{o.value&&(e?(a=o.value.style.transform,o.value.style.transform=""):o.value.style.transform=a)})),N((()=>{e.modelValue&&(c.value=!0,p.value=!0,b())})),{afterEnter:function(){t("opened")},afterLeave:function(){t("closed"),t(F,!1),e.destroyOnClose&&(p.value=!1)},beforeLeave:function(){t("close")},handleClose:C,onModalClick:function(){e.closeOnClickModal&&C()},close:S,doClose:A,onOpenAutoFocus:function(){t("openAutoFocus")},onCloseAutoFocus:function(){t("closeAutoFocus")},onCloseRequested:function(){e.closeOnPressEscape&&C()},onFocusoutPrevented:function(e){var o;"pointer"===(null==(o=e.detail)?void 0:o.focusReason)&&e.preventDefault()},titleId:n,bodyId:s,closed:r,style:v,overlayDialogStyle:E,rendered:p,visible:c,zIndex:i}};export{G as E,X as a,z as b,H as c,V as d,U as e,Y as f,_ as g,K as h,$ as u};
