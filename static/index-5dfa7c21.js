import{d as e,r as a,ac as l,Q as o,o as s,a as t,c as r,C as i,w as u,D as n,l as d,W as p,ah as f,n as m,k as v,q as c,a4 as _,H as j,an as I,ap as h,aq as y}from"./index-7b11e248.js";import{v as g}from"./el-loading-e5ab3d73.js";import{a as b,c as w,E as C,b as x}from"./el-main-d163008d.js";import{_ as k,E,a as T}from"./el-tab-pane-b7e823dd.js";import{a as z,E as V}from"./el-form-item-c47d647a.js";import{E as R}from"./el-button-a9a247f8.js";/* empty css                 */import{E as q,a as F}from"./el-descriptions-item-5e3ad440.js";import{E as S}from"./el-tag-d43f7158.js";import{E as U}from"./el-scrollbar-b2ea29b0.js";import{E as D}from"./el-divider-945e9c3d.js";import{E as H}from"./el-card-9aff402c.js";import{_ as L}from"./index.vue_vue_type_script_setup_true_lang-fdbb1041.js";import{E as N}from"./el-empty-7dec6b52.js";import{_ as B}from"./FinishList.vue_vue_type_script_setup_true_lang-55e4a5e5.js";import{g as G,s as K}from"./index-c03a5415.js";import{u as M}from"./utils-3f53292a.js";import{E as P}from"./index-26c376cb.js";import{_ as Q}from"./_plugin-vue_export-helper-1b428a4d.js";import"./throttle-6151a756.js";import"./debounce-42218d7a.js";import"./error-c58402b8.js";import"./scroll-bcd1b381.js";import"./strings-de089556.js";import"./event-22bc0892.js";import"./index-62b17920.js";import"./vnode-17b2c6a8.js";import"./el-tooltip-4ed993c7.js";import"./el-popper-b088496a.js";import"./use-form-common-props-87a080ba.js";import"./focus-trap-33e167f5.js";import"./index-e9e98209.js";import"./el-dialog-5e6def37.js";import"./el-overlay-2726d409.js";import"./index-42cd8a53.js";const W=e=>(h("data-v-412d6d1a"),e=e(),y(),e),X={class:"app-container"},Y={key:0},Z={key:1,class:"common-layout"},$={"infinite-scroll-immediate":!1,class:"infinite-list"},A={class:"flex justify-between w-60 text-gray-500"},J={class:"flow-leave"},O=W((()=>v("h2",{class:"flex justify-center items-center"}," 审批表 ",-1))),ee=W((()=>v("h4",{class:"mt-2"}," 审批意见 ",-1))),ae=e({name:"ElementPlus"}),le=Q(e({...ae,setup(e){var h,y;const Q=a("todo"),W=l(),ae=a(),le=[{id:0,type:"",value:"病假"},{id:1,type:"success",value:"婚假"},{id:2,type:"info",value:"丧假"},{id:3,type:"warning",value:"产假"},{id:4,type:"danger",value:"其它"}],oe=o({approverId:null==(h=W.userInfo)?void 0:h.id,status:1,applicationType:"1",current:0,size:5}),se=o({id:"",applicationId:"",approverId:(null==(y=W.userInfo)?void 0:y.id)||"",approvalResult:0,reason:"",applicationType:"1"}),te=a([]),re=a(),ie=a(!0),ue=a(!1),ne=a(""),de=a(!1),pe=()=>{ie.value=!0,G(oe).then((e=>{var a;const l=[...te.value,...e.data.records];te.value=[...M(l)],re.value=te.value[0],ne.value=(null==(a=re.value)?void 0:a.id)||"",ie.value=!1,oe.current+=oe.size,e.data.total>=te.value.length&&(ue.value=!0)}))},fe=()=>{pe()},me=e=>{te.value=te.value.filter((a=>a.id!==e))};return s((()=>{pe()})),(e,a)=>{const l=N,o=L,s=H,h=D,y=U,G=b,M=k,W=q,oe=S,pe=F,ve=P,ce=z,_e=R,je=V,Ie=w,he=C,ye=E,ge=T,be=x,we=g;return t(),r("div",X,[i(s,{shadow:"never"},{default:u((()=>[i(ge,{modelValue:Q.value,"onUpdate:modelValue":a[3]||(a[3]=e=>Q.value=e),class:"demo-tabs"},{default:u((()=>[i(ye,{label:"待审批",name:"todo"},{default:u((()=>["todo"===Q.value?n((t(),r("div",Y,[0===te.value.length?(t(),d(l,{key:0,"image-size":200,class:"h-120",description:"你已经全部审批完了"})):(t(),r("div",Z,[i(he,null,{default:u((()=>[i(G,null,{default:u((()=>[i(y,{height:"480px"},{default:u((()=>[n((t(),r("div",$,[(t(!0),r(p,null,f(te.value,(e=>(t(),d(s,{key:e.id,shadow:"hover",class:m([{activeCard:ne.value===e.id},"infinite-list-item cursor-pointer"]),onClick:a=>(e=>{re.value=e,ie.value=!1,ne.value=e.id,se.applicationId=e.applicationId,se.id=e.id})(e)},{default:u((()=>[v("h4",null,[i(o,{status:parseInt(e.flowCancelInfo.leaveInfo.leaveType),"status-list":le},null,8,["status"])]),v("h5",A,[v("span",null,c(e.flowCancelInfo.leaveInfo.proposer.username),1),v("span",null,c(e.flowCancelInfo.createTime),1)])])),_:2},1032,["class","onClick"])))),128)),ue.value?(t(),d(h,{key:0,"border-style":"dashed"},{default:u((()=>[_(" 加载完毕 ")])),_:1})):j("",!0)])),[[be,fe]])])),_:1})])),_:1}),i(Ie,null,{default:u((()=>[v("div",null,[i(M,{element:".flow-leave","open-tips":"审批表全屏",class:"absolute right-0"}),ie.value?(t(),d(l,{key:0,"image-size":200,description:"请点击左侧的待审批单查看数据"})):n((t(),d(y,{key:1,height:"450px"},{default:u((()=>[v("div",J,[O,n((t(),d(pe,{title:"申请人信息",column:2,"label-align":"right"},{default:u((()=>[i(W,{label:"姓名"},{default:u((()=>[_(c(re.value.flowCancelInfo.leaveInfo.proposer.username),1)])),_:1}),i(W,{label:"手机号码"},{default:u((()=>[_(c(re.value.flowCancelInfo.leaveInfo.proposer.phoneNum),1)])),_:1}),i(W,{label:"部门"},{default:u((()=>[_(" Suzhou ")])),_:1}),i(W,{label:"职位"},{default:u((()=>[i(oe,{size:"small"},{default:u((()=>[_(" School ")])),_:1})])),_:1})])),_:1})),[[we,ie.value]]),i(pe,{title:"请假表单",column:2,border:""},{default:u((()=>[i(W,{label:"申请时间"},{default:u((()=>[_(c(re.value.flowCancelInfo.leaveInfo.createTime),1)])),_:1}),i(W,{label:"请假时长"},{default:u((()=>[_(c(re.value.flowCancelInfo.leaveInfo.duration)+" 天 ",1)])),_:1}),i(W,{label:"请假开始时间"},{default:u((()=>[_(c(re.value.flowCancelInfo.leaveInfo.startTime),1)])),_:1}),i(W,{label:"请假结束时间"},{default:u((()=>[_(c(re.value.flowCancelInfo.leaveInfo.endTime),1)])),_:1}),i(W,{label:"请假原因"},{default:u((()=>[_(c(re.value.flowCancelInfo.leaveInfo.reason),1)])),_:1})])),_:1}),i(pe,{title:"销假表单",column:2,border:"",class:"mt-2"},{default:u((()=>[i(W,{label:"申请时间"},{default:u((()=>[_(c(re.value.flowCancelInfo.createTime),1)])),_:1}),i(W,{label:"更新时间"},{default:u((()=>[_(c(re.value.flowCancelInfo.updateTime||re.value.flowCancelInfo.createTime),1)])),_:1}),i(W,{label:"申请原因"},{default:u((()=>[_(c(re.value.flowCancelInfo.leaveInfo.reason),1)])),_:1})])),_:1}),ee,i(je,{ref_key:"formRef",ref:ae,model:se},{default:u((()=>[i(ce,{prop:"reason",rules:[{required:!0,message:"请输入审批意见",trigger:"blur"}]},{default:u((()=>[i(ve,{modelValue:se.reason,"onUpdate:modelValue":a[0]||(a[0]=e=>se.reason=e),rows:5,type:"textarea",placeholder:"请输入审批意见",maxlength:"30","show-word-limit":""},null,8,["modelValue"])])),_:1}),i(ce,null,{default:u((()=>[i(_e,{type:"success",onClick:a[1]||(a[1]=e=>{var a;(a=ae.value)&&a.validate((e=>{e?(se.approvalResult=0,de.value=!0,K(se).then((e=>{I.success(e.msg),me(se.id)})).catch((e=>{I.error(e.msg)})).finally((()=>{de.value=!1,a.resetFields()}))):I.error("请输入审批意见")}))})},{default:u((()=>[_(" 通过 ")])),_:1}),i(_e,{type:"danger",onClick:a[2]||(a[2]=e=>{var a;(a=ae.value)&&a.validate((e=>{e?(de.value=!0,se.approvalResult=1,K(se).then((e=>{I.success(e.msg),me(se.id)})).catch((e=>{I.error(e.msg)})).finally((()=>{de.value=!1,a.resetFields()}))):I.error("请输入审批意见")}))})},{default:u((()=>[_(" 拒绝 ")])),_:1})])),_:1})])),_:1},8,["model"])])])),_:1})),[[we,de.value]])])])),_:1})])),_:1})]))])),[[we,ie.value]]):j("",!0)])),_:1}),i(ye,{label:"已审批",name:"done"},{default:u((()=>["done"===Q.value?(t(),d(B,{key:0})):j("",!0)])),_:1})])),_:1},8,["modelValue"])])),_:1})])}}}),[["__scopeId","data-v-412d6d1a"]]);export{le as default};
