import{d as e,r as a,ao as l,Q as s,o as t,a as o,c as r,C as i,w as u,D as d,l as n,W as p,ag as m,n as v,k as f,q as c,a4 as _,H as h,am as y,ap as g,aq as j}from"./index-b8a3a250.js";import{E as b,v as w}from"./el-divider-c07a73b3.js";import{u as I,E as x,a as T,b as k,c as E}from"./el-message-d78d53a2.js";import{E as O,_ as z,a as C,b as V}from"./el-card-e3f13d80.js";import{a as R,E as F}from"./el-form-item-0093279f.js";import{E as q}from"./el-button-7231a80e.js";/* empty css                 */import{_ as S,E as U,a as H}from"./index.vue_vue_type_script_setup_true_lang-3bb72ae8.js";import{E as L}from"./el-tag-c40b19de.js";import{E as N}from"./el-scrollbar-8ab6b49e.js";import{E as Q}from"./el-empty-527b6222.js";import{_ as A}from"./FinishList.vue_vue_type_script_setup_true_lang-fe1d3d4a.js";import{g as D,s as G}from"./index-f0a6f388.js";import{E as J}from"./index-dc66848b.js";import{_ as K}from"./_plugin-vue_export-helper-1b428a4d.js";import"./throttle-6479db90.js";import"./debounce-bc579c0a.js";import"./focus-trap-304145bb.js";import"./scroll-1d64911d.js";import"./strings-2f73862b.js";import"./el-overlay-0dacbd3f.js";import"./index-b93a4cfd.js";import"./el-tooltip-4ed993c7.js";import"./el-popper-c52f4b99.js";import"./index-e3b4b011.js";import"./el-dialog-8b7d2a0c.js";import"./index-a127c8ab.js";const M=e=>(g("data-v-89e9e87a"),e=e(),j(),e),P={class:"app-container"},W={key:0},B={key:1,class:"common-layout"},X={"infinite-scroll-immediate":!1,class:"infinite-list"},Y={class:"flex justify-between w-60 text-gray-500"},Z={class:"flow-leave"},$=M((()=>f("h2",{class:"flex justify-center items-center"}," 审批表 ",-1))),ee=M((()=>f("h4",{class:"mt-2"}," 审批意见 ",-1))),ae=e({name:"ElementPlus"}),le=K(e({...ae,setup(e){var g,j;const K=a("todo"),M=l(),ae=a(),le=[{id:0,type:"",value:"工作日加班"},{id:1,type:"success",value:"休息日加班"},{id:2,type:"danger",value:"法定节假日加班"}],se=s({approverId:null==(g=M.userInfo)?void 0:g.id,status:1,applicationType:"2",current:0,size:5}),te=s({id:"",applicationId:"",approverId:(null==(j=M.userInfo)?void 0:j.id)||"",approvalResult:0,reason:"",applicationType:"2"}),oe=a([]),re=a(),ie=a(!0),ue=a(!1),de=a(""),ne=a(!1),pe=()=>{ie.value=!0,D(se).then((e=>{var a;const l=[...oe.value,...e.data.records];oe.value=[...I(l)],re.value=oe.value[0],de.value=(null==(a=re.value)?void 0:a.id)||"",ie.value=!1,se.current+=se.size,e.data.total>=oe.value.length&&(ue.value=!0)}))},me=()=>{pe()},ve=e=>{oe.value=oe.value.filter((a=>a.id!==e))};return t((()=>{pe()})),(e,a)=>{const l=Q,s=O,t=b,g=N,j=x,I=z,D=U,M=L,se=H,pe=J,fe=R,ce=q,_e=F,he=T,ye=k,ge=C,je=V,be=E,we=w;return o(),r("div",P,[i(s,{shadow:"never"},{default:u((()=>[i(je,{modelValue:K.value,"onUpdate:modelValue":a[3]||(a[3]=e=>K.value=e),class:"demo-tabs"},{default:u((()=>[i(ge,{label:"待审批",name:"todo"},{default:u((()=>["todo"===K.value?d((o(),r("div",W,[0===oe.value.length?(o(),n(l,{key:0,"image-size":200,class:"h-120",description:"你已经全部审批完了"})):(o(),r("div",B,[i(ye,null,{default:u((()=>[i(j,null,{default:u((()=>[i(g,{height:"480px"},{default:u((()=>[d((o(),r("div",X,[(o(!0),r(p,null,m(oe.value,(e=>(o(),n(s,{key:e.id,shadow:"hover",class:v([{activeCard:de.value===e.id},"infinite-list-item cursor-pointer"]),onClick:a=>(e=>{re.value=e,ie.value=!1,de.value=e.id,te.applicationId=e.applicationId,te.id=e.id})(e)},{default:u((()=>[f("h4",null,[i(S,{status:parseInt(e.applicationType),"status-list":le},null,8,["status"])]),f("h5",Y,[f("span",null,c(e.flowOverTimeInfo.proposer.username),1),f("span",null,c(e.flowOverTimeInfo.createTime),1)])])),_:2},1032,["class","onClick"])))),128)),ue.value?(o(),n(t,{key:0,"border-style":"dashed"},{default:u((()=>[_(" 加载完毕 ")])),_:1})):h("",!0)])),[[be,me]])])),_:1})])),_:1}),i(he,null,{default:u((()=>[f("div",null,[i(I,{element:".flow-leave","open-tips":"审批表全屏",class:"absolute right-0"}),ie.value?(o(),n(l,{key:0,"image-size":200,description:"请点击左侧的待审批单查看数据"})):d((o(),n(g,{key:1,height:"450px"},{default:u((()=>[f("div",Z,[$,d((o(),n(se,{title:"申请人信息",column:2,"label-align":"right"},{default:u((()=>[i(D,{label:"姓名"},{default:u((()=>[_(c(re.value.flowOverTimeInfo.proposer.username),1)])),_:1}),i(D,{label:"手机号码"},{default:u((()=>[_(c(re.value.flowOverTimeInfo.proposer.phoneNum),1)])),_:1}),i(D,{label:"部门"},{default:u((()=>[_(" Suzhou ")])),_:1}),i(D,{label:"职位"},{default:u((()=>[i(M,{size:"small"},{default:u((()=>[_(" School ")])),_:1})])),_:1})])),_:1})),[[we,ie.value]]),i(se,{title:"申请表单",column:2,border:""},{default:u((()=>[i(D,{label:"申请时间"},{default:u((()=>[_(c(re.value.flowOverTimeInfo.createTime),1)])),_:1}),i(D,{label:"加班时长"},{default:u((()=>[_(c(re.value.flowOverTimeInfo.duration)+" 小时 ",1)])),_:1}),i(D,{label:"加班开始时间"},{default:u((()=>[_(c(re.value.flowOverTimeInfo.startTime),1)])),_:1}),i(D,{label:"加班结束时间"},{default:u((()=>[_(c(re.value.flowOverTimeInfo.endTime),1)])),_:1}),i(D,{label:"申请原因"},{default:u((()=>[_(c(re.value.flowOverTimeInfo.reason),1)])),_:1})])),_:1}),ee,i(_e,{ref_key:"formRef",ref:ae,model:te},{default:u((()=>[i(fe,{prop:"reason",rules:[{required:!0,message:"请输入审批意见",trigger:"blur"}]},{default:u((()=>[i(pe,{modelValue:te.reason,"onUpdate:modelValue":a[0]||(a[0]=e=>te.reason=e),rows:5,type:"textarea",placeholder:"请输入审批意见",maxlength:"30","show-word-limit":""},null,8,["modelValue"])])),_:1}),i(fe,null,{default:u((()=>[i(ce,{type:"success",onClick:a[1]||(a[1]=e=>{var a;(a=ae.value)&&a.validate((e=>{e?(te.approvalResult=0,ne.value=!0,G(te).then((e=>{y.success(e.msg),ve(te.id)})).catch((e=>{y.error(e.msg)})).finally((()=>{ne.value=!1,a.resetFields()}))):y.error("请输入审批意见")}))})},{default:u((()=>[_(" 通过 ")])),_:1}),i(ce,{type:"danger",onClick:a[2]||(a[2]=e=>{var a;(a=ae.value)&&a.validate((e=>{e?(ne.value=!0,te.approvalResult=1,G(te).then((e=>{y.success(e.msg),ve(te.id)})).catch((e=>{y.error(e.msg)})).finally((()=>{ne.value=!1,a.resetFields()}))):y.error("请输入审批意见")}))})},{default:u((()=>[_(" 拒绝 ")])),_:1})])),_:1})])),_:1},8,["model"])])])),_:1})),[[we,ne.value]])])])),_:1})])),_:1})]))])),[[we,ie.value]]):h("",!0)])),_:1}),i(ge,{label:"已审批",name:"done"},{default:u((()=>["done"===K.value?(o(),n(A,{key:0})):h("",!0)])),_:1})])),_:1},8,["modelValue"])])),_:1})])}}}),[["__scopeId","data-v-89e9e87a"]]);export{le as default};
