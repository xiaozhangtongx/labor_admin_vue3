import{aS as e,aV as t,aW as a,aX as l,aY as n,aE as o,b as s,g as r,aZ as i,a_ as u,d,z as c,u as p,j as v,r as m,R as f,a2 as h,y as g,a$ as y,b0 as b,f as k,b1 as w,p as S,a as x,l as M,w as C,n as D,aa as V,G as I,E as O,m as A,H as T,c as _,k as P,e as $,q as z,F as L,_ as N,K as R,o as E,W as Y,ag as B,a4 as U,D as F,C as W,b2 as H,O as j,b3 as K,T as q,a8 as G,N as Z,aR as Q,b4 as X,a3 as J,I as ee,b5 as te,au as ae,P as le,b6 as ne,b7 as oe,h as se,Q as re,b8 as ie,b9 as ue,a0 as de,S as ce,U as pe,a7 as ve,ba as me,V as fe,bb as he,bc as ge,a1 as ye,bd as be,Z as ke,be as we,t as Se,B as xe,bf as Me,aC as Ce,aD as De,bg as Ve,bh as Ie,am as Oe}from"./index-b8a3a250.js";import{E as Ae}from"./el-dialog-8b7d2a0c.js";import"./el-overlay-0dacbd3f.js";import{E as Te,B as _e}from"./el-scrollbar-8ab6b49e.js";import{_ as Pe,E as $e,a as ze}from"./index.vue_vue_type_script_setup_true_lang-3bb72ae8.js";import{E as Le}from"./el-tag-c40b19de.js";import{a as Ne,b as Re,E as Ee}from"./el-button-7231a80e.js";/* empty css                 */import{E as Ye,T as Be,a as Ue,b as Fe}from"./el-popper-c52f4b99.js";import{v as We,C as He,E as je,a as Ke}from"./el-select-993401cf.js";import{g as qe}from"./index-800b9b3e.js";import{a as Ge}from"./validate-8460febd.js";import{i as Ze}from"./validator-19c99e35.js";import{E as Qe,i as Xe,a as Je}from"./index-dc66848b.js";import{e as et}from"./strings-2f73862b.js";import{d as tt,i as at,U as lt,C as nt}from"./focus-trap-304145bb.js";import{d as ot}from"./debounce-bc579c0a.js";import{i as st,f as rt}from"./isEqual-5819fc87.js";import"./index-b93a4cfd.js";import"./scroll-1d64911d.js";import"./index-a127c8ab.js";const it=e=>e||0===e?Array.isArray(e)?e:[e]:[],ut=t=>e?window.requestAnimationFrame(t):setTimeout(t,16),dt=t=>e?window.cancelAnimationFrame(t):clearTimeout(t);var ct={};({get exports(){return ct},set exports(e){ct=e}}).exports=function(){var e={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},t=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|YYYY|YY?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,a=/\d\d/,l=/\d\d?/,n=/\d*[^-_:/,()\s\d]+/,o={},s=function(e){return(e=+e)+(e>68?1900:2e3)},r=function(e){return function(t){this[e]=+t}},i=[/[+-]\d\d:?(\d\d)?|Z/,function(e){(this.zone||(this.zone={})).offset=function(e){if(!e)return 0;if("Z"===e)return 0;var t=e.match(/([+-]|\d\d)/g),a=60*t[1]+(+t[2]||0);return 0===a?0:"+"===t[0]?-a:a}(e)}],u=function(e){var t=o[e];return t&&(t.indexOf?t:t.s.concat(t.f))},d=function(e,t){var a,l=o.meridiem;if(l){for(var n=1;n<=24;n+=1)if(e.indexOf(l(n,0,t))>-1){a=n>12;break}}else a=e===(t?"pm":"PM");return a},c={A:[n,function(e){this.afternoon=d(e,!1)}],a:[n,function(e){this.afternoon=d(e,!0)}],S:[/\d/,function(e){this.milliseconds=100*+e}],SS:[a,function(e){this.milliseconds=10*+e}],SSS:[/\d{3}/,function(e){this.milliseconds=+e}],s:[l,r("seconds")],ss:[l,r("seconds")],m:[l,r("minutes")],mm:[l,r("minutes")],H:[l,r("hours")],h:[l,r("hours")],HH:[l,r("hours")],hh:[l,r("hours")],D:[l,r("day")],DD:[a,r("day")],Do:[n,function(e){var t=o.ordinal,a=e.match(/\d+/);if(this.day=a[0],t)for(var l=1;l<=31;l+=1)t(l).replace(/\[|\]/g,"")===e&&(this.day=l)}],M:[l,r("month")],MM:[a,r("month")],MMM:[n,function(e){var t=u("months"),a=(u("monthsShort")||t.map((function(e){return e.slice(0,3)}))).indexOf(e)+1;if(a<1)throw new Error;this.month=a%12||a}],MMMM:[n,function(e){var t=u("months").indexOf(e)+1;if(t<1)throw new Error;this.month=t%12||t}],Y:[/[+-]?\d+/,r("year")],YY:[a,function(e){this.year=s(e)}],YYYY:[/\d{4}/,r("year")],Z:i,ZZ:i};function p(a){var l,n;l=a,n=o&&o.formats;for(var s=(a=l.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,(function(t,a,l){var o=l&&l.toUpperCase();return a||n[l]||e[l]||n[o].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,(function(e,t,a){return t||a.slice(1)}))}))).match(t),r=s.length,i=0;i<r;i+=1){var u=s[i],d=c[u],p=d&&d[0],v=d&&d[1];s[i]=v?{regex:p,parser:v}:u.replace(/^\[|\]$/g,"")}return function(e){for(var t={},a=0,l=0;a<r;a+=1){var n=s[a];if("string"==typeof n)l+=n.length;else{var o=n.regex,i=n.parser,u=e.slice(l),d=o.exec(u)[0];i.call(t,d),e=e.replace(d,"")}}return function(e){var t=e.afternoon;if(void 0!==t){var a=e.hours;t?a<12&&(e.hours+=12):12===a&&(e.hours=0),delete e.afternoon}}(t),t}}return function(e,t,a){a.p.customParseFormat=!0,e&&e.parseTwoDigitYear&&(s=e.parseTwoDigitYear);var l=t.prototype,n=l.parse;l.parse=function(e){var t=e.date,l=e.utc,s=e.args;this.$u=l;var r=s[1];if("string"==typeof r){var i=!0===s[2],u=!0===s[3],d=i||u,c=s[2];u&&(c=s[2]),o=this.$locale(),!i&&c&&(o=a.Ls[c]),this.$d=function(e,t,a){try{if(["x","X"].indexOf(t)>-1)return new Date(("X"===t?1e3:1)*e);var l=p(t)(e),n=l.year,o=l.month,s=l.day,r=l.hours,i=l.minutes,u=l.seconds,d=l.milliseconds,c=l.zone,v=new Date,m=s||(n||o?1:v.getDate()),f=n||v.getFullYear(),h=0;n&&!o||(h=o>0?o-1:v.getMonth());var g=r||0,y=i||0,b=u||0,k=d||0;return c?new Date(Date.UTC(f,h,m,g,y,b,k+60*c.offset*1e3)):a?new Date(Date.UTC(f,h,m,g,y,b,k)):new Date(f,h,m,g,y,b,k)}catch(w){return new Date("")}}(t,r,l),this.init(),c&&!0!==c&&(this.$L=this.locale(c).$L),d&&t!=this.format(r)&&(this.$d=new Date("")),o={}}else if(r instanceof Array)for(var v=r.length,m=1;m<=v;m+=1){s[1]=r[m-1];var f=a.apply(this,s);if(f.isValid()){this.$d=f.$d,this.$L=f.$L,this.init();break}m===v&&(this.$d=new Date(""))}else n.call(this,e)}}}();const pt=ct,vt=["hours","minutes","seconds"],mt="HH:mm:ss",ft="YYYY-MM-DD",ht={date:ft,dates:ft,week:"gggg[w]ww",year:"YYYY",month:"YYYY-MM",datetime:`${ft} ${mt}`,monthrange:"YYYY-MM",daterange:ft,datetimerange:`${ft} ${mt}`},gt=(e,t)=>[e>0?e-1:void 0,e,e<t?e+1:void 0],yt=e=>Array.from(Array.from({length:e}).keys()),bt=e=>e.replace(/\W?m{1,2}|\W?ZZ/g,"").replace(/\W?h{1,2}|\W?s{1,3}|\W?a/gi,"").trim(),kt=e=>e.replace(/\W?D{1,2}|\W?Do|\W?d{1,4}|\W?M{1,4}|\W?Y{2,4}/g,"").trim(),wt=function(e,t){const a=n(e),l=n(t);return a&&l?e.getTime()===t.getTime():!a&&!l&&e===t},St=function(e,t){const a=o(e),l=o(t);return a&&l?e.length===t.length&&e.every(((e,a)=>wt(e,t[a]))):!a&&!l&&wt(e,t)},xt=function(e,t,n){const o=a(t)||"x"===t?l(e).locale(n):l(e,t).locale(n);return o.isValid()?o:void 0},Mt=function(e,t,n){return a(t)?e:"x"===t?+e:l(e).locale(n).format(t)},Ct=(e,t)=>{var a;const l=[],n=null==t?void 0:t();for(let o=0;o<e;o++)l.push(null!=(a=null==n?void 0:n.includes(o))&&a);return l},Dt=s({disabledHours:{type:r(Function)},disabledMinutes:{type:r(Function)},disabledSeconds:{type:r(Function)}}),Vt=s({visible:Boolean,actualVisible:{type:Boolean,default:void 0},format:{type:String,default:""}}),It=s({id:{type:r([Array,String])},name:{type:r([Array,String]),default:""},popperClass:{type:String,default:""},format:String,valueFormat:String,type:{type:String,default:""},clearable:{type:Boolean,default:!0},clearIcon:{type:r([String,Object]),default:i},editable:{type:Boolean,default:!0},prefixIcon:{type:r([String,Object]),default:""},size:u,readonly:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},placeholder:{type:String,default:""},popperOptions:{type:r(Object),default:()=>({})},modelValue:{type:r([Date,Array,String,Number]),default:""},rangeSeparator:{type:String,default:"-"},startPlaceholder:String,endPlaceholder:String,defaultValue:{type:r([Date,Array])},defaultTime:{type:r([Date,Array])},isRange:{type:Boolean,default:!1},...Dt,disabledDate:{type:Function},cellClassName:{type:Function},shortcuts:{type:Array,default:()=>[]},arrowControl:{type:Boolean,default:!1},label:{type:String,default:void 0},tabindex:{type:r([String,Number]),default:0},validateEvent:{type:Boolean,default:!0},unlinkPanels:Boolean}),Ot=["id","name","placeholder","value","disabled","readonly"],At=["id","name","placeholder","value","disabled","readonly"],Tt=d({name:"Picker"}),_t=d({...Tt,props:It,emits:["update:modelValue","change","focus","blur","calendar-change","panel-change","visible-change","keydown"],setup(e,{expose:t,emit:a}){const l=e,{lang:n}=c(),s=p("date"),r=p("input"),i=p("range"),{form:u,formItem:d}=Ne(),N=v("ElPopperOptions",{}),E=m(),Y=m(),B=m(!1),U=m(!1),F=m(null);let W=!1,H=!1;f(B,(e=>{e?h((()=>{e&&(F.value=l.modelValue)})):(xe.value=null,h((()=>{j(l.modelValue)})))}));const j=(e,t)=>{!t&&St(e,F.value)||(a("change",e),l.validateEvent&&(null==d||d.validate("change").catch((e=>tt()))))},K=e=>{if(!St(l.modelValue,e)){let t;o(e)?t=e.map((e=>Mt(e,l.valueFormat,n.value))):e&&(t=Mt(e,l.valueFormat,n.value)),a("update:modelValue",e?t:e,n.value)}},q=g((()=>{if(Y.value){const e=be.value?Y.value:Y.value.$el;return Array.from(e.querySelectorAll("input"))}return[]})),G=(e,t,a)=>{const l=q.value;l.length&&(a&&"min"!==a?"max"===a&&(l[1].setSelectionRange(e,t),l[1].focus()):(l[0].setSelectionRange(e,t),l[0].focus()))},Z=(e="",t=!1)=>{let a;t||(H=!0),B.value=t,a=o(e)?e.map((e=>e.toDate())):e?e.toDate():e,xe.value=null,K(a)},Q=()=>{U.value=!0},X=()=>{a("visible-change",!0)},J=e=>{(null==e?void 0:e.key)===R.esc&&te(!0,!0)},ee=()=>{U.value=!1,B.value=!1,H=!1,a("visible-change",!1)},te=(e=!0,t=!1)=>{H=t;const[a,l]=k(q);let n=a;!e&&be.value&&(n=l),n&&n.focus()},ae=e=>{l.readonly||oe.value||B.value||H||(B.value=!0,a("focus",e))};let le;const ne=e=>{const t=async()=>{setTimeout((()=>{var n;le===t&&((null==(n=E.value)?void 0:n.isFocusInsideContent())&&!W||0!==q.value.filter((e=>e.contains(document.activeElement))).length||(Me(),B.value=!1,a("blur",e),l.validateEvent&&(null==d||d.validate("blur").catch((e=>tt())))),W=!1)}),0)};le=t,t()},oe=g((()=>l.disabled||(null==u?void 0:u.disabled))),se=g((()=>{let e;if(me.value?$e.value.getDefaultValue&&(e=$e.value.getDefaultValue()):e=o(l.modelValue)?l.modelValue.map((e=>xt(e,l.valueFormat,n.value))):xt(l.modelValue,l.valueFormat,n.value),$e.value.getRangeAvailableTime){const t=$e.value.getRangeAvailableTime(e);st(t,e)||(e=t,K(o(e)?e.map((e=>e.toDate())):e.toDate()))}return o(e)&&e.some((e=>!e))&&(e=[]),e})),re=g((()=>{if(!$e.value.panelReady)return"";const e=De(se.value);return o(xe.value)?[xe.value[0]||e&&e[0]||"",xe.value[1]||e&&e[1]||""]:null!==xe.value?xe.value:!ue.value&&me.value||!B.value&&me.value?"":e?de.value?e.join(", "):e:""})),ie=g((()=>l.type.includes("time"))),ue=g((()=>l.type.startsWith("time"))),de=g((()=>"dates"===l.type)),ce=g((()=>l.prefixIcon||(ie.value?y:b))),pe=m(!1),ve=e=>{l.readonly||oe.value||pe.value&&(e.stopPropagation(),te(!0,!0),h((()=>{H=!1})),K(null),j(null,!0),pe.value=!1,B.value=!1,$e.value.handleClear&&$e.value.handleClear())},me=g((()=>{const{modelValue:e}=l;return!e||o(e)&&!e.filter(Boolean).length})),fe=async e=>{var t;l.readonly||oe.value||("INPUT"!==(null==(t=e.target)?void 0:t.tagName)||q.value.includes(document.activeElement))&&(B.value=!0)},he=()=>{l.readonly||oe.value||!me.value&&l.clearable&&(pe.value=!0)},ge=()=>{pe.value=!1},ye=e=>{var t;l.readonly||oe.value||("INPUT"!==(null==(t=e.touches[0].target)?void 0:t.tagName)||q.value.includes(document.activeElement))&&(B.value=!0)},be=g((()=>l.type.includes("range"))),ke=Re(),we=g((()=>{var e,t;return null==(t=null==(e=k(E))?void 0:e.popperRef)?void 0:t.contentRef})),Se=g((()=>{var e;return k(be)?k(Y):null==(e=k(Y))?void 0:e.$el}));w(Se,(e=>{const t=k(we),a=k(Se);t&&(e.target===t||e.composedPath().includes(t))||e.target===a||e.composedPath().includes(a)||(B.value=!1)}));const xe=m(null),Me=()=>{if(xe.value){const e=Ce(re.value);e&&Ve(e)&&(K(o(e)?e.map((e=>e.toDate())):e.toDate()),xe.value=null)}""===xe.value&&(K(null),j(null),xe.value=null)},Ce=e=>e?$e.value.parseUserInput(e):null,De=e=>e?$e.value.formatToString(e):null,Ve=e=>$e.value.isValidValue(e),Ie=async e=>{if(l.readonly||oe.value)return;const{code:t}=e;if(a("keydown",e),t!==R.esc)if(t===R.down&&($e.value.handleFocusPicker&&(e.preventDefault(),e.stopPropagation()),!1===B.value&&(B.value=!0,await h()),$e.value.handleFocusPicker))$e.value.handleFocusPicker();else{if(t!==R.tab)return t===R.enter||t===R.numpadEnter?((null===xe.value||""===xe.value||Ve(Ce(re.value)))&&(Me(),B.value=!1),void e.stopPropagation()):void(xe.value?e.stopPropagation():$e.value.handleKeydownInput&&$e.value.handleKeydownInput(e));W=!0}else!0===B.value&&(B.value=!1,e.preventDefault(),e.stopPropagation())},Oe=e=>{xe.value=e,B.value||(B.value=!0)},Ae=e=>{const t=e.target;xe.value?xe.value=[t.value,xe.value[1]]:xe.value=[t.value,null]},Te=e=>{const t=e.target;xe.value?xe.value=[xe.value[0],t.value]:xe.value=[null,t.value]},_e=()=>{var e;const t=xe.value,a=Ce(t&&t[0]),l=k(se);if(a&&a.isValid()){xe.value=[De(a),(null==(e=re.value)?void 0:e[1])||null];const t=[a,l&&(l[1]||null)];Ve(t)&&(K(t),xe.value=null)}},Pe=()=>{var e;const t=k(xe),a=Ce(t&&t[1]),l=k(se);if(a&&a.isValid()){xe.value=[(null==(e=k(re))?void 0:e[0])||null,De(a)];const t=[l&&l[0],a];Ve(t)&&(K(t),xe.value=null)}},$e=m({}),ze=e=>{$e.value[e[0]]=e[1],$e.value.panelReady=!0},Le=e=>{a("calendar-change",e)},Ee=(e,t,l)=>{a("panel-change",e,t,l)};return S("EP_PICKER_BASE",{props:l}),t({focus:te,handleFocusInput:ae,handleBlurInput:ne,handleOpen:()=>{B.value=!0},handleClose:()=>{B.value=!1},onPick:Z}),(e,t)=>(x(),M(k(Ye),L({ref_key:"refPopper",ref:E,visible:B.value,effect:"light",pure:"",trigger:"click"},e.$attrs,{role:"dialog",teleported:"",transition:`${k(s).namespace.value}-zoom-in-top`,"popper-class":[`${k(s).namespace.value}-picker__popper`,e.popperClass],"popper-options":k(N),"fallback-placements":["bottom","top","right","left"],"gpu-acceleration":!1,"stop-popper-mouse-event":!1,"hide-after":0,persistent:"",onBeforeShow:Q,onShow:X,onHide:ee}),{default:C((()=>[k(be)?(x(),_("div",{key:1,ref_key:"inputRef",ref:Y,class:D([k(s).b("editor"),k(s).bm("editor",e.type),k(r).e("wrapper"),k(s).is("disabled",k(oe)),k(s).is("active",B.value),k(i).b("editor"),k(ke)?k(i).bm("editor",k(ke)):"",e.$attrs.class]),style:V(e.$attrs.style),onClick:ae,onMouseenter:he,onMouseleave:ge,onTouchstart:ye,onKeydown:Ie},[k(ce)?(x(),M(k(O),{key:0,class:D([k(r).e("icon"),k(i).e("icon")]),onMousedown:I(fe,["prevent"]),onTouchstart:ye},{default:C((()=>[(x(),M(A(k(ce))))])),_:1},8,["class","onMousedown"])):T("v-if",!0),P("input",{id:e.id&&e.id[0],autocomplete:"off",name:e.name&&e.name[0],placeholder:e.startPlaceholder,value:k(re)&&k(re)[0],disabled:k(oe),readonly:!e.editable||e.readonly,class:D(k(i).b("input")),onMousedown:fe,onInput:Ae,onChange:_e,onFocus:ae,onBlur:ne},null,42,Ot),$(e.$slots,"range-separator",{},(()=>[P("span",{class:D(k(i).b("separator"))},z(e.rangeSeparator),3)])),P("input",{id:e.id&&e.id[1],autocomplete:"off",name:e.name&&e.name[1],placeholder:e.endPlaceholder,value:k(re)&&k(re)[1],disabled:k(oe),readonly:!e.editable||e.readonly,class:D(k(i).b("input")),onMousedown:fe,onFocus:ae,onBlur:ne,onInput:Te,onChange:Pe},null,42,At),e.clearIcon?(x(),M(k(O),{key:1,class:D([k(r).e("icon"),k(i).e("close-icon"),{[k(i).e("close-icon--hidden")]:!pe.value}]),onClick:ve},{default:C((()=>[(x(),M(A(e.clearIcon)))])),_:1},8,["class"])):T("v-if",!0)],38)):(x(),M(k(Qe),{key:0,id:e.id,ref_key:"inputRef",ref:Y,"container-role":"combobox","model-value":k(re),name:e.name,size:k(ke),disabled:k(oe),placeholder:e.placeholder,class:D([k(s).b("editor"),k(s).bm("editor",e.type),e.$attrs.class]),style:V(e.$attrs.style),readonly:!e.editable||e.readonly||k(de)||"week"===e.type,label:e.label,tabindex:e.tabindex,"validate-event":!1,onInput:Oe,onFocus:ae,onBlur:ne,onKeydown:Ie,onChange:Me,onMousedown:fe,onMouseenter:he,onMouseleave:ge,onTouchstart:ye,onClick:t[0]||(t[0]=I((()=>{}),["stop"]))},{prefix:C((()=>[k(ce)?(x(),M(k(O),{key:0,class:D(k(r).e("icon")),onMousedown:I(fe,["prevent"]),onTouchstart:ye},{default:C((()=>[(x(),M(A(k(ce))))])),_:1},8,["class","onMousedown"])):T("v-if",!0)])),suffix:C((()=>[pe.value&&e.clearIcon?(x(),M(k(O),{key:0,class:D(`${k(r).e("icon")} clear-icon`),onClick:I(ve,["stop"])},{default:C((()=>[(x(),M(A(e.clearIcon)))])),_:1},8,["class","onClick"])):T("v-if",!0)])),_:1},8,["id","model-value","name","size","disabled","placeholder","class","style","readonly","label","tabindex","onKeydown"]))])),content:C((()=>[$(e.$slots,"default",{visible:B.value,actualVisible:U.value,parsedValue:k(se),format:e.format,unlinkPanels:e.unlinkPanels,type:e.type,defaultValue:e.defaultValue,onPick:Z,onSelectRange:G,onSetPickerOption:ze,onCalendarChange:Le,onPanelChange:Ee,onKeydown:J,onMousedown:t[1]||(t[1]=I((()=>{}),["stop"]))})])),_:3},16,["visible","transition","popper-class","popper-options"]))}});var Pt=N(_t,[["__file","/home/runner/work/element-plus/element-plus/packages/components/time-picker/src/common/picker.vue"]]);const $t=s({...Vt,datetimeRole:String,parsedValue:{type:r(Object)}}),zt=e=>e.map(((e,t)=>e||t)).filter((e=>!0!==e)),Lt=(e,t,a)=>({getHoursList:(t,a)=>Ct(24,e&&(()=>null==e?void 0:e(t,a))),getMinutesList:(e,a,l)=>Ct(60,t&&(()=>null==t?void 0:t(e,a,l))),getSecondsList:(e,t,l,n)=>Ct(60,a&&(()=>null==a?void 0:a(e,t,l,n)))}),Nt=s({role:{type:String,required:!0},spinnerDate:{type:r(Object),required:!0},showSeconds:{type:Boolean,default:!0},arrowControl:Boolean,amPmMode:{type:r(String),default:""},...Dt}),Rt=["onClick"],Et=["onMouseenter"];var Yt=N(d({__name:"basic-time-spinner",props:Nt,emits:["change","select-range","set-option"],setup(e,{emit:t}){const a=e,l=p("time"),{getHoursList:n,getMinutesList:o,getSecondsList:s}=Lt(a.disabledHours,a.disabledMinutes,a.disabledSeconds);let r=!1;const i=m(),u={hours:m(),minutes:m(),seconds:m()},d=g((()=>a.showSeconds?vt:vt.slice(0,2))),c=g((()=>{const{spinnerDate:e}=a;return{hours:e.hour(),minutes:e.minute(),seconds:e.second()}})),v=g((()=>{const{hours:e,minutes:t}=k(c);return{hours:n(a.role),minutes:o(e,a.role),seconds:s(e,t,a.role)}})),y=g((()=>{const{hours:e,minutes:t,seconds:a}=k(c);return{hours:gt(e,23),minutes:gt(t,59),seconds:gt(a,59)}})),b=ot((e=>{r=!1,V(e)}),200),w=e=>{if(!!!a.amPmMode)return"";let t=e<12?" am":" pm";return"A"===a.amPmMode&&(t=t.toUpperCase()),t},S=e=>{let a;switch(e){case"hours":a=[0,2];break;case"minutes":a=[3,5];break;case"seconds":a=[6,8]}const[l,n]=a;t("select-range",l,n),i.value=e},V=e=>{$(e,k(c)[e])},I=()=>{V("hours"),V("minutes"),V("seconds")},A=e=>e.querySelector(`.${l.namespace.value}-scrollbar__wrap`),$=(e,t)=>{if(a.arrowControl)return;const l=k(u[e]);l&&l.$el&&(A(l.$el).scrollTop=Math.max(0,t*L(e)))},L=e=>{const t=k(u[e]);return(null==t?void 0:t.$el.querySelector("li").offsetHeight)||0},N=()=>{K(1)},R=()=>{K(-1)},K=e=>{i.value||S("hours");const t=i.value,a=k(c)[t],l="hours"===i.value?24:60,n=q(t,a,e,l);G(t,n),$(t,n),h((()=>S(t)))},q=(e,t,a,l)=>{let n=(t+a+l)%l;const o=k(v)[e];for(;o[n]&&n!==t;)n=(n+a+l)%l;return n},G=(e,l)=>{if(k(v)[e][l])return;const{hours:n,minutes:o,seconds:s}=k(c);let r;switch(e){case"hours":r=a.spinnerDate.hour(l).minute(o).second(s);break;case"minutes":r=a.spinnerDate.hour(n).minute(l).second(s);break;case"seconds":r=a.spinnerDate.hour(n).minute(o).second(l)}t("change",r)},Z=e=>k(u[e]).$el.offsetHeight,Q=()=>{const e=e=>{const t=k(u[e]);t&&t.$el&&(A(t.$el).onscroll=()=>{(e=>{r=!0,b(e);const t=Math.min(Math.round((A(k(u[e]).$el).scrollTop-(.5*Z(e)-10)/L(e)+3)/L(e)),"hours"===e?23:59);G(e,t)})(e)})};e("hours"),e("minutes"),e("seconds")};E((()=>{h((()=>{!a.arrowControl&&Q(),I(),"start"===a.role&&S("hours")}))}));return t("set-option",[`${a.role}_scrollDown`,K]),t("set-option",[`${a.role}_emitSelectRange`,S]),f((()=>a.spinnerDate),(()=>{r||I()})),(e,t)=>(x(),_("div",{class:D([k(l).b("spinner"),{"has-seconds":e.showSeconds}])},[e.arrowControl?T("v-if",!0):(x(!0),_(Y,{key:0},B(k(d),(t=>(x(),M(k(Te),{key:t,ref_for:!0,ref:e=>((e,t)=>{u[t].value=e})(e,t),class:D(k(l).be("spinner","wrapper")),"wrap-style":"max-height: inherit;","view-class":k(l).be("spinner","list"),noresize:"",tag:"ul",onMouseenter:e=>S(t),onMousemove:e=>V(t)},{default:C((()=>[(x(!0),_(Y,null,B(k(v)[t],((a,n)=>(x(),_("li",{key:n,class:D([k(l).be("spinner","item"),k(l).is("active",n===k(c)[t]),k(l).is("disabled",a)]),onClick:e=>((e,{value:t,disabled:a})=>{a||(G(e,t),S(e),$(e,t))})(t,{value:n,disabled:a})},["hours"===t?(x(),_(Y,{key:0},[U(z(("0"+(e.amPmMode?n%12||12:n)).slice(-2))+z(w(n)),1)],64)):(x(),_(Y,{key:1},[U(z(("0"+n).slice(-2)),1)],64))],10,Rt)))),128))])),_:2},1032,["class","view-class","onMouseenter","onMousemove"])))),128)),e.arrowControl?(x(!0),_(Y,{key:1},B(k(d),(t=>(x(),_("div",{key:t,class:D([k(l).be("spinner","wrapper"),k(l).is("arrow")]),onMouseenter:e=>S(t)},[F((x(),M(k(O),{class:D(["arrow-up",k(l).be("spinner","arrow")])},{default:C((()=>[W(k(H))])),_:1},8,["class"])),[[k(We),R]]),F((x(),M(k(O),{class:D(["arrow-down",k(l).be("spinner","arrow")])},{default:C((()=>[W(k(j))])),_:1},8,["class"])),[[k(We),N]]),P("ul",{class:D(k(l).be("spinner","list"))},[(x(!0),_(Y,null,B(k(y)[t],((a,n)=>(x(),_("li",{key:n,class:D([k(l).be("spinner","item"),k(l).is("active",a===k(c)[t]),k(l).is("disabled",k(v)[t][a])])},["number"==typeof a?(x(),_(Y,{key:0},["hours"===t?(x(),_(Y,{key:0},[U(z(("0"+(e.amPmMode?a%12||12:a)).slice(-2))+z(w(a)),1)],64)):(x(),_(Y,{key:1},[U(z(("0"+a).slice(-2)),1)],64))],64)):T("v-if",!0)],2)))),128))],2)],42,Et)))),128)):T("v-if",!0)],2))}}),[["__file","/home/runner/work/element-plus/element-plus/packages/components/time-picker/src/time-picker-com/basic-time-spinner.vue"]]);const Bt=d({__name:"panel-time-pick",props:$t,emits:["pick","select-range","set-picker-option"],setup(e,{emit:t}){const a=e,n=v("EP_PICKER_BASE"),{arrowControl:o,disabledHours:s,disabledMinutes:r,disabledSeconds:i,defaultValue:u}=n.props,{getAvailableHours:d,getAvailableMinutes:h,getAvailableSeconds:y}=((e,t,a)=>{const{getHoursList:l,getMinutesList:n,getSecondsList:o}=Lt(e,t,a);return{getAvailableHours:(e,t)=>zt(l(e,t)),getAvailableMinutes:(e,t,a)=>zt(n(e,t,a)),getAvailableSeconds:(e,t,a,l)=>zt(o(e,t,a,l))}})(s,r,i),b=p("time"),{t:w,lang:S}=c(),V=m([0,2]),I=(e=>{const t=m(e.parsedValue);return f((()=>e.visible),(a=>{a||(t.value=e.parsedValue)})),t})(a),O=g((()=>K(a.actualVisible)?`${b.namespace.value}-zoom-in-top`:"")),A=g((()=>a.format.includes("ss"))),$=g((()=>a.format.includes("A")?"A":a.format.includes("a")?"a":"")),L=()=>{t("pick",I.value,!1)},N=e=>{if(!a.visible)return;const l=F(e).millisecond(0);t("pick",l,!0)},E=(e,a)=>{t("select-range",e,a),V.value=[e,a]},{timePickerOptions:Y,onSetOption:B,getAvailableTime:U}=(({getAvailableHours:e,getAvailableMinutes:t,getAvailableSeconds:a})=>{const l={};return{timePickerOptions:l,getAvailableTime:(l,n,o,s)=>{const r={hour:e,minute:t,second:a};let i=l;return["hour","minute","second"].forEach((e=>{if(r[e]){let t;const a=r[e];switch(e){case"minute":t=a(i.hour(),n,s);break;case"second":t=a(i.hour(),i.minute(),n,s);break;default:t=a(n,s)}if((null==t?void 0:t.length)&&!t.includes(i[e]())){const a=o?0:t.length-1;i=i[e](t[a])}}})),i},onSetOption:([e,t])=>{l[e]=t}}})({getAvailableHours:d,getAvailableMinutes:h,getAvailableSeconds:y}),F=e=>U(e,a.datetimeRole||"",!0);return t("set-picker-option",["isValidValue",e=>{const t=l(e).locale(S.value),a=F(t);return t.isSame(a)}]),t("set-picker-option",["formatToString",e=>e?e.format(a.format):null]),t("set-picker-option",["parseUserInput",e=>e?l(e,a.format).locale(S.value):null]),t("set-picker-option",["handleKeydownInput",e=>{const t=e.code,{left:a,right:l,up:n,down:o}=R;if([a,l].includes(t)){return(e=>{const t=[0,3].concat(A.value?[6]:[]),a=["hours","minutes"].concat(A.value?["seconds"]:[]),l=(t.indexOf(V.value[0])+e+t.length)%t.length;Y.start_emitSelectRange(a[l])})(t===a?-1:1),void e.preventDefault()}if([n,o].includes(t)){const a=t===n?-1:1;return Y.start_scrollDown(a),void e.preventDefault()}}]),t("set-picker-option",["getRangeAvailableTime",F]),t("set-picker-option",["getDefaultValue",()=>l(u).locale(S.value)]),(e,l)=>(x(),M(q,{name:k(O)},{default:C((()=>[e.actualVisible||e.visible?(x(),_("div",{key:0,class:D(k(b).b("panel"))},[P("div",{class:D([k(b).be("panel","content"),{"has-seconds":k(A)}])},[W(Yt,{ref:"spinner",role:e.datetimeRole||"start","arrow-control":k(o),"show-seconds":k(A),"am-pm-mode":k($),"spinner-date":e.parsedValue,"disabled-hours":k(s),"disabled-minutes":k(r),"disabled-seconds":k(i),onChange:N,onSetOption:k(B),onSelectRange:E},null,8,["role","arrow-control","show-seconds","am-pm-mode","spinner-date","disabled-hours","disabled-minutes","disabled-seconds","onSetOption"])],2),P("div",{class:D(k(b).be("panel","footer"))},[P("button",{type:"button",class:D([k(b).be("panel","btn"),"cancel"]),onClick:L},z(k(w)("el.datepicker.cancel")),3),P("button",{type:"button",class:D([k(b).be("panel","btn"),"confirm"]),onClick:l[0]||(l[0]=e=>((e=!1,l=!1)=>{l||t("pick",a.parsedValue,e)})())},z(k(w)("el.datepicker.confirm")),3)],2)],2)):T("v-if",!0)])),_:1},8,["name"]))}});var Ut=N(Bt,[["__file","/home/runner/work/element-plus/element-plus/packages/components/time-picker/src/time-picker-com/panel-time-pick.vue"]]),Ft={};({get exports(){return Ft},set exports(e){Ft=e}}).exports=function(e,t,a){var l=t.prototype,n=function(e){return e&&(e.indexOf?e:e.s)},o=function(e,t,a,l,o){var s=e.name?e:e.$locale(),r=n(s[t]),i=n(s[a]),u=r||i.map((function(e){return e.slice(0,l)}));if(!o)return u;var d=s.weekStart;return u.map((function(e,t){return u[(t+(d||0))%7]}))},s=function(){return a.Ls[a.locale()]},r=function(e,t){return e.formats[t]||e.formats[t.toUpperCase()].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,(function(e,t,a){return t||a.slice(1)}))},i=function(){var e=this;return{months:function(t){return t?t.format("MMMM"):o(e,"months")},monthsShort:function(t){return t?t.format("MMM"):o(e,"monthsShort","months",3)},firstDayOfWeek:function(){return e.$locale().weekStart||0},weekdays:function(t){return t?t.format("dddd"):o(e,"weekdays")},weekdaysMin:function(t){return t?t.format("dd"):o(e,"weekdaysMin","weekdays",2)},weekdaysShort:function(t){return t?t.format("ddd"):o(e,"weekdaysShort","weekdays",3)},longDateFormat:function(t){return r(e.$locale(),t)},meridiem:this.$locale().meridiem,ordinal:this.$locale().ordinal}};l.localeData=function(){return i.bind(this)()},a.localeData=function(){var e=s();return{firstDayOfWeek:function(){return e.weekStart||0},weekdays:function(){return a.weekdays()},weekdaysShort:function(){return a.weekdaysShort()},weekdaysMin:function(){return a.weekdaysMin()},months:function(){return a.months()},monthsShort:function(){return a.monthsShort()},longDateFormat:function(t){return r(e,t)},meridiem:e.meridiem,ordinal:e.ordinal}},a.months=function(){return o(s(),"months")},a.monthsShort=function(){return o(s(),"monthsShort","months",3)},a.weekdays=function(e){return o(s(),"weekdays",null,null,e)},a.weekdaysShort=function(e){return o(s(),"weekdaysShort","weekdays",3,e)},a.weekdaysMin=function(e){return o(s(),"weekdaysMin","weekdays",2,e)}};const Wt=Ft;var Ht={};({get exports(){return Ht},set exports(e){Ht=e}}).exports=function(e,t){var a=t.prototype,l=a.format;a.format=function(e){var t=this,a=this.$locale();if(!this.isValid())return l.bind(this)(e);var n=this.$utils(),o=(e||"YYYY-MM-DDTHH:mm:ssZ").replace(/\[([^\]]+)]|Q|wo|ww|w|WW|W|zzz|z|gggg|GGGG|Do|X|x|k{1,2}|S/g,(function(e){switch(e){case"Q":return Math.ceil((t.$M+1)/3);case"Do":return a.ordinal(t.$D);case"gggg":return t.weekYear();case"GGGG":return t.isoWeekYear();case"wo":return a.ordinal(t.week(),"W");case"w":case"ww":return n.s(t.week(),"w"===e?1:2,"0");case"W":case"WW":return n.s(t.isoWeek(),"W"===e?1:2,"0");case"k":case"kk":return n.s(String(0===t.$H?24:t.$H),"k"===e?1:2,"0");case"X":return Math.floor(t.$d.getTime()/1e3);case"x":return t.$d.getTime();case"z":return"["+t.offsetName()+"]";case"zzz":return"["+t.offsetName("long")+"]";default:return e}}));return l.bind(this)(o)}};const jt=Ht;var Kt,qt,Gt={};({get exports(){return Gt},set exports(e){Gt=e}}).exports=(Kt="week",qt="year",function(e,t,a){var l=t.prototype;l.week=function(e){if(void 0===e&&(e=null),null!==e)return this.add(7*(e-this.week()),"day");var t=this.$locale().yearStart||1;if(11===this.month()&&this.date()>25){var l=a(this).startOf(qt).add(1,qt).date(t),n=a(this).endOf(Kt);if(l.isBefore(n))return 1}var o=a(this).startOf(qt).date(t).startOf(Kt).subtract(1,"millisecond"),s=this.diff(o,Kt,!0);return s<0?a(this).startOf("week").week():Math.ceil(s)},l.weeks=function(e){return void 0===e&&(e=null),this.week(e)}});const Zt=Gt;var Qt={};({get exports(){return Qt},set exports(e){Qt=e}}).exports=function(e,t){t.prototype.weekYear=function(){var e=this.month(),t=this.week(),a=this.year();return 1===t&&11===e?a+1:0===e&&t>=52?a-1:a}};const Xt=Qt;var Jt={};({get exports(){return Jt},set exports(e){Jt=e}}).exports=function(e,t,a){t.prototype.dayOfYear=function(e){var t=Math.round((a(this).startOf("day")-a(this).startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"day")}};const ea=Jt;var ta={};({get exports(){return ta},set exports(e){ta=e}}).exports=function(e,t){t.prototype.isSameOrAfter=function(e,t){return this.isSame(e,t)||this.isAfter(e,t)}};const aa=ta;var la={};({get exports(){return la},set exports(e){la=e}}).exports=function(e,t){t.prototype.isSameOrBefore=function(e,t){return this.isSame(e,t)||this.isBefore(e,t)}};const na=la,oa=Symbol(),sa=s({type:{type:r(String),default:"date"}}),ra=["date","dates","year","month","week","range"],ia=s({disabledDate:{type:r(Function)},date:{type:r(Object),required:!0},minDate:{type:r(Object)},maxDate:{type:r(Object)},parsedValue:{type:r([Object,Array])},rangeState:{type:r(Object),default:()=>({endDate:null,selecting:!1})}}),ua=s({type:{type:r(String),required:!0,values:["year","month","date","dates","week","datetime","datetimerange","daterange","monthrange"]}}),da=s({unlinkPanels:Boolean,parsedValue:{type:r(Array)}}),ca=e=>({type:String,values:ra,default:e}),pa=s({...ua,parsedValue:{type:r([Object,Array])},visible:{type:Boolean},format:{type:String,default:""}}),va=s({...ia,cellClassName:{type:r(Function)},showWeekNumber:Boolean,selectionMode:ca("date")}),ma=e=>{if(!o(e))return!1;const[t,a]=e;return l.isDayjs(t)&&l.isDayjs(a)&&t.isSameOrBefore(a)},fa=(e,{lang:t,unit:a,unlinkPanels:n})=>{let s;if(o(e)){let[o,s]=e.map((e=>l(e).locale(t)));return n||(s=o.add(1,a)),[o,s]}return s=e?l(e):l(),s=s.locale(t),[s,s.add(1,a)]},ha=s({cell:{type:r(Object)}});var ga=d({name:"ElDatePickerCell",props:ha,setup(e){const t=p("date-table-cell"),{slots:a}=v(oa);return()=>{const{cell:l}=e;if(a.default){const e=a.default(l).filter((e=>-2!==e.patchFlag&&"Symbol(Comment)"!==e.type.toString()));if(e.length)return e}return W("div",{class:t.b()},[W("span",{class:t.e("text")},[null==l?void 0:l.text])])}}});const ya=["aria-label","onMousedown"],ba={key:0,scope:"col"},ka=["aria-label"],wa=["aria-current","aria-selected","tabindex"],Sa=d({__name:"basic-date-table",props:va,emits:["changerange","pick","select"],setup(e,{expose:t,emit:a}){const n=e,o=p("date-table"),{t:s,lang:r}=c(),i=m(),u=m(),d=m(),v=m(),y=m([[],[],[],[],[],[]]);let b=!1;const w=n.date.$locale().weekStart||7,S=n.date.locale("en").localeData().weekdaysShort().map((e=>e.toLowerCase())),M=g((()=>w>3?7-w:-w)),C=g((()=>{const e=n.date.startOf("month");return e.subtract(e.day()||7,"day")})),V=g((()=>S.concat(S).slice(w,w+7))),O=g((()=>rt(R.value).some((e=>e.isCurrent)))),A=g((()=>{const e=n.date.startOf("month");return{startOfMonthDay:e.day()||7,dateCountOfMonth:e.daysInMonth(),dateCountOfLastMonth:e.subtract(1,"month").daysInMonth()}})),$=g((()=>"dates"===n.selectionMode?it(n.parsedValue):[])),L=(e,{columnIndex:t,rowIndex:a},l)=>{const{disabledDate:o,cellClassName:s}=n,r=k($),i=((e,{count:t,rowIndex:a,columnIndex:l})=>{const{startOfMonthDay:n,dateCountOfMonth:o,dateCountOfLastMonth:s}=k(A),r=k(M);if(!(a>=0&&a<=1))return t<=o?e.text=t:(e.text=t-o,e.type="next-month"),!0;{const o=n+r<0?7+n+r:n+r;if(l+7*a>=o)return e.text=t,!0;e.text=s-(o-l%7)+1+7*a,e.type="prev-month"}return!1})(e,{count:l,rowIndex:a,columnIndex:t}),u=e.dayjs.toDate();return e.selected=r.find((t=>t.valueOf()===e.dayjs.valueOf())),e.isSelected=!!e.selected,e.isCurrent=U(e),e.disabled=null==o?void 0:o(u),e.customClass=null==s?void 0:s(u),i},N=e=>{if("week"===n.selectionMode){const[t,a]=n.showWeekNumber?[1,7]:[0,6],l=J(e[t+1]);e[t].inRange=l,e[t].start=l,e[a].inRange=l,e[a].end=l}},R=g((()=>{const{minDate:e,maxDate:t,rangeState:a,showWeekNumber:o}=n,s=M.value,i=y.value,u="day";let d=1;if(o)for(let l=0;l<6;l++)i[l][0]||(i[l][0]={type:"week",text:C.value.add(7*l+1,u).week()});return((e,t,{columnIndexOffset:a,startDate:l,nextEndDate:n,now:o,unit:s,relativeDateGetter:r,setCellMetadata:i,setRowMetadata:u})=>{for(let d=0;d<e.row;d++){const c=t[d];for(let t=0;t<e.column;t++){let u=c[t+a];u||(u={row:d,column:t,type:"normal",inRange:!1,start:!1,end:!1});const p=r(d*e.column+t);u.dayjs=p,u.date=p.toDate(),u.timestamp=p.valueOf(),u.type="normal",u.inRange=!!(l&&p.isSameOrAfter(l,s)&&n&&p.isSameOrBefore(n,s))||!!(l&&p.isSameOrBefore(l,s)&&n&&p.isSameOrAfter(n,s)),(null==l?void 0:l.isSameOrAfter(n))?(u.start=!!n&&p.isSame(n,s),u.end=l&&p.isSame(l,s)):(u.start=!!l&&p.isSame(l,s),u.end=!!n&&p.isSame(n,s)),p.isSame(o,s)&&(u.type="today"),null==i||i(u,{rowIndex:d,columnIndex:t}),c[t+a]=u}null==u||u(c)}})({row:6,column:7},i,{startDate:e,columnIndexOffset:o?1:0,nextEndDate:a.endDate||t||a.selecting&&e||null,now:l().locale(k(r)).startOf(u),unit:u,relativeDateGetter:e=>C.value.add(e-s,u),setCellMetadata:(...e)=>{L(...e,d)&&(d+=1)},setRowMetadata:N}),i}));f((()=>n.date),(async()=>{var e,t;(null==(e=i.value)?void 0:e.contains(document.activeElement))&&(await h(),null==(t=u.value)||t.focus())}));const E=(e="")=>["normal","today"].includes(e),U=e=>"date"===n.selectionMode&&E(e.type)&&F(e,n.parsedValue),F=(e,t)=>!!t&&l(t).locale(r.value).isSame(n.date.date(Number(e.text)),"day"),H=e=>{const t=[];return E(e.type)&&!e.disabled?(t.push("available"),"today"===e.type&&t.push("today")):t.push(e.type),U(e)&&t.push("current"),e.inRange&&(E(e.type)||"week"===n.selectionMode)&&(t.push("in-range"),e.start&&t.push("start-date"),e.end&&t.push("end-date")),e.disabled&&t.push("disabled"),e.selected&&t.push("selected"),e.customClass&&t.push(e.customClass),t.join(" ")},j=(e,t)=>{const a=7*e+(t-(n.showWeekNumber?1:0))-M.value;return C.value.add(a,"day")},K=e=>{var t;if(!n.rangeState.selecting)return;let l=e.target;if("SPAN"===l.tagName&&(l=null==(t=l.parentNode)?void 0:t.parentNode),"DIV"===l.tagName&&(l=l.parentNode),"TD"!==l.tagName)return;const o=l.parentNode.rowIndex-1,s=l.cellIndex;R.value[o][s].disabled||o===d.value&&s===v.value||(d.value=o,v.value=s,a("changerange",{selecting:!0,endDate:j(o,s)}))},q=e=>!O.value&&1===(null==e?void 0:e.text)&&"normal"===e.type||e.isCurrent,G=e=>{b||O.value||"date"!==n.selectionMode||X(e,!0)},Z=e=>{e.target.closest("td")&&(b=!0)},Q=e=>{e.target.closest("td")&&(b=!1)},X=(e,t=!1)=>{const l=e.target.closest("td");if(!l)return;const o=l.parentNode.rowIndex-1,s=l.cellIndex,r=R.value[o][s];if(r.disabled||"week"===r.type)return;const i=j(o,s);if("range"===n.selectionMode)n.rangeState.selecting&&n.minDate?(i>=n.minDate?a("pick",{minDate:n.minDate,maxDate:i}):a("pick",{minDate:i,maxDate:n.minDate}),a("select",!1)):(a("pick",{minDate:i,maxDate:null}),a("select",!0));else if("date"===n.selectionMode)a("pick",i,t);else if("week"===n.selectionMode){const e=i.week(),t=`${i.year()}w${e}`;a("pick",{year:i.year(),week:e,value:t,date:i.startOf("week")})}else if("dates"===n.selectionMode){const e=r.selected?it(n.parsedValue).filter((e=>(null==e?void 0:e.valueOf())!==i.valueOf())):it(n.parsedValue).concat([i]);a("pick",e)}},J=e=>{if("week"!==n.selectionMode)return!1;let t=n.date.startOf("day");if("prev-month"===e.type&&(t=t.subtract(1,"month")),"next-month"===e.type&&(t=t.add(1,"month")),t=t.date(Number.parseInt(e.text,10)),n.parsedValue&&!Array.isArray(n.parsedValue)){const e=(n.parsedValue.day()-w+7)%7-1;return n.parsedValue.subtract(e,"day").isSame(t,"day")}return!1};return t({focus:async()=>{var e;null==(e=u.value)||e.focus()}}),(e,t)=>(x(),_("table",{role:"grid","aria-label":k(s)("el.datepicker.dateTablePrompt"),cellspacing:"0",cellpadding:"0",class:D([k(o).b(),{"is-week-mode":"week"===e.selectionMode}]),onClick:X,onMousemove:K,onMousedown:I(Z,["prevent"]),onMouseup:Q},[P("tbody",{ref_key:"tbodyRef",ref:i},[P("tr",null,[e.showWeekNumber?(x(),_("th",ba,z(k(s)("el.datepicker.week")),1)):T("v-if",!0),(x(!0),_(Y,null,B(k(V),((e,t)=>(x(),_("th",{key:t,scope:"col","aria-label":k(s)("el.datepicker.weeksFull."+e)},z(k(s)("el.datepicker.weeks."+e)),9,ka)))),128))]),(x(!0),_(Y,null,B(k(R),((e,t)=>(x(),_("tr",{key:t,class:D([k(o).e("row"),{current:J(e[1])}])},[(x(!0),_(Y,null,B(e,((e,a)=>(x(),_("td",{key:`${t}.${a}`,ref_for:!0,ref:t=>q(e)&&(u.value=t),class:D(H(e)),"aria-current":e.isCurrent?"date":void 0,"aria-selected":e.isCurrent,tabindex:q(e)?0:-1,onFocus:G},[W(k(ga),{cell:e},null,8,["cell"])],42,wa)))),128))],2)))),128))],512)],42,ya))}});var xa=N(Sa,[["__file","/home/runner/work/element-plus/element-plus/packages/components/date-picker/src/date-picker-com/basic-date-table.vue"]]);const Ma=s({...ia,selectionMode:ca("month")}),Ca=["aria-label"],Da=["aria-selected","aria-label","tabindex","onKeydown"],Va={class:"cell"},Ia=d({__name:"basic-month-table",props:Ma,emits:["changerange","pick","select"],setup(e,{expose:t,emit:a}){const n=e,o=p("month-table"),{t:s,lang:r}=c(),i=m(),u=m(),d=m(n.date.locale("en").localeData().monthsShort().map((e=>e.toLowerCase()))),v=m([[],[],[]]),y=m(),b=m(),w=g((()=>{var e,t;const a=v.value,o=l().locale(r.value).startOf("month");for(let l=0;l<3;l++){const s=a[l];for(let a=0;a<4;a++){const r=s[a]||(s[a]={row:l,column:a,type:"normal",inRange:!1,start:!1,end:!1,text:-1,disabled:!1});r.type="normal";const i=4*l+a,u=n.date.startOf("year").month(i),d=n.rangeState.endDate||n.maxDate||n.rangeState.selecting&&n.minDate||null;r.inRange=!!(n.minDate&&u.isSameOrAfter(n.minDate,"month")&&d&&u.isSameOrBefore(d,"month"))||!!(n.minDate&&u.isSameOrBefore(n.minDate,"month")&&d&&u.isSameOrAfter(d,"month")),(null==(e=n.minDate)?void 0:e.isSameOrAfter(d))?(r.start=!(!d||!u.isSame(d,"month")),r.end=n.minDate&&u.isSame(n.minDate,"month")):(r.start=!(!n.minDate||!u.isSame(n.minDate,"month")),r.end=!(!d||!u.isSame(d,"month")));o.isSame(u)&&(r.type="today"),r.text=i,r.disabled=(null==(t=n.disabledDate)?void 0:t.call(n,u.toDate()))||!1}}return a})),S=e=>{const t={},a=n.date.year(),o=new Date,s=e.text;return t.disabled=!!n.disabledDate&&((e,t,a)=>{const n=l().locale(a).startOf("month").month(t).year(e),o=n.daysInMonth();return yt(o).map((e=>n.add(e,"day").toDate()))})(a,s,r.value).every(n.disabledDate),t.current=it(n.parsedValue).findIndex((e=>l.isDayjs(e)&&e.year()===a&&e.month()===s))>=0,t.today=o.getFullYear()===a&&o.getMonth()===s,e.inRange&&(t["in-range"]=!0,e.start&&(t["start-date"]=!0),e.end&&(t["end-date"]=!0)),t},M=e=>{const t=n.date.year(),a=e.text;return it(n.date).findIndex((e=>e.year()===t&&e.month()===a))>=0},C=e=>{var t;if(!n.rangeState.selecting)return;let l=e.target;if("A"===l.tagName&&(l=null==(t=l.parentNode)?void 0:t.parentNode),"DIV"===l.tagName&&(l=l.parentNode),"TD"!==l.tagName)return;const o=l.parentNode.rowIndex,s=l.cellIndex;w.value[o][s].disabled||o===y.value&&s===b.value||(y.value=o,b.value=s,a("changerange",{selecting:!0,endDate:n.date.startOf("year").month(4*o+s)}))},V=e=>{var t;const l=null==(t=e.target)?void 0:t.closest("td");if("TD"!==(null==l?void 0:l.tagName))return;if(Z(l,"disabled"))return;const o=l.cellIndex,s=4*l.parentNode.rowIndex+o,r=n.date.startOf("year").month(s);"range"===n.selectionMode?n.rangeState.selecting?(n.minDate&&r>=n.minDate?a("pick",{minDate:n.minDate,maxDate:r}):a("pick",{minDate:r,maxDate:n.minDate}),a("select",!1)):(a("pick",{minDate:r,maxDate:null}),a("select",!0)):a("pick",s)};return f((()=>n.date),(async()=>{var e,t;(null==(e=i.value)?void 0:e.contains(document.activeElement))&&(await h(),null==(t=u.value)||t.focus())})),t({focus:()=>{var e;null==(e=u.value)||e.focus()}}),(e,t)=>(x(),_("table",{role:"grid","aria-label":k(s)("el.datepicker.monthTablePrompt"),class:D(k(o).b()),onClick:V,onMousemove:C},[P("tbody",{ref_key:"tbodyRef",ref:i},[(x(!0),_(Y,null,B(k(w),((e,t)=>(x(),_("tr",{key:t},[(x(!0),_(Y,null,B(e,((e,t)=>(x(),_("td",{key:t,ref_for:!0,ref:t=>M(e)&&(u.value=t),class:D(S(e)),"aria-selected":`${M(e)}`,"aria-label":k(s)("el.datepicker.month"+(+e.text+1)),tabindex:M(e)?0:-1,onKeydown:[G(I(V,["prevent","stop"]),["space"]),G(I(V,["prevent","stop"]),["enter"])]},[P("div",null,[P("span",Va,z(k(s)("el.datepicker.months."+d.value[e.text])),1)])],42,Da)))),128))])))),128))],512)],42,Ca))}});var Oa=N(Ia,[["__file","/home/runner/work/element-plus/element-plus/packages/components/date-picker/src/date-picker-com/basic-month-table.vue"]]);const{date:Aa,disabledDate:Ta,parsedValue:_a}=ia,Pa=s({date:Aa,disabledDate:Ta,parsedValue:_a}),$a=["aria-label"],za=["aria-selected","tabindex","onKeydown"],La={class:"cell"},Na={key:1},Ra=d({__name:"basic-year-table",props:Pa,emits:["pick"],setup(e,{expose:t,emit:a}){const n=e,o=p("year-table"),{t:s,lang:r}=c(),i=m(),u=m(),d=g((()=>10*Math.floor(n.date.year()/10))),v=e=>{const t={},a=l().locale(r.value);return t.disabled=!!n.disabledDate&&((e,t)=>{const a=l(String(e)).locale(t).startOf("year"),n=a.endOf("year").dayOfYear();return yt(n).map((e=>a.add(e,"day").toDate()))})(e,r.value).every(n.disabledDate),t.current=it(n.parsedValue).findIndex((t=>t.year()===e))>=0,t.today=a.year()===e,t},y=e=>e===d.value&&n.date.year()<d.value&&n.date.year()>d.value+9||it(n.date).findIndex((t=>t.year()===e))>=0,b=e=>{const t=e.target.closest("td");if(t&&t.textContent){if(Z(t,"disabled"))return;const e=t.textContent||t.innerText;a("pick",Number(e))}};return f((()=>n.date),(async()=>{var e,t;(null==(e=i.value)?void 0:e.contains(document.activeElement))&&(await h(),null==(t=u.value)||t.focus())})),t({focus:()=>{var e;null==(e=u.value)||e.focus()}}),(e,t)=>(x(),_("table",{role:"grid","aria-label":k(s)("el.datepicker.yearTablePrompt"),class:D(k(o).b()),onClick:b},[P("tbody",{ref_key:"tbodyRef",ref:i},[(x(),_(Y,null,B(3,((e,t)=>P("tr",{key:t},[(x(),_(Y,null,B(4,((e,a)=>(x(),_(Y,{key:t+"_"+a},[4*t+a<10?(x(),_("td",{key:0,ref_for:!0,ref:e=>y(k(d)+4*t+a)&&(u.value=e),class:D(["available",v(k(d)+4*t+a)]),"aria-selected":`${y(k(d)+4*t+a)}`,tabindex:y(k(d)+4*t+a)?0:-1,onKeydown:[G(I(b,["prevent","stop"]),["space"]),G(I(b,["prevent","stop"]),["enter"])]},[P("span",La,z(k(d)+4*t+a),1)],42,za)):(x(),_("td",Na))],64)))),64))]))),64))],512)],10,$a))}});var Ea=N(Ra,[["__file","/home/runner/work/element-plus/element-plus/packages/components/date-picker/src/date-picker-com/basic-year-table.vue"]]);const Ya=["onClick"],Ba=["aria-label"],Ua=["aria-label"],Fa=["aria-label"],Wa=["aria-label"],Ha=d({__name:"panel-date-pick",props:pa,emits:["pick","set-picker-option","panel-change"],setup(e,{emit:t}){const a=e,n=p("picker-panel"),s=p("date-picker"),r=Q(),i=X(),{t:u,lang:d}=c(),y=v("EP_PICKER_BASE"),b=v(Be),{shortcuts:w,disabledDate:S,cellClassName:V,defaultTime:I,arrowControl:A}=y.props,L=J(y.props,"defaultValue"),N=m(),E=m(l().locale(d.value)),H=m(!1),j=g((()=>l(I).locale(d.value))),K=g((()=>E.value.month())),q=g((()=>E.value.year())),Z=m([]),se=m(null),re=m(null),ie=e=>!(Z.value.length>0)||(Z.value,a.format,!0),ue=e=>!I||Ie.value||H.value?Se.value?e.millisecond(0):e.startOf("day"):j.value.year(e.year()).month(e.month()).date(e.date()),de=(e,...a)=>{if(e)if(o(e)){const l=e.map(ue);t("pick",l,...a)}else t("pick",ue(e),...a);else t("pick",e,...a);se.value=null,re.value=null,H.value=!1},ce=(e,t)=>{if("date"===he.value){let l=a.parsedValue?a.parsedValue.year(e.year()).month(e.month()).date(e.date()):e;ie()||(l=Z.value[0][0].year(e.year()).month(e.month()).date(e.date())),E.value=l,de(l,Se.value||t)}else"week"===he.value?de(e.date):"dates"===he.value&&de(e,!0)},pe=e=>{const t=e?"add":"subtract";E.value=E.value[t](1,"month"),Fe("month")},ve=e=>{const t=E.value,a=e?"add":"subtract";E.value="year"===me.value?t[a](10,"year"):t[a](1,"year"),Fe("year")},me=m("date"),fe=g((()=>{const e=u("el.datepicker.year");if("year"===me.value){const t=10*Math.floor(q.value/10);return e?`${t} ${e} - ${t+9} ${e}`:`${t} - ${t+9}`}return`${q.value} ${e}`})),he=g((()=>{const{type:e}=a;return["week","month","year","dates"].includes(e)?e:"date"})),ge=g((()=>"date"===he.value?me.value:he.value)),ye=g((()=>!!w.length)),be=async e=>{E.value=E.value.startOf("month").month(e),"month"===he.value?de(E.value,!1):(me.value="date",["month","year","date","week"].includes(he.value)&&(de(E.value,!0),await h(),Re())),Fe("month")},ke=async e=>{"year"===he.value?(E.value=E.value.startOf("year").year(e),de(E.value,!1)):(E.value=E.value.year(e),me.value="month",["month","year","date","week"].includes(he.value)&&(de(E.value,!0),await h(),Re())),Fe("year")},we=async e=>{me.value=e,await h(),Re()},Se=g((()=>"datetime"===a.type||"datetimerange"===a.type)),xe=g((()=>Se.value||"dates"===he.value)),Me=()=>{if("dates"===he.value)de(a.parsedValue);else{let e=a.parsedValue;if(!e){const t=l(I).locale(d.value),a=Ne();e=t.year(a.year()).month(a.month()).date(a.date())}E.value=e,de(e)}},Ce=()=>{const e=l().locale(d.value).toDate();H.value=!0,S&&S(e)||!ie()||(E.value=l().locale(d.value),de(E.value))},De=g((()=>kt(a.format))),Ve=g((()=>bt(a.format))),Ie=g((()=>re.value?re.value:a.parsedValue||L.value?(a.parsedValue||E.value).format(De.value):void 0)),Oe=g((()=>se.value?se.value:a.parsedValue||L.value?(a.parsedValue||E.value).format(Ve.value):void 0)),Ae=m(!1),Te=()=>{Ae.value=!0},_e=()=>{Ae.value=!1},Pe=e=>({hour:e.hour(),minute:e.minute(),second:e.second(),year:e.year(),month:e.month(),date:e.date()}),$e=(e,t,l)=>{const{hour:n,minute:o,second:s}=Pe(e),r=a.parsedValue?a.parsedValue.hour(n).minute(o).second(s):e;E.value=r,de(E.value,!0),l||(Ae.value=t)},ze=e=>{const t=l(e,De.value).locale(d.value);if(t.isValid()&&ie()){const{year:e,month:a,date:l}=Pe(E.value);E.value=t.year(e).month(a).date(l),re.value=null,Ae.value=!1,de(E.value,!0)}},Le=e=>{const t=l(e,Ve.value).locale(d.value);if(t.isValid()){if(S&&S(t.toDate()))return;const{hour:e,minute:a,second:l}=Pe(E.value);E.value=t.hour(e).minute(a).second(l),se.value=null,de(E.value,!0)}},Ne=()=>{const e=l(L.value).locale(d.value);if(!L.value){const e=j.value;return l().hour(e.hour()).minute(e.minute()).second(e.second()).locale(d.value)}return e},Re=async()=>{var e;["week","month","year","date"].includes(he.value)&&(null==(e=N.value)||e.focus(),"week"===he.value&&Ue(R.down))},Ye=e=>{const{code:t}=e;[R.up,R.down,R.left,R.right,R.home,R.end,R.pageUp,R.pageDown].includes(t)&&(Ue(t),e.stopPropagation(),e.preventDefault()),[R.enter,R.space].includes(t)&&null===se.value&&null===re.value&&(e.preventDefault(),de(E.value,!1))},Ue=e=>{var a;const{up:n,down:o,left:s,right:r,home:i,end:u,pageUp:c,pageDown:p}=R,v={year:{[n]:-4,[o]:4,[s]:-1,[r]:1,offset:(e,t)=>e.setFullYear(e.getFullYear()+t)},month:{[n]:-4,[o]:4,[s]:-1,[r]:1,offset:(e,t)=>e.setMonth(e.getMonth()+t)},week:{[n]:-1,[o]:1,[s]:-1,[r]:1,offset:(e,t)=>e.setDate(e.getDate()+7*t)},date:{[n]:-7,[o]:7,[s]:-1,[r]:1,[i]:e=>-e.getDay(),[u]:e=>6-e.getDay(),[c]:e=>-new Date(e.getFullYear(),e.getMonth(),0).getDate(),[p]:e=>new Date(e.getFullYear(),e.getMonth()+1,0).getDate(),offset:(e,t)=>e.setDate(e.getDate()+t)}},m=E.value.toDate();for(;Math.abs(E.value.diff(m,"year",!0))<1;){const n=v[ge.value];if(!n)return;if(n.offset(m,oe(n[e])?n[e](m):null!=(a=n[e])?a:0),S&&S(m))break;const o=l(m).locale(d.value);E.value=o,t("pick",o,!0);break}},Fe=e=>{t("panel-change",E.value.toDate(),e,me.value)};return f((()=>he.value),(e=>{["month","year"].includes(e)?me.value=e:me.value="date"}),{immediate:!0}),f((()=>me.value),(()=>{null==b||b.updatePopper()})),f((()=>L.value),(e=>{e&&(E.value=Ne())}),{immediate:!0}),f((()=>a.parsedValue),(e=>{if(e){if("dates"===he.value)return;if(Array.isArray(e))return;E.value=e}else E.value=Ne()}),{immediate:!0}),t("set-picker-option",["isValidValue",e=>l.isDayjs(e)&&e.isValid()&&(!S||!S(e.toDate()))]),t("set-picker-option",["formatToString",e=>"dates"===he.value?e.map((e=>e.format(a.format))):e.format(a.format)]),t("set-picker-option",["parseUserInput",e=>l(e,a.format).locale(d.value)]),t("set-picker-option",["handleFocusPicker",Re]),(e,a)=>(x(),_("div",{class:D([k(n).b(),k(s).b(),{"has-sidebar":e.$slots.sidebar||k(ye),"has-time":k(Se)}])},[P("div",{class:D(k(n).e("body-wrapper"))},[$(e.$slots,"sidebar",{class:D(k(n).e("sidebar"))}),k(ye)?(x(),_("div",{key:0,class:D(k(n).e("sidebar"))},[(x(!0),_(Y,null,B(k(w),((e,a)=>(x(),_("button",{key:a,type:"button",class:D(k(n).e("shortcut")),onClick:a=>(e=>{const a=oe(e.value)?e.value():e.value;a?de(l(a).locale(d.value)):e.onClick&&e.onClick({attrs:r,slots:i,emit:t})})(e)},z(e.text),11,Ya)))),128))],2)):T("v-if",!0),P("div",{class:D(k(n).e("body"))},[k(Se)?(x(),_("div",{key:0,class:D(k(s).e("time-header"))},[P("span",{class:D(k(s).e("editor-wrap"))},[W(k(Qe),{placeholder:k(u)("el.datepicker.selectDate"),"model-value":k(Oe),size:"small","validate-event":!1,onInput:a[0]||(a[0]=e=>se.value=e),onChange:Le},null,8,["placeholder","model-value"])],2),F((x(),_("span",{class:D(k(s).e("editor-wrap"))},[W(k(Qe),{placeholder:k(u)("el.datepicker.selectTime"),"model-value":k(Ie),size:"small","validate-event":!1,onFocus:Te,onInput:a[1]||(a[1]=e=>re.value=e),onChange:ze},null,8,["placeholder","model-value"]),W(k(Ut),{visible:Ae.value,format:k(De),"time-arrow-control":k(A),"parsed-value":E.value,onPick:$e},null,8,["visible","format","time-arrow-control","parsed-value"])],2)),[[k(He),_e]])],2)):T("v-if",!0),F(P("div",{class:D([k(s).e("header"),("year"===me.value||"month"===me.value)&&k(s).e("header--bordered")])},[P("span",{class:D(k(s).e("prev-btn"))},[P("button",{type:"button","aria-label":k(u)("el.datepicker.prevYear"),class:D(["d-arrow-left",k(n).e("icon-btn")]),onClick:a[2]||(a[2]=e=>ve(!1))},[W(k(O),null,{default:C((()=>[W(k(te))])),_:1})],10,Ba),F(P("button",{type:"button","aria-label":k(u)("el.datepicker.prevMonth"),class:D([k(n).e("icon-btn"),"arrow-left"]),onClick:a[3]||(a[3]=e=>pe(!1))},[W(k(O),null,{default:C((()=>[W(k(ae))])),_:1})],10,Ua),[[ee,"date"===me.value]])],2),P("span",{role:"button",class:D(k(s).e("header-label")),"aria-live":"polite",tabindex:"0",onKeydown:a[4]||(a[4]=G((e=>we("year")),["enter"])),onClick:a[5]||(a[5]=e=>we("year"))},z(k(fe)),35),F(P("span",{role:"button","aria-live":"polite",tabindex:"0",class:D([k(s).e("header-label"),{active:"month"===me.value}]),onKeydown:a[6]||(a[6]=G((e=>we("month")),["enter"])),onClick:a[7]||(a[7]=e=>we("month"))},z(k(u)(`el.datepicker.month${k(K)+1}`)),35),[[ee,"date"===me.value]]),P("span",{class:D(k(s).e("next-btn"))},[F(P("button",{type:"button","aria-label":k(u)("el.datepicker.nextMonth"),class:D([k(n).e("icon-btn"),"arrow-right"]),onClick:a[8]||(a[8]=e=>pe(!0))},[W(k(O),null,{default:C((()=>[W(k(le))])),_:1})],10,Fa),[[ee,"date"===me.value]]),P("button",{type:"button","aria-label":k(u)("el.datepicker.nextYear"),class:D([k(n).e("icon-btn"),"d-arrow-right"]),onClick:a[9]||(a[9]=e=>ve(!0))},[W(k(O),null,{default:C((()=>[W(k(ne))])),_:1})],10,Wa)],2)],2),[[ee,"time"!==me.value]]),P("div",{class:D(k(n).e("content")),onKeydown:Ye},["date"===me.value?(x(),M(xa,{key:0,ref_key:"currentViewRef",ref:N,"selection-mode":k(he),date:E.value,"parsed-value":e.parsedValue,"disabled-date":k(S),"cell-class-name":k(V),onPick:ce},null,8,["selection-mode","date","parsed-value","disabled-date","cell-class-name"])):T("v-if",!0),"year"===me.value?(x(),M(Ea,{key:1,ref_key:"currentViewRef",ref:N,date:E.value,"disabled-date":k(S),"parsed-value":e.parsedValue,onPick:ke},null,8,["date","disabled-date","parsed-value"])):T("v-if",!0),"month"===me.value?(x(),M(Oa,{key:2,ref_key:"currentViewRef",ref:N,date:E.value,"parsed-value":e.parsedValue,"disabled-date":k(S),onPick:be},null,8,["date","parsed-value","disabled-date"])):T("v-if",!0)],34)],2)],2),F(P("div",{class:D(k(n).e("footer"))},[F(W(k(Ee),{text:"",size:"small",class:D(k(n).e("link-btn")),onClick:Ce},{default:C((()=>[U(z(k(u)("el.datepicker.now")),1)])),_:1},8,["class"]),[[ee,"dates"!==k(he)]]),W(k(Ee),{plain:"",size:"small",class:D(k(n).e("link-btn")),onClick:Me},{default:C((()=>[U(z(k(u)("el.datepicker.confirm")),1)])),_:1},8,["class"])],2),[[ee,k(xe)&&"date"===me.value]])],2))}});var ja=N(Ha,[["__file","/home/runner/work/element-plus/element-plus/packages/components/date-picker/src/date-picker-com/panel-date-pick.vue"]]);const Ka=s({...ua,...da}),qa=(e,{defaultValue:t,leftDate:a,rightDate:n,unit:s,onParsedValueChanged:r})=>{const{emit:i}=se(),{pickerNs:u}=v(oa),d=p("date-range-picker"),{t:h,lang:g}=c(),y=(e=>{const{emit:t}=se(),a=Q(),n=X();return o=>{const s=oe(o.value)?o.value():o.value;s?t("pick",[l(s[0]).locale(e.value),l(s[1]).locale(e.value)]):o.onClick&&o.onClick({attrs:a,slots:n,emit:t})}})(g),b=m(),w=m(),S=m({endDate:null,selecting:!1}),x=()=>{const[l,o]=fa(k(t),{lang:k(g),unit:s,unlinkPanels:e.unlinkPanels});b.value=void 0,w.value=void 0,a.value=l,n.value=o};return f(t,(e=>{e&&x()}),{immediate:!0}),f((()=>e.parsedValue),(e=>{if(o(e)&&2===e.length){const[t,l]=e;b.value=t,a.value=t,w.value=l,r(k(b),k(w))}else x()}),{immediate:!0}),{minDate:b,maxDate:w,rangeState:S,lang:g,ppNs:u,drpNs:d,handleChangeRange:e=>{S.value=e},handleRangeConfirm:(e=!1)=>{const t=k(b),a=k(w);ma([t,a])&&i("pick",[t,a],e)},handleShortcutClick:y,onSelect:e=>{S.value.selecting=e,e||(S.value.endDate=null)},t:h}},Ga=["onClick"],Za=["disabled"],Qa=["disabled"],Xa=["disabled"],Ja=["disabled"],el="month",tl=d({__name:"panel-date-range",props:Ka,emits:["pick","set-picker-option","calendar-change","panel-change"],setup(e,{emit:t}){const a=e,n=v("EP_PICKER_BASE"),{disabledDate:s,cellClassName:r,format:i,defaultTime:u,arrowControl:d,clearable:p}=n.props,f=J(n.props,"shortcuts"),h=J(n.props,"defaultValue"),{lang:y}=c(),b=m(l().locale(y.value)),w=m(l().locale(y.value).add(1,el)),{minDate:S,maxDate:V,rangeState:I,ppNs:A,drpNs:L,handleChangeRange:N,handleRangeConfirm:R,handleShortcutClick:E,onSelect:H,t:j}=qa(a,{defaultValue:h,leftDate:b,rightDate:w,unit:el,onParsedValueChanged:function(e,t){if(a.unlinkPanels&&t){const a=(null==e?void 0:e.year())||0,l=(null==e?void 0:e.month())||0,n=t.year(),o=t.month();w.value=a===n&&l===o?t.add(1,el):t}else w.value=b.value.add(1,el),t&&(w.value=w.value.hour(t.hour()).minute(t.minute()).second(t.second()))}}),K=m({min:null,max:null}),q=m({min:null,max:null}),G=g((()=>`${b.value.year()} ${j("el.datepicker.year")} ${j(`el.datepicker.month${b.value.month()+1}`)}`)),Z=g((()=>`${w.value.year()} ${j("el.datepicker.year")} ${j(`el.datepicker.month${w.value.month()+1}`)}`)),Q=g((()=>b.value.year())),X=g((()=>b.value.month())),ee=g((()=>w.value.year())),oe=g((()=>w.value.month())),se=g((()=>!!f.value.length)),re=g((()=>null!==K.value.min?K.value.min:S.value?S.value.format(pe.value):"")),ie=g((()=>null!==K.value.max?K.value.max:V.value||S.value?(V.value||S.value).format(pe.value):"")),ue=g((()=>null!==q.value.min?q.value.min:S.value?S.value.format(ce.value):"")),de=g((()=>null!==q.value.max?q.value.max:V.value||S.value?(V.value||S.value).format(ce.value):"")),ce=g((()=>kt(i))),pe=g((()=>bt(i))),ve=()=>{b.value=b.value.subtract(1,"year"),a.unlinkPanels||(w.value=b.value.add(1,"month")),we("year")},me=()=>{b.value=b.value.subtract(1,"month"),a.unlinkPanels||(w.value=b.value.add(1,"month")),we("month")},fe=()=>{a.unlinkPanels?w.value=w.value.add(1,"year"):(b.value=b.value.add(1,"year"),w.value=b.value.add(1,"month")),we("year")},he=()=>{a.unlinkPanels?w.value=w.value.add(1,"month"):(b.value=b.value.add(1,"month"),w.value=b.value.add(1,"month")),we("month")},ge=()=>{b.value=b.value.add(1,"year"),we("year")},ye=()=>{b.value=b.value.add(1,"month"),we("month")},be=()=>{w.value=w.value.subtract(1,"year"),we("year")},ke=()=>{w.value=w.value.subtract(1,"month"),we("month")},we=e=>{t("panel-change",[b.value.toDate(),w.value.toDate()],e)},Se=g((()=>{const e=(X.value+1)%12,t=X.value+1>=12?1:0;return a.unlinkPanels&&new Date(Q.value+t,e)<new Date(ee.value,oe.value)})),xe=g((()=>a.unlinkPanels&&12*ee.value+oe.value-(12*Q.value+X.value+1)>=12)),Me=g((()=>!(S.value&&V.value&&!I.value.selecting&&ma([S.value,V.value])))),Ce=g((()=>"datetime"===a.type||"datetimerange"===a.type)),De=(e,t)=>{if(e){if(u){return l(u[t]||u).locale(y.value).year(e.year()).month(e.month()).date(e.date())}return e}},Ve=(e,a=!0)=>{const l=e.minDate,n=e.maxDate,o=De(l,0),s=De(n,1);V.value===s&&S.value===o||(t("calendar-change",[l.toDate(),n&&n.toDate()]),V.value=s,S.value=o,a&&!Ce.value&&R())},Ie=m(!1),Oe=m(!1),Ae=()=>{Ie.value=!1},Te=()=>{Oe.value=!1},_e=(e,t)=>{K.value[t]=e;const n=l(e,pe.value).locale(y.value);if(n.isValid()){if(s&&s(n.toDate()))return;"min"===t?(b.value=n,S.value=(S.value||b.value).year(n.year()).month(n.month()).date(n.date()),a.unlinkPanels||(w.value=n.add(1,"month"),V.value=S.value.add(1,"month"))):(w.value=n,V.value=(V.value||w.value).year(n.year()).month(n.month()).date(n.date()),a.unlinkPanels||(b.value=n.subtract(1,"month"),S.value=V.value.subtract(1,"month")))}},Pe=(e,t)=>{K.value[t]=null},$e=(e,t)=>{q.value[t]=e;const a=l(e,ce.value).locale(y.value);a.isValid()&&("min"===t?(Ie.value=!0,S.value=(S.value||b.value).hour(a.hour()).minute(a.minute()).second(a.second()),V.value&&!V.value.isBefore(S.value)||(V.value=S.value)):(Oe.value=!0,V.value=(V.value||w.value).hour(a.hour()).minute(a.minute()).second(a.second()),w.value=V.value,V.value&&V.value.isBefore(S.value)&&(S.value=V.value)))},ze=(e,t)=>{q.value[t]=null,"min"===t?(b.value=S.value,Ie.value=!1):(w.value=V.value,Oe.value=!1)},Le=(e,t,a)=>{q.value.min||(e&&(b.value=e,S.value=(S.value||b.value).hour(e.hour()).minute(e.minute()).second(e.second())),a||(Ie.value=t),V.value&&!V.value.isBefore(S.value)||(V.value=S.value,w.value=e))},Ne=(e,t,a)=>{q.value.max||(e&&(w.value=e,V.value=(V.value||w.value).hour(e.hour()).minute(e.minute()).second(e.second())),a||(Oe.value=t),V.value&&V.value.isBefore(S.value)&&(S.value=V.value))},Re=()=>{b.value=fa(k(h),{lang:k(y),unit:"month",unlinkPanels:a.unlinkPanels})[0],w.value=b.value.add(1,"month"),t("pick",null)};return t("set-picker-option",["isValidValue",ma]),t("set-picker-option",["parseUserInput",e=>o(e)?e.map((e=>l(e,i).locale(y.value))):l(e,i).locale(y.value)]),t("set-picker-option",["formatToString",e=>o(e)?e.map((e=>e.format(i))):e.format(i)]),t("set-picker-option",["handleClear",Re]),(e,t)=>(x(),_("div",{class:D([k(A).b(),k(L).b(),{"has-sidebar":e.$slots.sidebar||k(se),"has-time":k(Ce)}])},[P("div",{class:D(k(A).e("body-wrapper"))},[$(e.$slots,"sidebar",{class:D(k(A).e("sidebar"))}),k(se)?(x(),_("div",{key:0,class:D(k(A).e("sidebar"))},[(x(!0),_(Y,null,B(k(f),((e,t)=>(x(),_("button",{key:t,type:"button",class:D(k(A).e("shortcut")),onClick:t=>k(E)(e)},z(e.text),11,Ga)))),128))],2)):T("v-if",!0),P("div",{class:D(k(A).e("body"))},[k(Ce)?(x(),_("div",{key:0,class:D(k(L).e("time-header"))},[P("span",{class:D(k(L).e("editors-wrap"))},[P("span",{class:D(k(L).e("time-picker-wrap"))},[W(k(Qe),{size:"small",disabled:k(I).selecting,placeholder:k(j)("el.datepicker.startDate"),class:D(k(L).e("editor")),"model-value":k(re),"validate-event":!1,onInput:t[0]||(t[0]=e=>_e(e,"min")),onChange:t[1]||(t[1]=e=>Pe(0,"min"))},null,8,["disabled","placeholder","class","model-value"])],2),F((x(),_("span",{class:D(k(L).e("time-picker-wrap"))},[W(k(Qe),{size:"small",class:D(k(L).e("editor")),disabled:k(I).selecting,placeholder:k(j)("el.datepicker.startTime"),"model-value":k(ue),"validate-event":!1,onFocus:t[2]||(t[2]=e=>Ie.value=!0),onInput:t[3]||(t[3]=e=>$e(e,"min")),onChange:t[4]||(t[4]=e=>ze(0,"min"))},null,8,["class","disabled","placeholder","model-value"]),W(k(Ut),{visible:Ie.value,format:k(ce),"datetime-role":"start","time-arrow-control":k(d),"parsed-value":b.value,onPick:Le},null,8,["visible","format","time-arrow-control","parsed-value"])],2)),[[k(He),Ae]])],2),P("span",null,[W(k(O),null,{default:C((()=>[W(k(le))])),_:1})]),P("span",{class:D([k(L).e("editors-wrap"),"is-right"])},[P("span",{class:D(k(L).e("time-picker-wrap"))},[W(k(Qe),{size:"small",class:D(k(L).e("editor")),disabled:k(I).selecting,placeholder:k(j)("el.datepicker.endDate"),"model-value":k(ie),readonly:!k(S),"validate-event":!1,onInput:t[5]||(t[5]=e=>_e(e,"max")),onChange:t[6]||(t[6]=e=>Pe(0,"max"))},null,8,["class","disabled","placeholder","model-value","readonly"])],2),F((x(),_("span",{class:D(k(L).e("time-picker-wrap"))},[W(k(Qe),{size:"small",class:D(k(L).e("editor")),disabled:k(I).selecting,placeholder:k(j)("el.datepicker.endTime"),"model-value":k(de),readonly:!k(S),"validate-event":!1,onFocus:t[7]||(t[7]=e=>k(S)&&(Oe.value=!0)),onInput:t[8]||(t[8]=e=>$e(e,"max")),onChange:t[9]||(t[9]=e=>ze(0,"max"))},null,8,["class","disabled","placeholder","model-value","readonly"]),W(k(Ut),{"datetime-role":"end",visible:Oe.value,format:k(ce),"time-arrow-control":k(d),"parsed-value":w.value,onPick:Ne},null,8,["visible","format","time-arrow-control","parsed-value"])],2)),[[k(He),Te]])],2)],2)):T("v-if",!0),P("div",{class:D([[k(A).e("content"),k(L).e("content")],"is-left"])},[P("div",{class:D(k(L).e("header"))},[P("button",{type:"button",class:D([k(A).e("icon-btn"),"d-arrow-left"]),onClick:ve},[W(k(O),null,{default:C((()=>[W(k(te))])),_:1})],2),P("button",{type:"button",class:D([k(A).e("icon-btn"),"arrow-left"]),onClick:me},[W(k(O),null,{default:C((()=>[W(k(ae))])),_:1})],2),e.unlinkPanels?(x(),_("button",{key:0,type:"button",disabled:!k(xe),class:D([[k(A).e("icon-btn"),{"is-disabled":!k(xe)}],"d-arrow-right"]),onClick:ge},[W(k(O),null,{default:C((()=>[W(k(ne))])),_:1})],10,Za)):T("v-if",!0),e.unlinkPanels?(x(),_("button",{key:1,type:"button",disabled:!k(Se),class:D([[k(A).e("icon-btn"),{"is-disabled":!k(Se)}],"arrow-right"]),onClick:ye},[W(k(O),null,{default:C((()=>[W(k(le))])),_:1})],10,Qa)):T("v-if",!0),P("div",null,z(k(G)),1)],2),W(xa,{"selection-mode":"range",date:b.value,"min-date":k(S),"max-date":k(V),"range-state":k(I),"disabled-date":k(s),"cell-class-name":k(r),onChangerange:k(N),onPick:Ve,onSelect:k(H)},null,8,["date","min-date","max-date","range-state","disabled-date","cell-class-name","onChangerange","onSelect"])],2),P("div",{class:D([[k(A).e("content"),k(L).e("content")],"is-right"])},[P("div",{class:D(k(L).e("header"))},[e.unlinkPanels?(x(),_("button",{key:0,type:"button",disabled:!k(xe),class:D([[k(A).e("icon-btn"),{"is-disabled":!k(xe)}],"d-arrow-left"]),onClick:be},[W(k(O),null,{default:C((()=>[W(k(te))])),_:1})],10,Xa)):T("v-if",!0),e.unlinkPanels?(x(),_("button",{key:1,type:"button",disabled:!k(Se),class:D([[k(A).e("icon-btn"),{"is-disabled":!k(Se)}],"arrow-left"]),onClick:ke},[W(k(O),null,{default:C((()=>[W(k(ae))])),_:1})],10,Ja)):T("v-if",!0),P("button",{type:"button",class:D([k(A).e("icon-btn"),"d-arrow-right"]),onClick:fe},[W(k(O),null,{default:C((()=>[W(k(ne))])),_:1})],2),P("button",{type:"button",class:D([k(A).e("icon-btn"),"arrow-right"]),onClick:he},[W(k(O),null,{default:C((()=>[W(k(le))])),_:1})],2),P("div",null,z(k(Z)),1)],2),W(xa,{"selection-mode":"range",date:w.value,"min-date":k(S),"max-date":k(V),"range-state":k(I),"disabled-date":k(s),"cell-class-name":k(r),onChangerange:k(N),onPick:Ve,onSelect:k(H)},null,8,["date","min-date","max-date","range-state","disabled-date","cell-class-name","onChangerange","onSelect"])],2)],2)],2),k(Ce)?(x(),_("div",{key:0,class:D(k(A).e("footer"))},[k(p)?(x(),M(k(Ee),{key:0,text:"",size:"small",class:D(k(A).e("link-btn")),onClick:Re},{default:C((()=>[U(z(k(j)("el.datepicker.clear")),1)])),_:1},8,["class"])):T("v-if",!0),W(k(Ee),{plain:"",size:"small",class:D(k(A).e("link-btn")),disabled:k(Me),onClick:t[10]||(t[10]=e=>k(R)(!1))},{default:C((()=>[U(z(k(j)("el.datepicker.confirm")),1)])),_:1},8,["class","disabled"])],2)):T("v-if",!0)],2))}});var al=N(tl,[["__file","/home/runner/work/element-plus/element-plus/packages/components/date-picker/src/date-picker-com/panel-date-range.vue"]]);const ll=s({...da}),nl=["onClick"],ol=["disabled"],sl=["disabled"],rl="year",il=d({name:"DatePickerMonthRange"}),ul=d({...il,props:ll,emits:["pick","set-picker-option"],setup(e,{emit:t}){const a=e,{lang:n}=c(),o=v("EP_PICKER_BASE"),{shortcuts:s,disabledDate:r,format:i}=o.props,u=J(o.props,"defaultValue"),d=m(l().locale(n.value)),p=m(l().locale(n.value).add(1,rl)),{minDate:f,maxDate:h,rangeState:y,ppNs:b,drpNs:w,handleChangeRange:S,handleRangeConfirm:M,handleShortcutClick:V,onSelect:I}=qa(a,{defaultValue:u,leftDate:d,rightDate:p,unit:rl,onParsedValueChanged:function(e,t){if(a.unlinkPanels&&t){const a=(null==e?void 0:e.year())||0,l=t.year();p.value=a===l?t.add(1,rl):t}else p.value=d.value.add(1,rl)}}),A=g((()=>!!s.length)),{leftPrevYear:L,rightNextYear:N,leftNextYear:R,rightPrevYear:E,leftLabel:U,rightLabel:F,leftYear:H,rightYear:j}=(({unlinkPanels:e,leftDate:t,rightDate:a})=>{const{t:l}=c();return{leftPrevYear:()=>{t.value=t.value.subtract(1,"year"),e.value||(a.value=a.value.subtract(1,"year"))},rightNextYear:()=>{e.value||(t.value=t.value.add(1,"year")),a.value=a.value.add(1,"year")},leftNextYear:()=>{t.value=t.value.add(1,"year")},rightPrevYear:()=>{a.value=a.value.subtract(1,"year")},leftLabel:g((()=>`${t.value.year()} ${l("el.datepicker.year")}`)),rightLabel:g((()=>`${a.value.year()} ${l("el.datepicker.year")}`)),leftYear:g((()=>t.value.year())),rightYear:g((()=>a.value.year()===t.value.year()?t.value.year()+1:a.value.year()))}})({unlinkPanels:J(a,"unlinkPanels"),leftDate:d,rightDate:p}),K=g((()=>a.unlinkPanels&&j.value>H.value+1)),q=(e,t=!0)=>{const a=e.minDate,l=e.maxDate;h.value===l&&f.value===a||(h.value=l,f.value=a,t&&M())};return t("set-picker-option",["formatToString",e=>e.map((e=>e.format(i)))]),(e,t)=>(x(),_("div",{class:D([k(b).b(),k(w).b(),{"has-sidebar":Boolean(e.$slots.sidebar)||k(A)}])},[P("div",{class:D(k(b).e("body-wrapper"))},[$(e.$slots,"sidebar",{class:D(k(b).e("sidebar"))}),k(A)?(x(),_("div",{key:0,class:D(k(b).e("sidebar"))},[(x(!0),_(Y,null,B(k(s),((e,t)=>(x(),_("button",{key:t,type:"button",class:D(k(b).e("shortcut")),onClick:t=>k(V)(e)},z(e.text),11,nl)))),128))],2)):T("v-if",!0),P("div",{class:D(k(b).e("body"))},[P("div",{class:D([[k(b).e("content"),k(w).e("content")],"is-left"])},[P("div",{class:D(k(w).e("header"))},[P("button",{type:"button",class:D([k(b).e("icon-btn"),"d-arrow-left"]),onClick:t[0]||(t[0]=(...e)=>k(L)&&k(L)(...e))},[W(k(O),null,{default:C((()=>[W(k(te))])),_:1})],2),e.unlinkPanels?(x(),_("button",{key:0,type:"button",disabled:!k(K),class:D([[k(b).e("icon-btn"),{[k(b).is("disabled")]:!k(K)}],"d-arrow-right"]),onClick:t[1]||(t[1]=(...e)=>k(R)&&k(R)(...e))},[W(k(O),null,{default:C((()=>[W(k(ne))])),_:1})],10,ol)):T("v-if",!0),P("div",null,z(k(U)),1)],2),W(Oa,{"selection-mode":"range",date:d.value,"min-date":k(f),"max-date":k(h),"range-state":k(y),"disabled-date":k(r),onChangerange:k(S),onPick:q,onSelect:k(I)},null,8,["date","min-date","max-date","range-state","disabled-date","onChangerange","onSelect"])],2),P("div",{class:D([[k(b).e("content"),k(w).e("content")],"is-right"])},[P("div",{class:D(k(w).e("header"))},[e.unlinkPanels?(x(),_("button",{key:0,type:"button",disabled:!k(K),class:D([[k(b).e("icon-btn"),{"is-disabled":!k(K)}],"d-arrow-left"]),onClick:t[2]||(t[2]=(...e)=>k(E)&&k(E)(...e))},[W(k(O),null,{default:C((()=>[W(k(te))])),_:1})],10,sl)):T("v-if",!0),P("button",{type:"button",class:D([k(b).e("icon-btn"),"d-arrow-right"]),onClick:t[3]||(t[3]=(...e)=>k(N)&&k(N)(...e))},[W(k(O),null,{default:C((()=>[W(k(ne))])),_:1})],2),P("div",null,z(k(F)),1)],2),W(Oa,{"selection-mode":"range",date:p.value,"min-date":k(f),"max-date":k(h),"range-state":k(y),"disabled-date":k(r),onChangerange:k(S),onPick:q,onSelect:k(I)},null,8,["date","min-date","max-date","range-state","disabled-date","onChangerange","onSelect"])],2)],2)],2)],2))}});var dl=N(ul,[["__file","/home/runner/work/element-plus/element-plus/packages/components/date-picker/src/date-picker-com/panel-month-range.vue"]]);l.extend(Wt),l.extend(jt),l.extend(pt),l.extend(Zt),l.extend(Xt),l.extend(ea),l.extend(aa),l.extend(na);const cl=d({name:"ElDatePicker",install:null,props:{...It,...sa},emits:["update:modelValue"],setup(e,{expose:t,emit:a,slots:l}){const n=p("picker-panel");S("ElPopperOptions",re(J(e,"popperOptions"))),S(oa,{slots:l,pickerNs:n});const o=m();t({focus:(e=!0)=>{var t;null==(t=o.value)||t.focus(e)},handleOpen:()=>{var e;null==(e=o.value)||e.handleOpen()},handleClose:()=>{var e;null==(e=o.value)||e.handleClose()}});const s=e=>{a("update:modelValue",e)};return()=>{var t;const a=null!=(t=e.format)?t:ht[e.type]||ft,n=function(e){switch(e){case"daterange":case"datetimerange":return al;case"monthrange":return dl;default:return ja}}(e.type);return W(Pt,L(e,{format:a,type:e.type,ref:o,"onUpdate:modelValue":s}),{default:e=>W(n,e,null),"range-separator":l["range-separator"]})}}});cl.install=e=>{e.component(cl.name,cl)};const pl=cl;var vl=Number.isNaN||function(e){return"number"==typeof e&&e!=e};function ml(e,t){if(e.length!==t.length)return!1;for(var a=0;a<e.length;a++)if(l=e[a],n=t[a],!(l===n||vl(l)&&vl(n)))return!1;var l,n;return!0}const fl=()=>{const e=se().proxy.$props;return g((()=>{const t=(e,t,a)=>({});return e.perfMode?ie(t):function(e,t){void 0===t&&(t=ml);var a=null;function l(){for(var l=[],n=0;n<arguments.length;n++)l[n]=arguments[n];if(a&&a.lastThis===this&&t(l,a.lastArgs))return a.lastResult;var o=e.apply(this,l);return a={lastResult:o,lastArgs:l,lastThis:this},o}return l.clear=function(){a=null},l}(t)}))},hl="itemRendered",gl="scroll",yl="forward",bl="backward",kl="auto",wl="smart",Sl="start",xl="center",Ml="horizontal",Cl="vertical",Dl="rtl",Vl="negative",Il="positive-ascending",Ol="positive-descending",Al={[Ml]:"left",[Cl]:"top"},Tl={[Ml]:"deltaX",[Cl]:"deltaY"},_l=ue({type:r([Number,Function]),required:!0}),Pl=ue({type:Number}),$l=ue({type:Number,default:2}),zl=ue({type:String,values:["ltr","rtl"],default:"ltr"}),Ll=ue({type:Number,default:0}),Nl=ue({type:Number,required:!0}),Rl=ue({type:String,values:["horizontal","vertical"],default:Cl}),El=s({className:{type:String,default:""},containerElement:{type:r([String,Object]),default:"div"},data:{type:r(Array),default:()=>de([])},direction:zl,height:{type:[String,Number],required:!0},innerElement:{type:[String,Object],default:"div"},style:{type:r([Object,String,Array])},useIsScrolling:{type:Boolean,default:!1},width:{type:[Number,String],required:!1},perfMode:{type:Boolean,default:!0},scrollbarAlwaysOn:{type:Boolean,default:!1}}),Yl=s({cache:$l,estimatedItemSize:Pl,layout:Rl,initScrollOffset:Ll,total:Nl,itemSize:_l,...El}),Bl={type:Number,default:6},Ul={type:Number,default:0},Fl={type:Number,default:2};s({columnCache:$l,columnWidth:_l,estimatedColumnWidth:Pl,estimatedRowHeight:Pl,initScrollLeft:Ll,initScrollTop:Ll,itemKey:{type:r(Function),default:({columnIndex:e,rowIndex:t})=>`${t}:${e}`},rowCache:$l,rowHeight:_l,totalColumn:Nl,totalRow:Nl,hScrollbarSize:Bl,vScrollbarSize:Bl,scrollbarStartGap:Ul,scrollbarEndGap:Fl,role:String,...El});const Wl=s({alwaysOn:Boolean,class:String,layout:Rl,total:Nl,ratio:{type:Number,required:!0},clientSize:{type:Number,required:!0},scrollFrom:{type:Number,required:!0},scrollbarSize:Bl,startGap:Ul,endGap:Fl,visible:Boolean}),Hl=(e,t)=>e<t?yl:bl,jl=e=>"ltr"===e||e===Dl||e===Ml;let Kl=null;function ql(e=!1){if(null===Kl||e){const e=document.createElement("div"),t=e.style;t.width="50px",t.height="50px",t.overflow="scroll",t.direction="rtl";const a=document.createElement("div"),l=a.style;return l.width="100px",l.height="100px",e.appendChild(a),document.body.appendChild(e),e.scrollLeft>0?Kl=Ol:(e.scrollLeft=1,Kl=0===e.scrollLeft?Vl:Il),document.body.removeChild(e),Kl}return Kl}const Gl=d({name:"ElVirtualScrollBar",props:Wl,emits:["scroll","start-move","stop-move"],setup(e,{emit:t}){const a=g((()=>e.startGap+e.endGap)),l=p("virtual-scrollbar"),n=p("scrollbar"),o=m(),s=m();let r=null,i=null;const u=re({isDragging:!1,traveled:0}),d=g((()=>_e[e.layout])),c=g((()=>e.clientSize-k(a))),v=g((()=>({position:"absolute",width:`${Ml===e.layout?c.value:e.scrollbarSize}px`,height:`${Ml===e.layout?e.scrollbarSize:c.value}px`,[Al[e.layout]]:"2px",right:"2px",bottom:"2px",borderRadius:"4px"}))),h=g((()=>{const t=e.ratio,a=e.clientSize;if(t>=100)return Number.POSITIVE_INFINITY;if(t>=50)return t*a/100;const l=a/3;return Math.floor(Math.min(Math.max(t*a,20),l))})),y=g((()=>{if(!Number.isFinite(h.value))return{display:"none"};const t=`${h.value}px`,a=function({move:e,size:t,bar:a},l){const n={},o=`translate${a.axis}(${e}px)`;return n[a.size]=t,n.transform=o,n.msTransform=o,n.webkitTransform=o,"horizontal"===l?n.height="100%":n.width="100%",n}({bar:d.value,size:t,move:u.traveled},e.layout);return a})),b=g((()=>Math.floor(e.clientSize-h.value-k(a)))),w=()=>{window.removeEventListener("mousemove",M),window.removeEventListener("mouseup",x),document.onselectstart=i,i=null;const e=k(s);e&&(e.removeEventListener("touchmove",M),e.removeEventListener("touchend",x))},S=e=>{e.stopImmediatePropagation(),e.ctrlKey||[1,2].includes(e.button)||(u.isDragging=!0,u[d.value.axis]=e.currentTarget[d.value.offset]-(e[d.value.client]-e.currentTarget.getBoundingClientRect()[d.value.direction]),t("start-move"),(()=>{window.addEventListener("mousemove",M),window.addEventListener("mouseup",x);const e=k(s);e&&(i=document.onselectstart,document.onselectstart=()=>!1,e.addEventListener("touchmove",M),e.addEventListener("touchend",x))})())},x=()=>{u.isDragging=!1,u[d.value.axis]=0,t("stop-move"),w()},M=a=>{const{isDragging:l}=u;if(!l)return;if(!s.value||!o.value)return;const n=u[d.value.axis];if(!n)return;dt(r);const i=-1*(o.value.getBoundingClientRect()[d.value.direction]-a[d.value.client])-(s.value[d.value.offset]-n);r=ut((()=>{u.traveled=Math.max(e.startGap,Math.min(i,b.value)),t("scroll",i,b.value)}))},C=e=>{const a=Math.abs(e.target.getBoundingClientRect()[d.value.direction]-e[d.value.client])-s.value[d.value.offset]/2;u.traveled=Math.max(0,Math.min(a,b.value)),t("scroll",a,b.value)};return f((()=>e.scrollFrom),(e=>{u.isDragging||(u.traveled=Math.ceil(e*b.value))})),ce((()=>{w()})),()=>pe("div",{role:"presentation",ref:o,class:[l.b(),e.class,(e.alwaysOn||u.isDragging)&&"always-on"],style:v.value,onMousedown:I(C,["stop","prevent"]),onTouchstartPrevent:S},pe("div",{ref:s,class:n.e("thumb"),style:y.value,onMousedown:S},[]))}}),Zl=({name:t,getOffset:a,getItemSize:l,getItemOffset:n,getEstimatedTotalSize:o,getStartIndexForOffset:s,getStopIndexForStartIndex:r,initCache:i,clearCache:u,validateProps:c})=>d({name:null!=t?t:"ElVirtualList",props:Yl,emits:[hl,gl],setup(t,{emit:d,expose:v}){c(t);const f=se(),y=p("vl"),b=m(i(t,f)),w=fl(),S=m(),x=m(),M=m(),C=m({isScrolling:!1,scrollDir:"forward",scrollOffset:ve(t.initScrollOffset)?t.initScrollOffset:0,updateRequested:!1,isScrollbarDragging:!1,scrollbarAlwaysOn:t.scrollbarAlwaysOn}),D=g((()=>{const{total:e,cache:a}=t,{isScrolling:l,scrollDir:n,scrollOffset:o}=k(C);if(0===e)return[0,0,0,0];const i=s(t,o,k(b)),u=r(t,i,o,k(b)),d=l&&n!==bl?1:Math.max(1,a),c=l&&n!==yl?1:Math.max(1,a);return[Math.max(0,i-d),Math.max(0,Math.min(e-1,u+c)),i,u]})),V=g((()=>o(t,k(b)))),I=g((()=>jl(t.layout))),O=g((()=>[{position:"relative",["overflow-"+(I.value?"x":"y")]:"scroll",WebkitOverflowScrolling:"touch",willChange:"transform"},{direction:t.direction,height:ve(t.height)?`${t.height}px`:t.height,width:ve(t.width)?`${t.width}px`:t.width},t.style])),A=g((()=>{const e=k(V),t=k(I);return{height:t?"100%":`${e}px`,pointerEvents:k(C).isScrolling?"none":void 0,width:t?`${e}px`:"100%"}})),T=g((()=>I.value?t.width:t.height)),{onWheel:_}=(({atEndEdge:e,atStartEdge:t,layout:a},l)=>{let n,o=0;const s=a=>a<0&&t.value||a>0&&e.value;return{hasReachedEdge:s,onWheel:e=>{dt(n);const t=e[Tl[a.value]];s(o)&&s(o+t)||(o+=t,Xe()||e.preventDefault(),n=ut((()=>{l(o),o=0})))}}})({atStartEdge:g((()=>C.value.scrollOffset<=0)),atEndEdge:g((()=>C.value.scrollOffset>=V.value)),layout:g((()=>t.layout))},(e=>{var t,a;null==(a=(t=M.value).onMouseUp)||a.call(t),$(Math.min(C.value.scrollOffset+e,V.value-T.value))})),P=()=>{const{total:e}=t;if(e>0){const[e,t,a,l]=k(D);d(hl,e,t,a,l)}const{scrollDir:a,scrollOffset:l,updateRequested:n}=k(C);d(gl,a,l,n)},$=e=>{(e=Math.max(e,0))!==k(C).scrollOffset&&(C.value={...k(C),scrollOffset:e,scrollDir:Hl(k(C).scrollOffset,e),updateRequested:!0},h(L))},z=(e,l=kl)=>{const{scrollOffset:n}=k(C);e=Math.max(0,Math.min(e,t.total-1)),$(a(t,e,l,n,k(b)))},L=()=>{C.value.isScrolling=!1,h((()=>{w.value(-1,null,null)}))},N=()=>{const e=S.value;e&&(e.scrollTop=0)};E((()=>{if(!e)return;const{initScrollOffset:a}=t,l=k(S);ve(a)&&l&&(k(I)?l.scrollLeft=a:l.scrollTop=a),P()})),me((()=>{const{direction:e,layout:a}=t,{scrollOffset:l,updateRequested:n}=k(C),o=k(S);if(n&&o)if(a===Ml)if(e===Dl)switch(ql()){case Vl:o.scrollLeft=-l;break;case Il:o.scrollLeft=l;break;default:{const{clientWidth:e,scrollWidth:t}=o;o.scrollLeft=t-e-l;break}}else o.scrollLeft=l;else o.scrollTop=l}));const R={ns:y,clientSize:T,estimatedTotalSize:V,windowStyle:O,windowRef:S,innerRef:x,innerStyle:A,itemsToRender:D,scrollbarRef:M,states:C,getItemStyle:e=>{const{direction:a,itemSize:o,layout:s}=t,r=w.value(u&&o,u&&s,u&&a);let i;if(he(r,String(e)))i=r[e];else{const o=n(t,e,k(b)),s=l(t,e,k(b)),u=k(I),d=a===Dl,c=u?o:0;r[e]=i={position:"absolute",left:d?void 0:`${c}px`,right:d?`${c}px`:void 0,top:u?0:`${o}px`,height:u?"100%":`${s}px`,width:u?`${s}px`:"100%"}}return i},onScroll:e=>{k(I)?(e=>{const{clientWidth:a,scrollLeft:l,scrollWidth:n}=e.currentTarget,o=k(C);if(o.scrollOffset===l)return;const{direction:s}=t;let r=l;if(s===Dl)switch(ql()){case Vl:r=-l;break;case Ol:r=n-a-l}r=Math.max(0,Math.min(r,n-a)),C.value={...o,isScrolling:!0,scrollDir:Hl(o.scrollOffset,r),scrollOffset:r,updateRequested:!1},h(L)})(e):(e=>{const{clientHeight:t,scrollHeight:a,scrollTop:l}=e.currentTarget,n=k(C);if(n.scrollOffset===l)return;const o=Math.max(0,Math.min(l,a-t));C.value={...n,isScrolling:!0,scrollDir:Hl(n.scrollOffset,o),scrollOffset:o,updateRequested:!1},h(L)})(e),P()},onScrollbarScroll:(e,t)=>{const a=(V.value-T.value)/t*e;$(Math.min(V.value-T.value,a))},onWheel:_,scrollTo:$,scrollToItem:z,resetScrollTop:N};return v({windowRef:S,innerRef:x,getItemStyleCache:w,scrollTo:$,scrollToItem:z,resetScrollTop:N,states:C}),R},render(e){var t;const{$slots:a,className:l,clientSize:n,containerElement:o,data:s,getItemStyle:r,innerElement:i,itemsToRender:u,innerStyle:d,layout:c,total:p,onScroll:v,onScrollbarScroll:m,onWheel:f,states:h,useIsScrolling:g,windowStyle:y,ns:b}=e,[k,w]=u,S=A(o),x=A(i),M=[];if(p>0)for(let I=k;I<=w;I++)M.push(null==(t=a.default)?void 0:t.call(a,{data:s,key:I,index:I,isScrolling:g?h.isScrolling:void 0,style:r(I)}));const C=[pe(x,{style:d,ref:"innerRef"},fe(x)?M:{default:()=>M})],D=pe(Gl,{ref:"scrollbarRef",clientSize:n,layout:c,onScroll:m,ratio:100*n/this.estimatedTotalSize,scrollFrom:h.scrollOffset/(this.estimatedTotalSize-n),total:p}),V=pe(S,{class:[b.e("window"),l],style:y,onScroll:v,onWheel:f,ref:"windowRef",key:0},fe(S)?[C]:{default:()=>[C]});return pe("div",{key:0,class:[b.e("wrapper"),h.scrollbarAlwaysOn?"always-on":""]},[V,D])}}),Ql=Zl({name:"ElFixedSizeList",getItemOffset:({itemSize:e},t)=>t*e,getItemSize:({itemSize:e})=>e,getEstimatedTotalSize:({total:e,itemSize:t})=>t*e,getOffset:({height:e,total:t,itemSize:a,layout:l,width:n},o,s,r)=>{const i=jl(l)?n:e,u=Math.max(0,t*a-i),d=Math.min(u,o*a),c=Math.max(0,(o+1)*a-i);switch(s===wl&&(s=r>=c-i&&r<=d+i?kl:xl),s){case Sl:return d;case"end":return c;case xl:{const e=Math.round(c+(d-c)/2);return e<Math.ceil(i/2)?0:e>u+Math.floor(i/2)?u:e}default:return r>=c&&r<=d?r:r<c?c:d}},getStartIndexForOffset:({total:e,itemSize:t},a)=>Math.max(0,Math.min(e-1,Math.floor(a/t))),getStopIndexForStartIndex:({height:e,total:t,itemSize:a,layout:l,width:n},o,s)=>{const r=o*a,i=jl(l)?n:e,u=Math.ceil((i+s-r)/a);return Math.max(0,Math.min(t-1,o+u-1))},initCache(){},clearCache:!0,validateProps(){}}),Xl=(e,t,a)=>{const{itemSize:l}=e,{items:n,lastVisitedIndex:o}=a;if(t>o){let e=0;if(o>=0){const t=n[o];e=t.offset+t.size}for(let a=o+1;a<=t;a++){const t=l(a);n[a]={offset:e,size:t},e+=t}a.lastVisitedIndex=t}return n[t]},Jl=(e,t,a,l,n)=>{for(;a<=l;){const o=a+Math.floor((l-a)/2),s=Xl(e,o,t).offset;if(s===n)return o;s<n?a=o+1:s>n&&(l=o-1)}return Math.max(0,a-1)},en=(e,t,a,l)=>{const{total:n}=e;let o=1;for(;a<n&&Xl(e,a,t).offset<l;)a+=o,o*=2;return Jl(e,t,Math.floor(a/2),Math.min(a,n-1),l)},tn=({total:e},{items:t,estimatedItemSize:a,lastVisitedIndex:l})=>{let n=0;if(l>=e&&(l=e-1),l>=0){const e=t[l];n=e.offset+e.size}return n+(e-l-1)*a},an=Zl({name:"ElDynamicSizeList",getItemOffset:(e,t,a)=>Xl(e,t,a).offset,getItemSize:(e,t,{items:a})=>a[t].size,getEstimatedTotalSize:tn,getOffset:(e,t,a,l,n)=>{const{height:o,layout:s,width:r}=e,i=jl(s)?r:o,u=Xl(e,t,n),d=tn(e,n),c=Math.max(0,Math.min(d-i,u.offset)),p=Math.max(0,u.offset-i+u.size);switch(a===wl&&(a=l>=p-i&&l<=c+i?kl:xl),a){case Sl:return c;case"end":return p;case xl:return Math.round(p+(c-p)/2);default:return l>=p&&l<=c?l:l<p?p:c}},getStartIndexForOffset:(e,t,a)=>((e,t,a)=>{const{items:l,lastVisitedIndex:n}=t;return(n>0?l[n].offset:0)>=a?Jl(e,t,0,n,a):en(e,t,Math.max(0,n),a)})(e,a,t),getStopIndexForStartIndex:(e,t,a,l)=>{const{height:n,total:o,layout:s,width:r}=e,i=jl(s)?r:n,u=Xl(e,t,l),d=a+i;let c=u.offset+u.size,p=t;for(;p<o-1&&c<d;)p++,c+=Xl(e,p,l).size;return p},initCache({estimatedItemSize:e=50},t){const a={items:{},estimatedItemSize:e,lastVisitedIndex:-1,clearCacheAfterIndex:(e,l=!0)=>{var n,o;a.lastVisitedIndex=Math.min(a.lastVisitedIndex,e-1),null==(n=t.exposed)||n.getItemStyleCache(-1),l&&(null==(o=t.proxy)||o.$forceUpdate())}};return a},clearCache:!1,validateProps:({itemSize:e})=>{}});var ln=N(d({props:{item:{type:Object,required:!0},style:Object,height:Number},setup:()=>({ns:p("select")})}),[["render",function(e,t,a,l,n,o){return e.item.isTitle?(x(),_("div",{key:0,class:D(e.ns.be("group","title")),style:V([e.style,{lineHeight:`${e.height}px`}])},z(e.item.label),7)):(x(),_("div",{key:1,class:D(e.ns.be("group","split")),style:V(e.style)},[P("span",{class:D(e.ns.be("group","split-dash")),style:V({top:e.height/2+"px"})},null,6)],6))}],["__file","/home/runner/work/element-plus/element-plus/packages/components/select-v2/src/group-item.vue"]]);const nn={allowCreate:Boolean,autocomplete:{type:String,default:"none"},automaticDropdown:Boolean,clearable:Boolean,clearIcon:{type:[String,Object],default:i},effect:{type:String,default:"light"},collapseTags:Boolean,collapseTagsTooltip:{type:Boolean,default:!1},maxCollapseTags:{type:Number,default:1},defaultFirstOption:Boolean,disabled:Boolean,estimatedOptionHeight:{type:Number,default:void 0},filterable:Boolean,filterMethod:Function,height:{type:Number,default:170},itemHeight:{type:Number,default:34},id:String,loading:Boolean,loadingText:String,label:String,modelValue:[Array,String,Number,Boolean,Object],multiple:Boolean,multipleLimit:{type:Number,default:0},name:String,noDataText:String,noMatchText:String,remoteMethod:Function,reserveKeyword:{type:Boolean,default:!0},options:{type:Array,required:!0},placeholder:{type:String},teleported:Ue.teleported,persistent:{type:Boolean,default:!0},popperClass:{type:String,default:""},popperOptions:{type:Object,default:()=>({})},remote:Boolean,size:{type:String,validator:Ze},valueKey:{type:String,default:"value"},scrollbarAlwaysOn:{type:Boolean,default:!1},validateEvent:{type:Boolean,default:!0},placement:{type:r(String),values:Fe,default:"bottom-start"}},on={data:Array,disabled:Boolean,hovering:Boolean,item:Object,index:Number,style:Object,selected:Boolean,created:Boolean},sn=d({props:on,emits:["select","hover"],setup(e,{emit:t}){const a=p("select"),{hoverItem:l,selectOptionClick:n}=function(e,{emit:t}){return{hoverItem:()=>{e.disabled||t("hover",e.index)},selectOptionClick:()=>{e.disabled||t("select",e.item,e.index)}}}(e,{emit:t});return{ns:a,hoverItem:l,selectOptionClick:n}}}),rn=["aria-selected"];var un=N(sn,[["render",function(e,t,a,l,n,o){return x(),_("li",{"aria-selected":e.selected,style:V(e.style),class:D([e.ns.be("dropdown","option-item"),e.ns.is("selected",e.selected),e.ns.is("disabled",e.disabled),e.ns.is("created",e.created),{hover:e.hovering}]),onMouseenter:t[0]||(t[0]=(...t)=>e.hoverItem&&e.hoverItem(...t)),onClick:t[1]||(t[1]=I(((...t)=>e.selectOptionClick&&e.selectOptionClick(...t)),["stop"]))},[$(e.$slots,"default",{item:e.item,index:e.index,disabled:e.disabled},(()=>[P("span",null,z(e.item.label),1)]))],46,rn)}],["__file","/home/runner/work/element-plus/element-plus/packages/components/select-v2/src/option-item.vue"]]);const dn=Symbol("ElSelectV2Injection");var cn=d({name:"ElSelectDropdown",props:{data:{type:Array,required:!0},hoveringIndex:Number,width:Number},setup(e,{slots:t,expose:a}){const l=v(dn),n=p("select"),o=m([]),s=m(),r=g((()=>e.data.length));f((()=>r.value),(()=>{var e,t;null==(t=(e=l.popper.value).updatePopper)||t.call(e)}));const i=g((()=>K(l.props.estimatedOptionHeight))),u=g((()=>i.value?{itemSize:l.props.itemHeight}:{estimatedSize:l.props.estimatedOptionHeight,itemSize:e=>o.value[e]})),d=(e,t)=>{const{valueKey:a}=l.props;return l.props.multiple?((e=[],t)=>{const{props:{valueKey:a}}=l;return ye(t)?e&&e.some((e=>ge(e,a)===ge(t,a))):e.includes(t)})(e,ge(t,a)):((e,t)=>{if(ye(t)){const{valueKey:a}=l.props;return ge(e,a)===ge(t,a)}return e===t})(e,ge(t,a))},c=(e,t)=>{const{disabled:a,multiple:n,multipleLimit:o}=l.props;return a||!t&&!!n&&o>0&&e.length>=o},h=t=>e.hoveringIndex===t;a({listRef:s,isSized:i,isItemDisabled:c,isItemHovering:h,isItemSelected:d,scrollToItem:e=>{const t=s.value;t&&t.scrollToItem(e)},resetScrollTop:()=>{const e=s.value;e&&e.resetScrollTop()}});const y=e=>{const{index:a,data:n,style:o}=e,s=k(i),{itemSize:r,estimatedSize:p}=k(u),{modelValue:v}=l.props,{onSelect:m,onHover:f}=l,g=n[a];if("Group"===g.type)return W(ln,{item:g,style:o,height:s?r:p},null);const y=d(v,g),b=c(v,y),w=h(a);return W(un,L(e,{selected:y,disabled:g.disabled||b,created:!!g.created,hovering:w,item:g,onSelect:m,onHover:f}),{default:e=>{var a;return(null==(a=t.default)?void 0:a.call(t,e))||W("span",null,[g.label])}})},{onKeyboardNavigate:b,onKeyboardSelect:w}=l,S=e=>{const{code:t}=e,{tab:a,esc:n,down:o,up:s,enter:r}=R;switch(t!==a&&(e.preventDefault(),e.stopPropagation()),t){case a:case n:l.expanded=!1;break;case o:b("forward");break;case s:b("backward");break;case r:w()}};return()=>{var a;const{data:o,width:r}=e,{height:d,multiple:c,scrollbarAlwaysOn:p}=l.props;if(0===o.length)return W("div",{class:n.b("dropdown"),style:{width:`${r}px`}},[null==(a=t.empty)?void 0:a.call(t)]);const v=k(i)?Ql:an;return W("div",{class:[n.b("dropdown"),n.is("multiple",c)]},[W(v,L({ref:s},k(u),{className:n.be("dropdown","list"),scrollbarAlwaysOn:p,data:o,height:d,width:r,total:o.length,onKeydown:S}),{default:e=>W(y,e,null)})])}}});function pn(e,t){const a=m(0),l=m(null),n=g((()=>e.allowCreate&&e.filterable));return{createNewOption:function(o){if(n.value)if(o&&o.length>0&&!function(a){const l=e=>e.value===a;return e.options&&e.options.some(l)||t.createdOptions.some(l)}(o)){const e={value:o,label:o,created:!0,disabled:!1};t.createdOptions.length>=a.value?t.createdOptions[a.value]=e:t.createdOptions.push(e)}else if(e.multiple)t.createdOptions.length=a.value;else{const e=l.value;t.createdOptions.length=0,e&&e.created&&t.createdOptions.push(e)}},removeNewOption:function(l){if(!n.value||!l||!l.created||l.created&&e.reserveKeyword&&t.inputValue===l.label)return;const o=t.createdOptions.findIndex((e=>e.value===l.value));~o&&(t.createdOptions.splice(o,1),a.value--)},selectNewOption:function(t){n.value&&(e.multiple&&t.created?a.value++:l.value=t)},clearAllNewOption:function(){n.value&&(t.createdOptions.length=0,a.value=0)}}}const vn={larget:51,default:42,small:33},mn=(e,t)=>{const{t:a}=c(),l=p("select-v2"),n=p("input"),{form:s,formItem:r}=Ne(),i=re({inputValue:"",displayInputValue:"",calculatedWidth:0,cachedPlaceholder:"",cachedOptions:[],createdOptions:[],createdLabel:"",createdSelected:!1,currentPlaceholder:"",hoveringIndex:-1,comboBoxHovering:!1,isOnComposition:!1,isSilentBlur:!1,isComposing:!1,inputLength:20,selectWidth:200,initialInputHeight:0,previousQuery:null,previousValue:void 0,query:"",selectedLabel:"",softFocus:!1,tagInMultiLine:!1}),u=m(-1),d=m(-1),v=m(null),y=m(null),b=m(null),k=m(null),w=m(null),S=m(null),x=m(null),M=m(!1),C=g((()=>e.disabled||(null==s?void 0:s.disabled))),D=g((()=>{const t=34*z.value.length;return t>e.height?e.height:t})),V=g((()=>!at(e.modelValue))),I=g((()=>{const t=e.multiple?Array.isArray(e.modelValue)&&e.modelValue.length>0:V.value;return e.clearable&&!C.value&&i.comboBoxHovering&&t})),O=g((()=>e.remote&&e.filterable?"":H)),A=g((()=>O.value&&l.is("reverse",M.value))),T=g((()=>(null==r?void 0:r.validateState)||"")),_=g((()=>be[T.value])),P=g((()=>e.remote?300:0)),$=g((()=>{const t=z.value;return e.loading?e.loadingText||a("el.select.loading"):(!e.remote||""!==i.inputValue||0!==t.length)&&(e.filterable&&i.inputValue&&t.length>0?e.noMatchText||a("el.select.noMatch"):0===t.length?e.noDataText||a("el.select.noData"):null)})),z=g((()=>{const t=e=>{const t=i.inputValue,a=new RegExp(et(t),"i");return!t||a.test(e.label||"")};return e.loading?[]:(e=>{const t=[];return e.forEach((e=>{o(e.options)?(t.push({label:e.label,isTitle:!0,type:"Group"}),e.options.forEach((e=>{t.push(e)})),t.push({type:"Group"})):t.push(e)})),t})(e.options.concat(i.createdOptions).map((a=>{if(o(a.options)){const e=a.options.filter(t);if(e.length>0)return{...a,options:e}}else if(e.remote||t(a))return a;return null})).filter((e=>null!==e)))})),L=g((()=>z.value.every((e=>e.disabled)))),N=Re(),R=g((()=>"small"===N.value?"small":"default")),Y=g((()=>{const e=S.value,t=R.value||"default",a=e?Number.parseInt(getComputedStyle(e).paddingLeft):0,l=e?Number.parseInt(getComputedStyle(e).paddingRight):0;return i.selectWidth-l-a-vn[t]})),B=()=>{var e;d.value=(null==(e=w.value)?void 0:e.offsetWidth)||200},U=g((()=>({width:`${0===i.calculatedWidth?11:Math.ceil(i.calculatedWidth)+11}px`}))),F=g((()=>o(e.modelValue)?0===e.modelValue.length&&!i.displayInputValue:!e.filterable||0===i.displayInputValue.length)),W=g((()=>{const t=e.placeholder||a("el.select.placeholder");return e.multiple||at(e.modelValue)?t:i.selectedLabel})),j=g((()=>{var e,t;return null==(t=null==(e=k.value)?void 0:e.popperRef)?void 0:t.contentRef})),K=g((()=>{if(e.multiple){const t=e.modelValue.length;if(e.modelValue.length>0)return z.value.findIndex((a=>a.value===e.modelValue[t-1]))}else if(e.modelValue)return z.value.findIndex((t=>t.value===e.modelValue));return-1})),q=g({get:()=>M.value&&!1!==$.value,set(e){M.value=e}}),G=g((()=>i.cachedOptions.slice(0,e.maxCollapseTags))),Z=g((()=>i.cachedOptions.slice(e.maxCollapseTags))),{createNewOption:Q,removeNewOption:X,selectNewOption:J,clearAllNewOption:ee}=pn(e,i),{handleCompositionStart:te,handleCompositionUpdate:ae,handleCompositionEnd:le}=function(e){const t=m(!1);return{handleCompositionStart:()=>{t.value=!0},handleCompositionUpdate:e=>{const a=e.target.value,l=a[a.length-1]||"";t.value=!Je(l)},handleCompositionEnd:a=>{t.value&&(t.value=!1,oe(e)&&e(a))}}}((e=>De(e))),ne=()=>{var e,t,a;null==(t=null==(e=y.value)?void 0:e.focus)||t.call(e),null==(a=k.value)||a.updatePopper()},se=()=>{if(!e.automaticDropdown)return C.value?void 0:(i.isComposing&&(i.softFocus=!0),h((()=>{var e,t;M.value=!M.value,null==(t=null==(e=y.value)?void 0:e.focus)||t.call(e)})))},ie=()=>(e.filterable&&i.inputValue!==i.selectedLabel&&(i.query=i.selectedLabel),de(i.inputValue),h((()=>{Q(i.inputValue)}))),ue=ot(ie,P.value),de=t=>{i.previousQuery!==t&&(i.previousQuery=t,e.filterable&&oe(e.filterMethod)?e.filterMethod(t):e.filterable&&e.remote&&oe(e.remoteMethod)&&e.remoteMethod(t))},ce=a=>{t(lt,a),(a=>{st(e.modelValue,a)||t(nt,a)})(a),i.previousValue=null==a?void 0:a.toString()},pe=t=>ye(t)?ge(t,e.valueKey):t,ve=()=>h((()=>{var e,t;if(!y.value)return;const a=S.value;w.value.height=a.offsetHeight,M.value&&!1!==$.value&&(null==(t=null==(e=k.value)?void 0:e.updatePopper)||t.call(e))})),me=()=>{var t,a;if(fe(),B(),null==(a=null==(t=k.value)?void 0:t.updatePopper)||a.call(t),e.multiple)return ve()},fe=()=>{const e=S.value;e&&(i.selectWidth=e.getBoundingClientRect().width)},he=(t,a,l=!0)=>{var n,o;if(e.multiple){let l=e.modelValue.slice();const s=((t=[],a)=>{if(!ye(a))return t.indexOf(a);const l=e.valueKey;let n=-1;return t.some(((e,t)=>ge(e,l)===ge(a,l)&&(n=t,!0))),n})(l,pe(t));s>-1?(l=[...l.slice(0,s),...l.slice(s+1)],i.cachedOptions.splice(s,1),X(t)):(e.multipleLimit<=0||l.length<e.multipleLimit)&&(l=[...l,pe(t)],i.cachedOptions.push(t),J(t),Me(a)),ce(l),t.created&&(i.query="",de(""),i.inputLength=20),e.filterable&&!e.reserveKeyword&&(null==(o=(n=y.value).focus)||o.call(n),Se("")),e.filterable&&(i.calculatedWidth=x.value.getBoundingClientRect().width),ve(),Ce()}else u.value=a,i.selectedLabel=t.label,ce(pe(t)),M.value=!1,i.isComposing=!1,i.isSilentBlur=l,J(t),t.created||ee(),Me(a)},we=e=>(i.softFocus=!1,h((()=>{var a,l;null==(l=null==(a=y.value)?void 0:a.blur)||l.call(a),x.value&&(i.calculatedWidth=x.value.getBoundingClientRect().width),i.isSilentBlur?i.isSilentBlur=!1:i.isComposing&&t("blur",e),i.isComposing=!1}))),Se=e=>{i.displayInputValue=e,i.inputValue=e},xe=(e,t=undefined)=>{const a=z.value;if(!["forward","backward"].includes(e)||C.value||a.length<=0||L.value)return;if(!M.value)return se();void 0===t&&(t=i.hoveringIndex);let l=-1;"forward"===e?(l=t+1,l>=a.length&&(l=0)):"backward"===e&&(l=t-1,(l<0||l>=a.length)&&(l=a.length-1));const n=a[l];if(n.disabled||"Group"===n.type)return xe(e,l);Me(l),Ve(l)},Me=e=>{i.hoveringIndex=e},Ce=()=>{var e;const t=y.value;t&&(null==(e=t.focus)||e.call(t))},De=t=>{const a=t.target.value;if(Se(a),i.displayInputValue.length>0&&!M.value&&(M.value=!0),i.calculatedWidth=x.value.getBoundingClientRect().width,e.multiple&&ve(),!e.remote)return ie();ue()},Ve=e=>{b.value.scrollToItem(e)},Ie=()=>{if(i.hoveringIndex=-1,e.multiple)if(e.modelValue.length>0){let t=!1;i.cachedOptions.length=0,i.previousValue=e.modelValue.toString(),e.modelValue.forEach((e=>{const a=z.value.findIndex((t=>pe(t)===e));~a&&(i.cachedOptions.push(z.value[a]),t||Me(a),t=!0)}))}else i.cachedOptions=[],i.previousValue=void 0;else if(V.value){i.previousValue=e.modelValue;const t=z.value,a=t.findIndex((t=>pe(t)===pe(e.modelValue)));~a?(i.selectedLabel=t[a].label,Me(a)):i.selectedLabel=`${e.modelValue}`}else i.selectedLabel="",i.previousValue=void 0;ee(),B()};return f(M,(e=>{var a,l;t("visible-change",e),e?null==(l=(a=k.value).update)||l.call(a):(i.displayInputValue="",i.previousQuery=null,Q(""))})),f((()=>e.modelValue),((t,a)=>{var l;t&&t.toString()===i.previousValue||Ie(),!st(t,a)&&e.validateEvent&&(null==(l=null==r?void 0:r.validate)||l.call(r,"change").catch((e=>tt())))}),{deep:!0}),f((()=>e.options),(()=>{const e=y.value;(!e||e&&document.activeElement!==e)&&Ie()}),{deep:!0}),f(z,(()=>h(b.value.resetScrollTop))),E((()=>{Ie()})),ke(w,me),{collapseTagSize:R,currentPlaceholder:W,expanded:M,emptyText:$,popupHeight:D,debounce:P,filteredOptions:z,iconComponent:O,iconReverse:A,inputWrapperStyle:U,popperSize:d,dropdownMenuVisible:q,hasModelValue:V,shouldShowPlaceholder:F,selectDisabled:C,selectSize:N,showClearBtn:I,states:i,tagMaxWidth:Y,nsSelectV2:l,nsInput:n,calculatorRef:x,controlRef:v,inputRef:y,menuRef:b,popper:k,selectRef:w,selectionRef:S,popperRef:j,validateState:T,validateIcon:_,showTagList:G,collapseTagList:Z,debouncedOnInputChange:ue,deleteTag:(a,l)=>{const{valueKey:n}=e,o=e.modelValue.indexOf(ge(l,n));if(o>-1&&!C.value){const a=[...e.modelValue.slice(0,o),...e.modelValue.slice(o+1)];return i.cachedOptions.splice(o,1),ce(a),t("remove-tag",ge(l,n)),i.softFocus=!0,X(l),h(ne)}a.stopPropagation()},getLabel:e=>ye(e)?e.label:e,getValueKey:pe,handleBlur:we,handleClear:()=>{let a;return a=o(e.modelValue)?[]:void 0,i.softFocus=!0,e.multiple?i.cachedOptions=[]:i.selectedLabel="",M.value=!1,ce(a),t("clear"),ee(),h(ne)},handleClickOutside:()=>(M.value=!1,we()),handleDel:t=>{if(0===i.displayInputValue.length){t.preventDefault();const a=e.modelValue.slice();a.pop(),X(i.cachedOptions.pop()),ce(a)}},handleEsc:()=>{i.displayInputValue.length>0?Se(""):M.value=!1},handleFocus:e=>{const a=i.isComposing;i.isComposing=!0,i.softFocus?i.softFocus=!1:a||t("focus",e)},handleMenuEnter:()=>(i.inputValue=i.displayInputValue,h((()=>{~K.value&&(Me(K.value),Ve(i.hoveringIndex))}))),handleResize:me,toggleMenu:se,scrollTo:Ve,onInput:De,onKeyboardNavigate:xe,onKeyboardSelect:()=>{if(!M.value)return se();~i.hoveringIndex&&z.value[i.hoveringIndex]&&he(z.value[i.hoveringIndex],i.hoveringIndex,!1)},onSelect:he,onHover:Me,onUpdateInputValue:Se,handleCompositionStart:te,handleCompositionEnd:le,handleCompositionUpdate:ae}},fn=d({name:"ElSelectV2",components:{ElSelectMenu:cn,ElTag:Le,ElTooltip:Ye,ElIcon:O},directives:{ClickOutside:He,ModelText:we},props:nn,emits:[lt,nt,"remove-tag","clear","visible-change","focus","blur"],setup(e,{emit:t}){const a=g((()=>{const{modelValue:t,multiple:a}=e,l=a?[]:void 0;return o(t)?a?t:l:a?l:t})),l=mn(re({...Se(e),modelValue:a}),t);return S(dn,{props:re({...Se(e),height:l.popupHeight,modelValue:a}),popper:l.popper,onSelect:l.onSelect,onHover:l.onHover,onKeyboardNavigate:l.onKeyboardNavigate,onKeyboardSelect:l.onKeyboardSelect}),{...l,modelValue:a}}}),hn={key:0},gn=["id","autocomplete","aria-expanded","aria-labelledby","disabled","readonly","name","unselectable"],yn=["textContent"],bn=["id","aria-labelledby","aria-expanded","autocomplete","disabled","name","readonly","unselectable"],kn=["textContent"];var wn=N(fn,[["render",function(e,t,a,l,n,o){const s=xe("el-tag"),r=xe("el-tooltip"),i=xe("el-icon"),u=xe("el-select-menu"),d=Me("model-text"),c=Me("click-outside");return F((x(),_("div",{ref:"selectRef",class:D([e.nsSelectV2.b(),e.nsSelectV2.m(e.selectSize)]),onClick:t[24]||(t[24]=I(((...t)=>e.toggleMenu&&e.toggleMenu(...t)),["stop"])),onMouseenter:t[25]||(t[25]=t=>e.states.comboBoxHovering=!0),onMouseleave:t[26]||(t[26]=t=>e.states.comboBoxHovering=!1)},[W(r,{ref:"popper",visible:e.dropdownMenuVisible,teleported:e.teleported,"popper-class":[e.nsSelectV2.e("popper"),e.popperClass],"gpu-acceleration":!1,"stop-popper-mouse-event":!1,"popper-options":e.popperOptions,"fallback-placements":["bottom-start","top-start","right","left"],effect:e.effect,placement:e.placement,pure:"",transition:`${e.nsSelectV2.namespace.value}-zoom-in-top`,trigger:"click",persistent:e.persistent,onBeforeShow:e.handleMenuEnter,onHide:t[23]||(t[23]=t=>e.states.inputValue=e.states.displayInputValue)},{default:C((()=>[P("div",{ref:"selectionRef",class:D([e.nsSelectV2.e("wrapper"),e.nsSelectV2.is("focused",e.states.isComposing||e.expanded),e.nsSelectV2.is("hovering",e.states.comboBoxHovering),e.nsSelectV2.is("filterable",e.filterable),e.nsSelectV2.is("disabled",e.selectDisabled)])},[e.$slots.prefix?(x(),_("div",hn,[$(e.$slots,"prefix")])):T("v-if",!0),e.multiple?(x(),_("div",{key:1,class:D(e.nsSelectV2.e("selection"))},[e.collapseTags&&e.modelValue.length>0?(x(),_(Y,{key:0},[(x(!0),_(Y,null,B(e.showTagList,(t=>(x(),_("div",{key:e.getValueKey(t),class:D(e.nsSelectV2.e("selected-item"))},[W(s,{closable:!e.selectDisabled&&!(null==t?void 0:t.disable),size:e.collapseTagSize,type:"info","disable-transitions":"",onClose:a=>e.deleteTag(a,t)},{default:C((()=>[P("span",{class:D(e.nsSelectV2.e("tags-text")),style:V({maxWidth:`${e.tagMaxWidth}px`})},z(null==t?void 0:t.label),7)])),_:2},1032,["closable","size","onClose"])],2)))),128)),P("div",{class:D(e.nsSelectV2.e("selected-item"))},[e.modelValue.length>e.maxCollapseTags?(x(),M(s,{key:0,closable:!1,size:e.collapseTagSize,type:"info","disable-transitions":""},{default:C((()=>[e.collapseTagsTooltip?(x(),M(r,{key:0,disabled:e.dropdownMenuVisible,"fallback-placements":["bottom","top","right","left"],effect:e.effect,placement:"bottom",teleported:!1},{default:C((()=>[P("span",{class:D(e.nsSelectV2.e("tags-text")),style:V({maxWidth:`${e.tagMaxWidth}px`})},"+ "+z(e.modelValue.length-e.maxCollapseTags),7)])),content:C((()=>[P("div",{class:D(e.nsSelectV2.e("selection"))},[(x(!0),_(Y,null,B(e.collapseTagList,(t=>(x(),_("div",{key:e.getValueKey(t),class:D(e.nsSelectV2.e("selected-item"))},[W(s,{closable:!e.selectDisabled&&!t.disabled,size:e.collapseTagSize,class:"in-tooltip",type:"info","disable-transitions":"",onClose:a=>e.deleteTag(a,t)},{default:C((()=>[P("span",{class:D(e.nsSelectV2.e("tags-text")),style:V({maxWidth:`${e.tagMaxWidth}px`})},z(e.getLabel(t)),7)])),_:2},1032,["closable","size","onClose"])],2)))),128))],2)])),_:1},8,["disabled","effect"])):(x(),_("span",{key:1,class:D(e.nsSelectV2.e("tags-text")),style:V({maxWidth:`${e.tagMaxWidth}px`})},"+ "+z(e.modelValue.length-e.maxCollapseTags),7))])),_:1},8,["size"])):T("v-if",!0)],2)],64)):(x(!0),_(Y,{key:1},B(e.states.cachedOptions,(t=>(x(),_("div",{key:e.getValueKey(t),class:D(e.nsSelectV2.e("selected-item"))},[W(s,{closable:!e.selectDisabled&&!t.disabled,size:e.collapseTagSize,type:"info","disable-transitions":"",onClose:a=>e.deleteTag(a,t)},{default:C((()=>[P("span",{class:D(e.nsSelectV2.e("tags-text")),style:V({maxWidth:`${e.tagMaxWidth}px`})},z(e.getLabel(t)),7)])),_:2},1032,["closable","size","onClose"])],2)))),128)),P("div",{class:D([e.nsSelectV2.e("selected-item"),e.nsSelectV2.e("input-wrapper")]),style:V(e.inputWrapperStyle)},[F(P("input",{id:e.id,ref:"inputRef",autocomplete:e.autocomplete,"aria-autocomplete":"list","aria-haspopup":"listbox",autocapitalize:"off","aria-expanded":e.expanded,"aria-labelledby":e.label,class:D([e.nsSelectV2.is(e.selectSize),e.nsSelectV2.e("combobox-input")]),disabled:e.disabled,role:"combobox",readonly:!e.filterable,spellcheck:"false",type:"text",name:e.name,unselectable:e.expanded?"on":void 0,"onUpdate:modelValue":t[0]||(t[0]=(...t)=>e.onUpdateInputValue&&e.onUpdateInputValue(...t)),onFocus:t[1]||(t[1]=(...t)=>e.handleFocus&&e.handleFocus(...t)),onBlur:t[2]||(t[2]=(...t)=>e.handleBlur&&e.handleBlur(...t)),onInput:t[3]||(t[3]=(...t)=>e.onInput&&e.onInput(...t)),onCompositionstart:t[4]||(t[4]=(...t)=>e.handleCompositionStart&&e.handleCompositionStart(...t)),onCompositionupdate:t[5]||(t[5]=(...t)=>e.handleCompositionUpdate&&e.handleCompositionUpdate(...t)),onCompositionend:t[6]||(t[6]=(...t)=>e.handleCompositionEnd&&e.handleCompositionEnd(...t)),onKeydown:[t[7]||(t[7]=G(I((t=>e.onKeyboardNavigate("backward")),["stop","prevent"]),["up"])),t[8]||(t[8]=G(I((t=>e.onKeyboardNavigate("forward")),["stop","prevent"]),["down"])),t[9]||(t[9]=G(I(((...t)=>e.onKeyboardSelect&&e.onKeyboardSelect(...t)),["stop","prevent"]),["enter"])),t[10]||(t[10]=G(I(((...t)=>e.handleEsc&&e.handleEsc(...t)),["stop","prevent"]),["esc"])),t[11]||(t[11]=G(I(((...t)=>e.handleDel&&e.handleDel(...t)),["stop"]),["delete"]))]},null,42,gn),[[d,e.states.displayInputValue]]),e.filterable?(x(),_("span",{key:0,ref:"calculatorRef","aria-hidden":"true",class:D(e.nsSelectV2.e("input-calculator")),textContent:z(e.states.displayInputValue)},null,10,yn)):T("v-if",!0)],6)],2)):(x(),_(Y,{key:2},[P("div",{class:D([e.nsSelectV2.e("selected-item"),e.nsSelectV2.e("input-wrapper")])},[F(P("input",{id:e.id,ref:"inputRef","aria-autocomplete":"list","aria-haspopup":"listbox","aria-labelledby":e.label,"aria-expanded":e.expanded,autocapitalize:"off",autocomplete:e.autocomplete,class:D(e.nsSelectV2.e("combobox-input")),disabled:e.disabled,name:e.name,role:"combobox",readonly:!e.filterable,spellcheck:"false",type:"text",unselectable:e.expanded?"on":void 0,onCompositionstart:t[12]||(t[12]=(...t)=>e.handleCompositionStart&&e.handleCompositionStart(...t)),onCompositionupdate:t[13]||(t[13]=(...t)=>e.handleCompositionUpdate&&e.handleCompositionUpdate(...t)),onCompositionend:t[14]||(t[14]=(...t)=>e.handleCompositionEnd&&e.handleCompositionEnd(...t)),onFocus:t[15]||(t[15]=(...t)=>e.handleFocus&&e.handleFocus(...t)),onBlur:t[16]||(t[16]=(...t)=>e.handleBlur&&e.handleBlur(...t)),onInput:t[17]||(t[17]=(...t)=>e.onInput&&e.onInput(...t)),onKeydown:[t[18]||(t[18]=G(I((t=>e.onKeyboardNavigate("backward")),["stop","prevent"]),["up"])),t[19]||(t[19]=G(I((t=>e.onKeyboardNavigate("forward")),["stop","prevent"]),["down"])),t[20]||(t[20]=G(I(((...t)=>e.onKeyboardSelect&&e.onKeyboardSelect(...t)),["stop","prevent"]),["enter"])),t[21]||(t[21]=G(I(((...t)=>e.handleEsc&&e.handleEsc(...t)),["stop","prevent"]),["esc"]))],"onUpdate:modelValue":t[22]||(t[22]=(...t)=>e.onUpdateInputValue&&e.onUpdateInputValue(...t))},null,42,bn),[[d,e.states.displayInputValue]])],2),e.filterable?(x(),_("span",{key:0,ref:"calculatorRef","aria-hidden":"true",class:D([e.nsSelectV2.e("selected-item"),e.nsSelectV2.e("input-calculator")]),textContent:z(e.states.displayInputValue)},null,10,kn)):T("v-if",!0)],64)),e.shouldShowPlaceholder?(x(),_("span",{key:3,class:D([e.nsSelectV2.e("placeholder"),e.nsSelectV2.is("transparent",e.multiple?0===e.modelValue.length:!e.hasModelValue)])},z(e.currentPlaceholder),3)):T("v-if",!0),P("span",{class:D(e.nsSelectV2.e("suffix"))},[e.iconComponent?F((x(),M(i,{key:0,class:D([e.nsSelectV2.e("caret"),e.nsInput.e("icon"),e.iconReverse])},{default:C((()=>[(x(),M(A(e.iconComponent)))])),_:1},8,["class"])),[[ee,!e.showClearBtn]]):T("v-if",!0),e.showClearBtn&&e.clearIcon?(x(),M(i,{key:1,class:D([e.nsSelectV2.e("caret"),e.nsInput.e("icon")]),onClick:I(e.handleClear,["prevent","stop"])},{default:C((()=>[(x(),M(A(e.clearIcon)))])),_:1},8,["class","onClick"])):T("v-if",!0),e.validateState&&e.validateIcon?(x(),M(i,{key:2,class:D([e.nsInput.e("icon"),e.nsInput.e("validateIcon")])},{default:C((()=>[(x(),M(A(e.validateIcon)))])),_:1},8,["class"])):T("v-if",!0)],2)],2)])),content:C((()=>[W(u,{ref:"menuRef",data:e.filteredOptions,width:e.popperSize,"hovering-index":e.states.hoveringIndex,"scrollbar-always-on":e.scrollbarAlwaysOn},{default:C((t=>[$(e.$slots,"default",Ce(De(t)))])),empty:C((()=>[$(e.$slots,"empty",{},(()=>[P("p",{class:D(e.nsSelectV2.e("empty"))},z(e.emptyText?e.emptyText:""),3)]))])),_:3},8,["data","width","hovering-index","scrollbar-always-on"])])),_:3},8,["visible","teleported","popper-class","popper-options","effect","placement","transition","persistent","onBeforeShow"])],34)),[[c,e.handleClickOutside,e.popperRef]])}],["__file","/home/runner/work/element-plus/element-plus/packages/components/select-v2/src/select.vue"]]);wn.install=e=>{e.component(wn.name,wn)};const Sn=wn;var xn={};({get exports(){return xn},set exports(e){xn=e}}).exports=function(){function e(e){var l=[];return e.AMapUI&&l.push(t(e.AMapUI)),e.Loca&&l.push(a(e.Loca)),Promise.all(l)}function t(e){return new Promise((function(t,a){var n=[];if(e.plugins)for(var i=0;i<e.plugins.length;i+=1)-1==o.AMapUI.plugins.indexOf(e.plugins[i])&&n.push(e.plugins[i]);if(s.AMapUI===l.failed)a("前次请求 AMapUI 失败");else if(s.AMapUI===l.notload){s.AMapUI=l.loading,o.AMapUI.version=e.version||o.AMapUI.version,i=o.AMapUI.version;var u=document.body||document.head,d=document.createElement("script");d.type="text/javascript",d.src="https://webapi.amap.com/ui/"+i+"/main.js",d.onerror=function(e){s.AMapUI=l.failed,a("请求 AMapUI 失败")},d.onload=function(){if(s.AMapUI=l.loaded,n.length)window.AMapUI.loadUI(n,(function(){for(var e=0,a=n.length;e<a;e++){var l=n[e].split("/").slice(-1)[0];window.AMapUI[l]=arguments[e]}for(t();r.AMapUI.length;)r.AMapUI.splice(0,1)[0]()}));else for(t();r.AMapUI.length;)r.AMapUI.splice(0,1)[0]()},u.appendChild(d)}else s.AMapUI===l.loaded?e.version&&e.version!==o.AMapUI.version?a("不允许多个版本 AMapUI 混用"):n.length?window.AMapUI.loadUI(n,(function(){for(var e=0,a=n.length;e<a;e++){var l=n[e].split("/").slice(-1)[0];window.AMapUI[l]=arguments[e]}t()})):t():e.version&&e.version!==o.AMapUI.version?a("不允许多个版本 AMapUI 混用"):r.AMapUI.push((function(e){e?a(e):n.length?window.AMapUI.loadUI(n,(function(){for(var e=0,a=n.length;e<a;e++){var l=n[e].split("/").slice(-1)[0];window.AMapUI[l]=arguments[e]}t()})):t()}))}))}function a(e){return new Promise((function(t,a){if(s.Loca===l.failed)a("前次请求 Loca 失败");else if(s.Loca===l.notload){s.Loca=l.loading,o.Loca.version=e.version||o.Loca.version;var n=o.Loca.version,i=o.AMap.version.startsWith("2"),u=n.startsWith("2");if(i&&!u||!i&&u)a("JSAPI 与 Loca 版本不对应！！");else{i=o.key,u=document.body||document.head;var d=document.createElement("script");d.type="text/javascript",d.src="https://webapi.amap.com/loca?v="+n+"&key="+i,d.onerror=function(e){s.Loca=l.failed,a("请求 AMapUI 失败")},d.onload=function(){for(s.Loca=l.loaded,t();r.Loca.length;)r.Loca.splice(0,1)[0]()},u.appendChild(d)}}else s.Loca===l.loaded?e.version&&e.version!==o.Loca.version?a("不允许多个版本 Loca 混用"):t():e.version&&e.version!==o.Loca.version?a("不允许多个版本 Loca 混用"):r.Loca.push((function(e){e?a(e):a()}))}))}if(!window)throw Error("AMap JSAPI can only be used in Browser.");var l,n;(n=l||(l={})).notload="notload",n.loading="loading",n.loaded="loaded",n.failed="failed";var o={key:"",AMap:{version:"1.4.15",plugins:[]},AMapUI:{version:"1.1",plugins:[]},Loca:{version:"1.3.2"}},s={AMap:l.notload,AMapUI:l.notload,Loca:l.notload},r={AMap:[],AMapUI:[],Loca:[]},i=[],u=function(e){"function"==typeof e&&(s.AMap===l.loaded?e(window.AMap):i.push(e))};return{load:function(t){return new Promise((function(a,n){if(s.AMap==l.failed)n("");else if(s.AMap==l.notload){var r=t.key,d=t.version,c=t.plugins;r?(window.AMap&&"lbs.amap.com"!==location.host&&n("禁止多种API加载方式混用"),o.key=r,o.AMap.version=d||o.AMap.version,o.AMap.plugins=c||o.AMap.plugins,s.AMap=l.loading,d=document.body||document.head,window.___onAPILoaded=function(o){if(delete window.___onAPILoaded,o)s.AMap=l.failed,n(o);else for(s.AMap=l.loaded,e(t).then((function(){a(window.AMap)})).catch(n);i.length;)i.splice(0,1)[0]()},(c=document.createElement("script")).type="text/javascript",c.src="https://webapi.amap.com/maps?callback=___onAPILoaded&v="+o.AMap.version+"&key="+r+"&plugin="+o.AMap.plugins.join(","),c.onerror=function(e){s.AMap=l.failed,n(e)},d.appendChild(c)):n("请填写key")}else if(s.AMap==l.loaded)if(t.key&&t.key!==o.key)n("多个不一致的 key");else if(t.version&&t.version!==o.AMap.version)n("不允许多个版本 JSAPI 混用");else{if(r=[],t.plugins)for(d=0;d<t.plugins.length;d+=1)-1==o.AMap.plugins.indexOf(t.plugins[d])&&r.push(t.plugins[d]);r.length?window.AMap.plugin(r,(function(){e(t).then((function(){a(window.AMap)})).catch(n)})):e(t).then((function(){a(window.AMap)})).catch(n)}else if(t.key&&t.key!==o.key)n("多个不一致的 key");else if(t.version&&t.version!==o.AMap.version)n("不允许多个版本 JSAPI 混用");else{var p=[];if(t.plugins)for(d=0;d<t.plugins.length;d+=1)-1==o.AMap.plugins.indexOf(t.plugins[d])&&p.push(t.plugins[d]);u((function(){p.length?window.AMap.plugin(p,(function(){e(t).then((function(){a(window.AMap)})).catch(n)})):e(t).then((function(){a(window.AMap)})).catch(n)}))}}))},reset:function(){delete window.AMap,delete window.AMapUI,delete window.Loca,o={key:"",AMap:{version:"1.4.15",plugins:[]},AMapUI:{version:"1.1",plugins:[]},Loca:{version:"1.3.2"}},s={AMap:l.notload,AMapUI:l.notload,Loca:l.notload},r={AMap:[],AMapUI:[],Loca:[]}}}}();const Mn=xn,Cn={class:"map-container"},Dn=P("strong",null,"经度：",-1),Vn=P("strong",{class:"ml-3"}," 纬度：",-1),In=P("strong",null,"地址：",-1),On=P("div",{id:"map"},null,-1),An=d({__name:"index",props:{lng:{type:Number,required:!0,default:116.397428},lat:{type:Number,require:!0,default:39.90923}},setup(e){const t=e,a=m(null),l=m(""),n=m([116.397428,39.90923]);return E((()=>{null!==t.lat&&null!==t.lng&&(n.value=[t.lng,t.lat]),Mn.load({key:"c8f08427710f817dc4faa7f74e135987",version:"2.0",plugins:["AMap.Geolocation","AMap.Geocoder"]}).then((e=>{var o;a.value=new e.Map("map",{center:n.value,zoom:13});new e.Geocoder({city:"全国",radius:1e3}).getAddress([t.lng,t.lat],((e,t)=>{"complete"===e&&t.regeocode&&(l.value=t.regeocode.formattedAddress)}));const s=new e.Marker({position:new e.LngLat(116.39,39.9),title:"打卡"});null==(o=a.value)||o.add(s),a.value.zoom=18}))})),(e,a)=>(x(),_("div",Cn,[P("p",null,[Dn,U(z(t.lng||"还未打卡")+" ",1),Vn,U(" "+z(t.lat||"还未打卡"),1)]),P("p",null,[In,U(z(l.value||"还未打卡"),1)]),On]))}}),Tn={class:"app-container"},_n=P("span",{class:"i-carbon-task-view mr-1"},null,-1),Pn=P("span",{class:"i-ph-pencil-line-light mr-1"},null,-1),$n=P("h4",{class:"mt-2"}," 打卡地点 ",-1),zn=d({name:"VxeTable"}),Ln=d({...zn,setup(e){const t=m(),a=m(!1),l=m(!1),n=m(),o=m([]),s=re({startTime:"",endTime:""}),r=new Date(2e3,1,1,12,0,0),i=m(null),u=m(),d=[{id:0,label:"正常",status:0},{id:1,label:"未打卡",status:1},{id:2,label:"迟到",status:2},{id:3,label:"早退",status:3},{id:4,label:"时长不够",status:4},{id:5,label:"请假",status:5},{id:6,label:"加班",status:6},{id:7,label:"补办工时",status:7}],c=[{id:0,value:"正常",type:"success"},{id:1,value:"未打卡",type:"danger"},{id:2,value:"迟到",type:"danger"},{id:3,value:"早退",type:"danger"},{id:4,value:"时长不够",type:"danger"},{id:5,value:"请假",type:"warning"},{id:6,value:"加班",type:"info"},{id:7,value:"补办工时",type:""}],p=[{text:"上一周",value:()=>{const e=new Date,t=new Date;return t.setTime(t.getTime()-6048e5),[t,e]}},{text:"上个月",value:()=>{const e=new Date,t=new Date;return t.setTime(t.getTime()-2592e6),[t,e]}},{text:"三月前",value:()=>{const e=new Date,t=new Date;return t.setTime(t.getTime()-7776e6),[t,e]}}],v=()=>{s.startTime=o.value[0]?Ie(o.value[0],"YYYY-MM-DD HH:mm:ss").value:"",s.endTime=o.value[1]?Ie(o.value[1],"YYYY-MM-DD HH:mm:ss").value:""},f=async e=>{var l;a.value=!0;const o=re({username:e||(null==(l=n.value)?void 0:l.username)||"",size:20,current:0}),{data:s}=await qe(o);a.value=!1,t.value=s.records.map((e=>({id:e.id,label:e.username,value:e})))};E((()=>{f("")}));const g=m(),y=m(),b=m(),w=re({title:"",showClose:!0,escClosable:!0,maskClosable:!0,beforeHideMethod:()=>{var e;return null==(e=y.value)||e.clearValidate(),Promise.resolve()}}),S=re({loading:!0,border:!0,autoResize:!0,showHeaderOverflow:!0,showOverflow:!0,keepSource:!0,columnConfig:{resizable:!0},pagerConfig:{align:"right"},printConfig:{columns:[{field:"username"},{field:"phoneNum"},{field:"roles"},{field:"avatar"}]},formConfig:{items:[{field:"username",slots:{default:"userName_item"}},{field:"status",slots:{default:"status_item"}},{field:"startTime",slots:{default:"startTime_item"}},{itemRender:{name:"$buttons",children:[{props:{type:"submit",content:"查询",status:"primary"}}]}}]},toolbarConfig:{refresh:!0,custom:!0,export:!0,print:!0,zoom:!0},customConfig:{checkMethod:({column:e})=>!["username"].includes(e.field)},exportConfig:{modes:["current","selected","all"]},columns:[{type:"seq",width:"50px",title:"序号"},{field:"user.username",title:"用户名",width:"80px"},{field:"signInTime",title:"签到时间"},{field:"signOutTime",title:"签退时间"},{field:"workTime",title:"工作时长（小时）"},{field:"createTime",title:"打卡日期"},{field:"status",width:"80px",title:"状态",slots:{default:"row-status"}},{title:"操作",width:"200px",fixed:"right",showOverflow:!1,slots:{default:"row-operate"}}],proxyConfig:{seq:!0,form:!0,props:{total:"total"},ajax:{query:({page:e,form:t})=>(S.loading=!0,V.clearTable(),new Promise((t=>{var a;let l=0,o=[];const r=e=>{if(e&&e.data){const t=e.data;Number.isInteger(t.total)&&(l=t.total),Array.isArray(t.records)&&(o=t.records)}S.loading=!1,t({total:l,result:o})};(function(e){return Ve({url:"sys-check/list",method:"get",params:e})})({userId:(null==(a=n.value)?void 0:a.id)||"",startTime:s.startTime||"",endTime:s.endTime||"",status:i.value,size:e.pageSize,current:e.currentPage}).then(r).catch(r)})))}}}),D=re({span:24,titleWidth:"100px",loading:!1,titleColon:!1,data:{id:"",username:"",userId:"",createTime:"",addTime:0,overTime:0,status:7,des:"管理员操作：工时补加"},items:[{field:"username",title:"用户名",itemRender:{name:"$input",props:{placeholder:"请输入用户名"}}},{field:"createTime",title:"打卡日期",itemRender:{name:"$input",props:{placeholder:"请输入打卡日期"}}},{field:"addTime",title:"补加工时(h)",itemRender:{name:"$input",props:{placeholder:"请输入补充工时"}}},{field:"overTime",title:"加班时长(h)",itemRender:{name:"$input",props:{placeholder:"请输入加班时长"}}},{align:"right",itemRender:{name:"$buttons",children:[{props:{content:"取消"},events:{click:()=>{var e;return null==(e=b.value)?void 0:e.close()}}},{props:{type:"submit",content:"确定",status:"primary"},events:{click:()=>V.onSubmitForm()}}]}}],rules:{addTime:[{validator:({itemValue:e})=>e?Ge(e)?void 0:new Error("请输入数字"):new Error("请输入补加工时")}],overTime:[{validator:({itemValue:e})=>e?Ge(e)?void 0:new Error("请输入数字"):new Error("请输入加班时长")}]}}),V=re({isUpdate:!0,commitQuery:()=>{var e;return null==(e=g.value)?void 0:e.commitProxy("query")},clearTable:()=>{var e;return null==(e=g.value)?void 0:e.reloadData([])},onShowModal:e=>{var t,a,l,n,o;e&&(V.isUpdate=!0,w.title="修改考勤数据",D.data.id=e.id,D.data.username=e.user.username,D.data.userId=e.user.id,D.data.addTime=e.addTime||0,D.data.overTime=e.overTime||0,D.data.createTime=e.createTime),D.items&&((null==(a=null==(t=D.items[0])?void 0:t.itemRender)?void 0:a.props)&&(D.items[0].itemRender.props.disabled=V.isUpdate),(null==(n=null==(l=D.items[1])?void 0:l.itemRender)?void 0:n.props)&&(D.items[1].itemRender.props.disabled=V.isUpdate)),null==(o=b.value)||o.open(),h((()=>{var e,t;!V.isUpdate&&(null==(e=y.value)||e.reset()),null==(t=y.value)||t.clearValidate()}))},onShowDialog:e=>{l.value=!0,u.value=e},onSubmitForm:()=>{var e;D.loading||null==(e=y.value)||e.validate((e=>{if(e)return;D.loading=!0;const t=e=>{var t;D.loading=!1,200===e.code&&(null==(t=b.value)||t.close(),Oe.success("操作成功"),!V.isUpdate&&V.afterInsert(),V.commitQuery())};var a;V.isUpdate&&(a=D.data,Ve({url:"sys-check/admin/edit",method:"put",data:a})).then((e=>t(e))).catch((e=>t(e))),D.data={}}))},afterInsert:()=>{var e,t;const a=null==(t=null==(e=g.value)?void 0:e.getProxyInfo())?void 0:t.pager;if(a){a.currentPage*a.pageSize===a.total&&++a.currentPage}}});return(e,s)=>{var m,h;const I=je,O=Ke,A=Sn,P=pl,$=Ee,N=xe("vxe-grid"),R=xe("vxe-form"),E=xe("vxe-modal"),F=$e,H=Le,j=ze,K=Te,q=Ae;return x(),_("div",Tn,[W(N,L({ref_key:"xGridDom",ref:g},S),{userName_item:C((()=>[W(O,{modelValue:n.value,"onUpdate:modelValue":s[0]||(s[0]=e=>n.value=e),"value-key":"id","remote-show-suffix":"",filterable:"",remote:"",clearable:"","reserve-keyword":"",placeholder:"请输入员工的姓名","remote-method":f,loading:a.value},{default:C((()=>[(x(!0),_(Y,null,B(t.value,(e=>(x(),M(I,{key:e.id,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue","loading"])])),status_item:C((()=>[W(A,{modelValue:i.value,"onUpdate:modelValue":s[1]||(s[1]=e=>i.value=e),options:d,placeholder:"请选择状态","value-key":"status"},null,8,["modelValue"])])),startTime_item:C((()=>[W(P,{modelValue:o.value,"onUpdate:modelValue":s[2]||(s[2]=e=>o.value=e),type:"datetimerange","start-placeholder":"开始时间","end-placeholder":"结束时间","default-time":k(r),shortcuts:p,"value-format":"YYYY-MM-DD HH:mm:ss",format:"YYYY-MM-DD HH:mm:ss","range-separator":"至",onChange:v},null,8,["modelValue","default-time"])])),"row-status":C((({row:e})=>[W(Pe,{status:parseInt(e.status),"status-list":c},null,8,["status"])])),"row-operate":C((({row:e})=>[W($,{link:"",type:"primary",onClick:t=>V.onShowDialog(e)},{default:C((()=>[_n,U(" 查看详情 ")])),_:2},1032,["onClick"]),W($,{link:"",type:"danger",onClick:t=>V.onShowModal(e)},{default:C((()=>[Pn,U(" 编辑信息 ")])),_:2},1032,["onClick"])])),_:1},16),W(E,L({ref_key:"xModalDom",ref:b},w),{default:C((()=>[W(R,L({ref_key:"xFormDom",ref:y},D),null,16)])),_:1},16),W(q,{modelValue:l.value,"onUpdate:modelValue":s[3]||(s[3]=e=>l.value=e),"destroy-on-close":"",title:`${null==(m=u.value)?void 0:m.user.username} ${k(Ie)(null==(h=u.value)?void 0:h.createTime,"YYYY-MM-DD").value}考勤数据`,width:"600px",style:{"z-index":"10004 !important"}},{default:C((()=>[W(K,{height:"400px"},{default:C((()=>{var e,t;return[W(j,{title:"员工信息",column:2,"label-align":"right"},{default:C((()=>[W(F,{label:"姓名"},{default:C((()=>{var e;return[U(z(null==(e=u.value)?void 0:e.user.username),1)]})),_:1}),W(F,{label:"手机号码"},{default:C((()=>{var e;return[U(z(null==(e=u.value)?void 0:e.user.phoneNum),1)]})),_:1}),W(F,{label:"部门"},{default:C((()=>[U(" Suzhou ")])),_:1}),W(F,{label:"职位"},{default:C((()=>[W(H,{size:"small"},{default:C((()=>[U(" School ")])),_:1})])),_:1})])),_:1}),l.value?(x(),M(j,{key:0,title:"考勤数据",column:2,border:""},{default:C((()=>[W(F,{label:"打卡日期"},{default:C((()=>[U(z(u.value.createTime||"N/A"),1)])),_:1}),W(F,{label:"签到时间"},{default:C((()=>[U(z(u.value.signInTime||"N/A"),1)])),_:1}),W(F,{label:"签退时间"},{default:C((()=>[U(z(u.value.signOutTime||"N/A"),1)])),_:1}),W(F,{label:"工作时长"},{default:C((()=>[U(z(u.value.workTime||0),1)])),_:1}),W(F,{label:"加班时长"},{default:C((()=>[U(z(u.value.overTime||0),1)])),_:1}),W(F,{label:"补加时长"},{default:C((()=>[U(z(u.value.addTime||0),1)])),_:1}),W(F,{label:"考勤日志"},{default:C((()=>[U(z(u.value.des),1)])),_:1})])),_:1})):T("",!0),$n,W(An,{lng:null==(e=u.value)?void 0:e.lon,lat:null==(t=u.value)?void 0:t.lat},null,8,["lng","lat"])]})),_:1})])),_:1},8,["modelValue","title"])])}}});export{Ln as default};
