import{d as e,r as a,ac as l,Q as s,y as t,o,a as r,c as i,C as u,w as n,D as d,l as p,f as m,W as f,ah as v,n as c,k as _,q as j,a4 as h,H as y,an as b,ap as g,aq as w}from"./index-1713f3be.js";import{v as I}from"./el-loading-14f9a8d4.js";import{E as x}from"./el-infinite-scroll-1e0cf731.js";import{E as T,a as k}from"./el-tab-pane-047a94db.js";import{a as E,b as O,E as C}from"./el-main-7a9f1d3d.js";import{a as V,E as z}from"./el-form-item-5a2ccd8a.js";import{E as R}from"./el-button-1777eae9.js";/* empty css                 */import{E as F,a as q}from"./el-descriptions-item-910e224f.js";/* empty css               */import{_ as L}from"./index-0e9187b3.js";import{E as S}from"./el-scrollbar-caee5b30.js";import{E as U}from"./el-divider-9e3da786.js";import{E as N}from"./el-card-020fefc8.js";import{E as P}from"./el-empty-e00cb9ee.js";import{_ as W}from"./FinishList.vue_vue_type_script_setup_true_lang-4114bcb3.js";import{g as A,s as D}from"./index-1a48499c.js";import{_ as G}from"./index.vue_vue_type_script_setup_true_lang-06622adf.js";import{u as H}from"./utils-4a6237ef.js";import{E as J}from"./index-152f0932.js";import{E as M}from"./index-3f18be1f.js";import{_ as Q}from"./_plugin-vue_export-helper-1b428a4d.js";import"./throttle-3d84947d.js";import"./debounce-1af7bc8d.js";import"./event-15d81b97.js";import"./scroll-e1940b97.js";import"./strings-5db16fbd.js";import"./index-9b01fe37.js";import"./el-overlay-7919f65d.js";import"./use-form-item-865a16c5.js";import"./_Uint8Array-85531e68.js";import"./_initCloneObject-a49b3841.js";import"./el-tooltip-4ed993c7.js";import"./el-popper-90370b12.js";import"./focus-trap-6cc344c7.js";import"./index-a3f93494.js";import"./el-dialog-4ecabfaa.js";import"./refs-0a43d458.js";import"./index-d50292f6.js";const X=e=>(g("data-v-72ab4384"),e=e(),w(),e),Y={class:"app-container"},B={key:0},K={key:1,class:"common-layout"},Z=["infinite-scroll-disabled"],$={class:"flex justify-between w-60 text-gray-500"},ee={class:"flow-leave"},ae=X((()=>_("h2",{class:"flex justify-center items-center"}," 审批表 ",-1))),le=X((()=>_("h4",{class:"mt-2"}," 审批意见 ",-1))),se=e({name:"ElementPlus"}),te=Q(e({...se,setup(e){var g,w;const Q=a("todo"),X=l(),se=a(),te=[{id:0,type:"",value:"工作日加班"},{id:1,type:"success",value:"休息日加班"},{id:2,type:"danger",value:"法定节假日加班"}],oe=s({approverId:null==(g=X.userInfo)?void 0:g.id,status:1,applicationType:"2",current:0,size:5}),re=s({id:"",applicationId:"",approverId:(null==(w=X.userInfo)?void 0:w.id)||"",approvalResult:0,reason:"",applicationType:"2"}),ie=a([]),ue=a(),ne=a(!0),de=a(!1),pe=a(""),me=a(!1),fe=t((()=>ne.value||de.value)),ve=()=>{ne.value=!0,A(oe).then((e=>{var a;const l=[...ie.value,...e.data.records];ie.value=[...H(l)],ue.value=ie.value[0],pe.value=(null==(a=ue.value)?void 0:a.id)||"",ne.value=!1,oe.current++,e.data.total<=ie.value.length&&(de.value=!0)}))},ce=()=>{ve()},_e=e=>{ie.value=ie.value.filter((a=>a.id!==e))};return o((()=>{ve()})),(e,a)=>{const l=P,s=N,t=U,o=S,g=E,w=L,A=F,H=J,X=q,oe=M,ve=V,je=R,he=z,ye=O,be=C,ge=T,we=k,Ie=x,xe=I;return r(),i("div",Y,[u(s,{shadow:"never"},{default:n((()=>[u(we,{modelValue:Q.value,"onUpdate:modelValue":a[3]||(a[3]=e=>Q.value=e),class:"demo-tabs"},{default:n((()=>[u(ge,{label:"待审批",name:"todo"},{default:n((()=>["todo"===Q.value?d((r(),i("div",B,[0===ie.value.length?(r(),p(l,{key:0,"image-size":200,class:"h-120",description:"你已经全部审批完了"})):(r(),i("div",K,[u(be,null,{default:n((()=>[u(g,null,{default:n((()=>[u(o,{height:"480px"},{default:n((()=>[d((r(),i("div",{"infinite-scroll-disabled":m(fe),class:"infinite-list"},[(r(!0),i(f,null,v(ie.value,(e=>(r(),p(s,{key:e.id,shadow:"hover",class:c([{activeCard:pe.value===e.id},"infinite-list-item cursor-pointer"]),onClick:a=>(e=>{ue.value=e,ne.value=!1,pe.value=e.id,re.applicationId=e.applicationId,re.id=e.id})(e)},{default:n((()=>[_("h4",null,[u(G,{status:parseInt(e.applicationType),"status-list":te},null,8,["status"])]),_("h5",$,[_("span",null,j(e.flowOverTimeInfo.proposer.username),1),_("span",null,j(e.flowOverTimeInfo.createTime),1)])])),_:2},1032,["class","onClick"])))),128)),ne.value?(r(),p(t,{key:0,"border-style":"dashed"},{default:n((()=>[h(" Loading... ")])),_:1})):y("",!0),de.value?(r(),p(t,{key:1,"border-style":"dashed"},{default:n((()=>[h(" 加载完毕 ")])),_:1})):y("",!0)],8,Z)),[[Ie,ce]])])),_:1})])),_:1}),u(ye,null,{default:n((()=>[_("div",null,[u(w,{element:".flow-leave","open-tips":"审批表全屏",class:"absolute right-0"}),ne.value?(r(),p(l,{key:0,"image-size":200,description:"请点击左侧的待审批单查看数据"})):d((r(),p(o,{key:1,height:"450px"},{default:n((()=>[_("div",ee,[ae,d((r(),p(X,{title:"申请人信息",column:2,"label-align":"right"},{default:n((()=>[u(A,{label:"姓名"},{default:n((()=>[h(j(ue.value.flowOverTimeInfo.proposer.username),1)])),_:1}),u(A,{label:"手机号码"},{default:n((()=>[h(j(ue.value.flowOverTimeInfo.proposer.phoneNum),1)])),_:1}),u(A,{label:"部门"},{default:n((()=>[h(" Suzhou ")])),_:1}),u(A,{label:"职位"},{default:n((()=>[u(H,{size:"small"},{default:n((()=>[h(" School ")])),_:1})])),_:1})])),_:1})),[[xe,ne.value]]),u(X,{title:"申请表单",column:2,border:""},{default:n((()=>[u(A,{label:"申请时间"},{default:n((()=>[h(j(ue.value.flowOverTimeInfo.createTime),1)])),_:1}),u(A,{label:"加班时长"},{default:n((()=>[h(j(ue.value.flowOverTimeInfo.duration)+" 小时 ",1)])),_:1}),u(A,{label:"加班开始时间"},{default:n((()=>[h(j(ue.value.flowOverTimeInfo.startTime),1)])),_:1}),u(A,{label:"加班结束时间"},{default:n((()=>[h(j(ue.value.flowOverTimeInfo.endTime),1)])),_:1}),u(A,{label:"申请原因"},{default:n((()=>[h(j(ue.value.flowOverTimeInfo.reason),1)])),_:1})])),_:1}),le,u(he,{ref_key:"formRef",ref:se,model:re},{default:n((()=>[u(ve,{prop:"reason",rules:[{required:!0,message:"请输入审批意见",trigger:"blur"}]},{default:n((()=>[u(oe,{modelValue:re.reason,"onUpdate:modelValue":a[0]||(a[0]=e=>re.reason=e),rows:5,type:"textarea",placeholder:"请输入审批意见",maxlength:"30","show-word-limit":""},null,8,["modelValue"])])),_:1}),u(ve,null,{default:n((()=>[u(je,{type:"success",onClick:a[1]||(a[1]=e=>{var a;(a=se.value)&&a.validate((e=>{e?(re.approvalResult=0,me.value=!0,D(re).then((e=>{b.success(e.msg),_e(re.id)})).catch((e=>{b.error(e.msg)})).finally((()=>{me.value=!1,a.resetFields()}))):b.error("请输入审批意见")}))})},{default:n((()=>[h(" 通过 ")])),_:1}),u(je,{type:"danger",onClick:a[2]||(a[2]=e=>{var a;(a=se.value)&&a.validate((e=>{e?(me.value=!0,re.approvalResult=1,D(re).then((e=>{b.success(e.msg),_e(re.id)})).catch((e=>{b.error(e.msg)})).finally((()=>{me.value=!1,a.resetFields()}))):b.error("请输入审批意见")}))})},{default:n((()=>[h(" 拒绝 ")])),_:1})])),_:1})])),_:1},8,["model"])])])),_:1})),[[xe,me.value]])])])),_:1})])),_:1})]))])),[[xe,ne.value]]):y("",!0)])),_:1}),u(ge,{label:"已审批",name:"done"},{default:n((()=>["done"===Q.value?(r(),p(W,{key:0})):y("",!0)])),_:1})])),_:1},8,["modelValue"])])),_:1})])}}}),[["__scopeId","data-v-72ab4384"]]);export{te as default};
