import{d as e,ag as l,r as t,Q as s,B as r,a as i,c as o,C as a,w as n,W as u,ah as c,a4 as p,F as d,k as m,q as f,H as v,l as y,an as x}from"./index-af1b0f7f.js";import{E as h}from"./el-dialog-eb6eea03.js";import"./el-overlay-064fc03e.js";import{E as g}from"./el-scrollbar-122da2af.js";import{E as j}from"./el-divider-1bd339ed.js";import{E as w}from"./el-button-4c1bfddb.js";import{_ as k}from"./index.vue_vue_type_script_setup_true_lang-f927f1c6.js";import{E as _}from"./el-image-viewer-b98fed02.js";/* empty css                 *//* empty css               */import{E as b,a as C}from"./el-select-15637aa0.js";import"./el-popper-93d8741f.js";import{b as U,d as E}from"./index-e83e9938.js";import{E as T}from"./index-bc31f94d.js";import"./index-0053bafd.js";import"./event-15d81b97.js";import"./scroll-9ad6d206.js";import"./focus-trap-1edd113c.js";import"./refs-b2772767.js";import"./index-6ff256e8.js";import"./use-form-item-c127ca03.js";import"./index-9e5f34e5.js";import"./throttle-97af5aae.js";import"./debounce-8a611c37.js";import"./index-de5a0541.js";import"./index-b7e1e73a.js";import"./strings-a26e2dce.js";import"./isEqual-b39ef673.js";import"./_Uint8Array-e7b42d57.js";import"./index-8024eeb1.js";import"./validator-e168c632.js";import"./aria-49c72c55.js";const V={class:"app-container"},z=m("span",{class:"i-carbon-task-view mr-1"},null,-1),q=m("span",{class:"i-ph-pencil-line-light mr-1"},null,-1),H=m("span",{class:"i-material-symbols-delete-outline-rounded"},null,-1),O={class:"text-center"},L={class:"text-center"},M=m("strong",null,"发布者：",-1),$={class:"text-blue-400"},R=m("strong",{class:"ml-30px"},"发布时间：",-1),A=m("strong",{class:"ml-30px"},"类型：",-1),B=["innerHTML"],P={class:"flex flex-col justify-center items-center w-full h-full"},S={key:0,class:"w-226px h-173px"},I={key:0,class:"w-226px h-173px flex flex-col justify-center items-center"},N=["href"],W=["src"],D=e({name:"VxeTable"}),F=e({...D,setup(e){const D=l(),F=t(!1),G=t(null);t([]);const J=[{id:"0",value:"文档",type:""},{id:"1",value:"视频",type:"success"},{id:"2",value:"图片",type:"danger"}],K=t(),Q=t(),X=s({loading:!0,border:!0,autoResize:!0,showHeaderOverflow:!0,showOverflow:!0,keepSource:!0,columnConfig:{resizable:!0},pagerConfig:{align:"right"},formConfig:{items:[{field:"title",itemRender:{name:"$input",props:{placeholder:"请输入资料名称",clearable:!0}}},{field:"content",itemRender:{name:"$input",props:{placeholder:"请输入资料描述",clearable:!0}}},{field:"status",slots:{default:"type_item"}},{itemRender:{name:"$buttons",children:[{props:{type:"submit",content:"查询",status:"primary"}},{props:{type:"reset",content:"重置"}}]}}]},customConfig:{checkMethod:({column:e})=>!["username"].includes(e.field)},exportConfig:{modes:["current","selected","all"]},columns:[{type:"seq",width:"50px",title:"序号"},{field:"title",title:"资料标题",width:"370px"},{field:"content",title:"资料描述"},{title:"资料封面",slots:{default:"row-cover"}},{field:"creator.username",title:"发布者"},{field:"createTime",title:"发布时间"},{width:"80px",title:"资料类型",slots:{default:"row-type"}},{title:"操作",width:"210px",fixed:"right",showOverflow:!1,slots:{default:"row-operate"}}],proxyConfig:{seq:!0,form:!0,props:{total:"total"},ajax:{query:({page:e,form:l})=>(X.loading=!0,new Promise((t=>{let s=0,r=[];const i=e=>{if(e&&e.data){const l=e.data;Number.isInteger(l.total)&&(s=l.total),Array.isArray(l.records)&&(r=l.records,r.map((e=>Object.assign(e,{srcList:[e.coverUrl]}))))}X.loading=!1,t({total:s,result:r})},o={title:l.title||"",type:G.value||"",size:e.pageSize,current:e.currentPage,content:l.content||""};U(o).then(i).catch(i)})))}}});return(e,l)=>{const t=b,s=C,U=_,Y=k,Z=w,ee=r("vxe-grid"),le=j,te=g,se=h;return i(),o("div",V,[a(ee,d({ref_key:"xGridDom",ref:Q},X),{type_item:n((()=>[a(s,{modelValue:G.value,"onUpdate:modelValue":l[0]||(l[0]=e=>G.value=e),clearable:"",placeholder:"请选择资料类型"},{default:n((()=>[(i(),o(u,null,c(J,(e=>a(t,{key:e.id,label:e.value,value:e.id},null,8,["label","value"]))),64))])),_:1},8,["modelValue"])])),"row-cover":n((({row:e})=>[a(U,{style:{width:"60px",height:"40px"},src:e.coverUrl,"zoom-rate":1.2,fit:"contain",lazy:"","preview-src-list":e.srcList,"initial-index":0},null,8,["src","zoom-rate","preview-src-list"])])),"row-type":n((({row:e})=>[a(Y,{status:e.type,"status-list":J},null,8,["status"])])),"row-operate":n((({row:e})=>[a(Z,{link:"",type:"primary",onClick:l=>(e=>{F.value=!0,K.value=e})(e)},{default:n((()=>[z,p(" 预览 ")])),_:2},1032,["onClick"]),a(Z,{link:"",type:"warning",onClick:l=>(e=>{D.push({path:"/sys-study/edit",query:{id:null==e?void 0:e.id}})})(e)},{default:n((()=>[q,p(" 编辑 ")])),_:2},1032,["onClick"]),a(Z,{link:"",type:"danger",onClick:l=>(e=>{const l=`确定 <strong style='color:red;'>删除</strong> 资料 <strong style='color:#409eff;'>${e.title}</strong> ？`;T.confirm(l,"提示",{type:"error",showClose:!0,closeOnClickModal:!0,closeOnPressEscape:!0,cancelButtonText:"取消",confirmButtonText:"确定",dangerouslyUseHTMLString:!0}).then((()=>{E(e.id).then((()=>{x.success("删除成功"),D.go(0)})).catch((()=>1))})).catch((()=>1))})(e)},{default:n((()=>[H,p(" 删除 ")])),_:2},1032,["onClick"])])),_:1},16),a(se,{modelValue:F.value,"onUpdate:modelValue":l[1]||(l[1]=e=>F.value=e),"destroy-on-close":"",width:"70%",title:"资料预览"},{default:n((()=>[a(te,{height:"400px"},{default:n((()=>{var e,l,t,s,r,u,c,d,x,h,g,j,w,k,_;return[m("h2",O,f(null==(e=K.value)?void 0:e.title),1),m("h4",L,[M,p(),m("span",$,f(null==(l=K.value)?void 0:l.creator.username),1),R,p(f(null==(t=K.value)?void 0:t.createTime)+" ",1),A,p(),a(Y,{status:null==(s=K.value)?void 0:s.type,"status-list":J},null,8,["status"])]),a(le,{"border-style":"dotted"},{default:n((()=>[p(" 正文 ")])),_:1}),m("section",{class:"flex flex-col justify-center items-center",innerHTML:null==(r=K.value)?void 0:r.content},null,8,B),m("section",P,[0===(null==(u=K.value)?void 0:u.type)&&(null==(c=K.value)?void 0:c.fileUrl)?(i(),o("div",S,[0===K.value.type&&(null==(d=K.value)?void 0:d.fileUrl)?(i(),o("div",I,[p(" pdf文件暂时无法展示，请直接下载 "),m("a",{target:"_blank",href:`${null==(x=K.value)?void 0:x.fileUrl}`},[a(Z,{type:"primary",link:""},{default:n((()=>[p(" 下载 ")])),_:1})],8,N)])):v("",!0)])):v("",!0),1===(null==(h=K.value)?void 0:h.type)&&(null==(g=K.value)?void 0:g.fileUrl)?(i(),o("video",{key:1,class:"w-60 h-40",src:null==(j=K.value)?void 0:j.fileUrl,controls:""},null,8,W)):v("",!0),2===(null==(w=K.value)?void 0:w.type)&&(null==(k=K.value)?void 0:k.fileUrl)?(i(),y(U,{key:2,class:"w-226px h-173px",src:null==(_=K.value)?void 0:_.fileUrl,lazy:"","preview-src-list":"[studyInfo?.fileUrl]","initial-index":0,fit:"contain"},null,8,["src"])):v("",!0)])]})),_:1})])),_:1},8,["modelValue"])])}}});export{F as default};
