import{d as e,ad as l,r as a,aV as s,Q as t,o,a as r,c as i,D as d,l as n,w as u,C as m,W as p,ah as c,a4 as f,q as g,k as j,an as y}from"./index-2b9e942f.js";import{v as V}from"./el-loading-3c10908a.js";import{E as b}from"./el-dialog-73760f8c.js";import"./el-overlay-45055e12.js";import{E as v}from"./el-card-ffa2c3c9.js";import{a as _,E as w}from"./el-form-item-9ef50f22.js";import{E as x}from"./el-button-4ba8563a.js";import{E as h}from"./el-input-number-ecaac66f.js";/* empty css                 *//* empty css                       */import{E as I,a as q}from"./el-radio-371ff127.js";import{a as C}from"./utils-2993afc8.js";import{a as U,e as Q,b as k}from"./index-4c08d45b.js";import{E}from"./index-32efc5c0.js";import"./index-d57c4075.js";import"./event-15d81b97.js";import"./scroll-92931c15.js";import"./focus-trap-e29a6647.js";import"./refs-872a5d31.js";import"./index-9dedcc78.js";import"./use-form-item-55331cc2.js";import"./_Uint8Array-fb59223e.js";import"./_initCloneObject-211d1c84.js";import"./index-6aa2818d.js";import"./index-d63fe3b9.js";const L=j("strong",null,"题目：",-1),z=e({__name:"index",setup(e){const z=l(),Y=a("default"),D=a(),F=a(!1),H=a(!1),O=C(),T=s(new Date,"YYYY-MM-DD HH:mm:ss").value,M=t({id:O,title:"你喜欢加班吗",type:0,score:10,answerId:"",sort:0,tag:"测试",answerContent:"测试",sysQuestionItemList:[{id:C(),content:"喜欢",questionId:O,sort:"1",des:"",createTime:T},{id:C(),content:"不喜欢",questionId:O,sort:"2",des:"",createTime:T}]}),A=t({title:[{required:!0,message:"请输入题干信息",trigger:"blur"},{min:3,max:50,message:"字数在3-50内",trigger:"blur"}],sysQuestionItemList:[{type:"array",required:!0,message:"请添加相关选项",trigger:"change"}],answerId:[{required:!0,message:"请给出标准答案",trigger:"change"}],answerContent:[{required:!0,message:"给出题目解析",trigger:"blur"}],tag:[{required:!0,message:"给出题目知识点",trigger:"blur"}],score:[{required:!0,message:"给出题目分数",trigger:"blur"}]}),B=()=>{void 0!==z.query.id&&U(z.query.id).then((e=>Object.assign(M,e.data)))};return o((()=>{B()})),(e,l)=>{const a=E,s=_,t=I,o=q,C=h,U=x,O=w,T=v,R=b,W=V;return r(),i("div",null,[d((r(),n(T,{class:"app-container m-5"},{default:u((()=>[m(O,{ref_key:"singleChoiceFormRef",ref:D,model:M,rules:A,"label-width":"130px",class:"demo-singleChoiceForm",size:Y.value,"status-icon":""},{default:u((()=>[m(s,{label:"题干",prop:"title"},{default:u((()=>[m(a,{modelValue:M.title,"onUpdate:modelValue":l[0]||(l[0]=e=>M.title=e)},null,8,["modelValue"])])),_:1}),m(s,{label:"题目选项"},{default:u((()=>[m(o,{modelValue:M.sysQuestionItemList[0].id,"onUpdate:modelValue":l[1]||(l[1]=e=>M.sysQuestionItemList[0].id=e),class:"flex flex-col"},{default:u((()=>[(r(!0),i(p,null,c(null==M?void 0:M.sysQuestionItemList,((e,l)=>(r(),i("li",{key:e.id,class:"m-0 flex"},[m(t,{label:l,size:"large",disabled:""},null,8,["label"]),m(a,{modelValue:e.content,"onUpdate:modelValue":l=>e.content=l,class:"w-100 m-2",size:"small"},null,8,["modelValue","onUpdate:modelValue"])])))),128))])),_:1},8,["modelValue"])])),_:1}),m(s,{label:"标准答案",prop:"answerId"},{default:u((()=>[m(o,{modelValue:M.answerId,"onUpdate:modelValue":l[2]||(l[2]=e=>M.answerId=e)},{default:u((()=>[(r(!0),i(p,null,c(null==M?void 0:M.sysQuestionItemList,(e=>(r(),n(t,{key:e.id,label:e.id,size:"large"},{default:u((()=>[f(g(e.content),1)])),_:2},1032,["label"])))),128))])),_:1},8,["modelValue"])])),_:1}),m(s,{label:"分数",prop:"score"},{default:u((()=>[m(C,{modelValue:M.score,"onUpdate:modelValue":l[3]||(l[3]=e=>M.score=e),precision:2,step:.1,max:20,min:0},null,8,["modelValue","step"])])),_:1}),m(s,{label:"题目解析",prop:"answerContent"},{default:u((()=>[m(a,{modelValue:M.answerContent,"onUpdate:modelValue":l[4]||(l[4]=e=>M.answerContent=e),rows:3,type:"textarea"},null,8,["modelValue"])])),_:1}),m(s,{label:"知识点",prop:"tag"},{default:u((()=>[m(a,{modelValue:M.tag,"onUpdate:modelValue":l[5]||(l[5]=e=>M.tag=e)},null,8,["modelValue"])])),_:1}),m(s,null,{default:u((()=>[m(U,{type:"primary",onClick:l[6]||(l[6]=e=>(async e=>{e&&await e.validate((e=>{H.value=!0,e?void 0!==z.query.id?Q(M).then((e=>y.success(e.msg))).catch((e=>y.error(e.msg))).finally((()=>{H.value=!1,B()})):k(M).then((e=>y.success(e.msg))).catch((e=>y.error(e.msg))).finally((()=>{H.value=!1,D.value.resetFields()})):y.error("提交失败，请把数据补充完整"),H.value=!1}))})(D.value))},{default:u((()=>[f(" 提交 ")])),_:1}),m(U,{onClick:l[7]||(l[7]=e=>{var l;(l=D.value)&&l.resetFields()})},{default:u((()=>[f(" 重置 ")])),_:1}),m(U,{type:"success",onClick:l[8]||(l[8]=e=>F.value=!0)},{default:u((()=>[f(" 预览 ")])),_:1})])),_:1})])),_:1},8,["model","rules","size"])])),_:1})),[[W,H.value]]),m(R,{modelValue:F.value,"onUpdate:modelValue":l[9]||(l[9]=e=>F.value=e),"destroy-on-close":"",width:"370px",title:"题目预览"},{default:u((()=>[j("h3",null,[L,f(" "+g(null==M?void 0:M.title),1)]),(r(!0),i(p,null,c(null==M?void 0:M.sysQuestionItemList,(e=>(r(),i("p",{key:e.id,class:"m-0"},[m(t,{label:e.id,size:"large"},{default:u((()=>[f(g(e.content),1)])),_:2},1032,["label"])])))),128))])),_:1},8,["modelValue"])])}}});export{z as default};
