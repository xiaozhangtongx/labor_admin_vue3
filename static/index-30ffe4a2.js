import{bg as e,d as t,ag as l,r,Q as a,B as s,a as o,c as i,C as n,w as p,W as u,ah as d,a4 as c,F as m,k as f,an as g}from"./index-442db11c.js";import{E as y}from"./el-button-6cab2065.js";import{_ as h}from"./index.vue_vue_type_script_setup_true_lang-9f553fa8.js";/* empty css                 */import"./el-tag-011e2015.js";import{E as v,a as x}from"./el-select-1d1f3054.js";import"./el-scrollbar-8102c0d4.js";import"./el-popper-f2b04c8d.js";import{E as j}from"./index-654dfca9.js";import"./index-21a87288.js";import"./index-43c84df1.js";import"./focus-trap-1ae2c557.js";import"./index-b8912c04.js";import"./strings-929788f0.js";import"./scroll-327f18e0.js";import"./isEqual-34ff0f4b.js";import"./debounce-7bbe3209.js";import"./validator-fc4b1283.js";import"./index-5cf9a293.js";import"./aria-49c72c55.js";import"./index-78074203.js";const w={class:"app-container"},b=f("span",{class:"i-carbon-task-view mr-1"},null,-1),k=f("span",{class:"i-ph-pencil-line-light mr-1"},null,-1),C=f("span",{class:"i-material-symbols-delete-outline-rounded"},null,-1),_=t({name:"VxeTable"}),P=t({..._,setup(t){const f=l(),_=r(!1),P=r(null),O=[{id:"0",value:"未开始",type:""},{id:"1",value:"正在进行",type:"success"},{id:"2",value:"已过期",type:"info"}],T=r(),q=t=>{const l=`确定 <strong style='color:red;'>删除</strong> 试卷 <strong style='color:#409eff;'>${t.title}</strong> ？`;j.confirm(l,"提示",{type:"error",showClose:!0,closeOnClickModal:!0,closeOnPressEscape:!0,cancelButtonText:"取消",confirmButtonText:"确定",dangerouslyUseHTMLString:!0}).then((()=>{var l;(l=t.id,e({url:`sys-exam/delete/${l}`,method:"delete"})).then((()=>{g.success("删除成功"),E()})).catch((()=>1))})).catch((()=>1))},E=()=>{var e,t;const l=V.value.getData(),r=null==(t=null==(e=V.value)?void 0:e.getProxyInfo())?void 0:t.pager;r&&r.currentPage>1&&1===l.length&&--r.currentPage},V=r(),$=a({loading:!0,border:!0,autoResize:!0,showHeaderOverflow:!0,showOverflow:!0,keepSource:!0,columnConfig:{resizable:!0},pagerConfig:{align:"right"},formConfig:{items:[{field:"title",itemRender:{name:"$input",props:{placeholder:"请输入试卷标题",clearable:!0}}},{field:"creator",itemRender:{name:"$input",props:{placeholder:"请输入相关组卷人",clearable:!0}}},{field:"status",slots:{default:"type_item"}},{itemRender:{name:"$buttons",children:[{props:{type:"submit",content:"查询",status:"primary"}},{props:{type:"reset",content:"重置"}}]}}]},customConfig:{checkMethod:({column:e})=>!["username"].includes(e.field)},exportConfig:{modes:["current","selected","all"]},columns:[{type:"seq",width:"50px",title:"序号"},{field:"title",title:"试卷名称",width:"370px"},{field:"duration",title:"考试时长（h）"},{field:"creator",title:"组卷人"},{field:"createTime",title:"创建时间"},{width:"80px",title:"状态",slots:{default:"row-type"}},{title:"操作",width:"210px",fixed:"right",showOverflow:!1,slots:{default:"row-operate"}}],proxyConfig:{seq:!0,form:!0,props:{total:"total"},ajax:{query:({page:t,form:l})=>($.loading=!0,new Promise((r=>{let a=0,s=[];const o=e=>{if(e&&e.data){const t=e.data;Number.isInteger(t.total)&&(a=t.total),Array.isArray(t.records)&&(s=t.records)}$.loading=!1,r({total:a,result:s})};(function(t){return e({url:"sys-exam/list",method:"get",params:t})})({title:l.title||"",status:P.value||"",creator:l.creator||"",size:t.pageSize,current:t.currentPage}).then(o).catch(o)})))}}});return(e,t)=>{const l=v,r=x,a=h,g=y,j=s("vxe-grid");return o(),i("div",w,[n(j,m({ref_key:"xGridDom",ref:V},$),{type_item:p((()=>[n(r,{modelValue:P.value,"onUpdate:modelValue":t[0]||(t[0]=e=>P.value=e),clearable:"",placeholder:"请选择试卷状态"},{default:p((()=>[(o(),i(u,null,d(O,(e=>n(l,{key:e.id,label:e.value,value:e.id},null,8,["label","value"]))),64))])),_:1},8,["modelValue"])])),"row-type":p((({row:e})=>[n(a,{status:parseInt(e.status||"0"),"status-list":O},null,8,["status"])])),"row-operate":p((({row:e})=>[n(g,{link:"",type:"primary",onClick:t=>(e=>{_.value=!0,T.value=e})(e)},{default:p((()=>[b,c(" 预览 ")])),_:2},1032,["onClick"]),n(g,{link:"",type:"warning",onClick:t=>(e=>{f.push({path:"/sys-exam/edit",query:{id:null==e?void 0:e.id}})})(e)},{default:p((()=>[k,c(" 编辑 ")])),_:2},1032,["onClick"]),n(g,{link:"",type:"danger",onClick:t=>q(e)},{default:p((()=>[C,c(" 删除 ")])),_:2},1032,["onClick"])])),_:1},16)])}}});export{P as default};
