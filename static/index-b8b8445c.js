import{d as e,r as a,ac as l,Q as s,y as t,o,a as r,c as i,C as n,w as u,D as d,l as f,f as p,W as m,ah as v,n as c,k as _,q as j,a4 as I,H as h,an as y,ap as b,aq as g}from"./index-9a706b5e.js";import{v as w}from"./el-loading-9a7b0add.js";import{E as C}from"./el-infinite-scroll-d3dc43a2.js";import{_ as x,E as k,a as E}from"./el-tab-pane-e518be7b.js";import{a as T,b as V,E as z}from"./el-main-01042501.js";import{a as F,E as R}from"./el-form-item-ea286b40.js";import{E as q}from"./el-button-cb2bce56.js";/* empty css                 */import{E as U,a as A}from"./el-descriptions-item-2ae00c61.js";/* empty css               */import{E as D}from"./el-scrollbar-c33e6783.js";import{E as H}from"./el-divider-333d043c.js";import{E as L}from"./el-card-1dc32f2e.js";import{_ as N}from"./index.vue_vue_type_script_setup_true_lang-ee812c46.js";import{E as O}from"./el-empty-b0b44d58.js";import{_ as P}from"./FinishList.vue_vue_type_script_setup_true_lang-b2ac46e7.js";import{g as Q,s as S}from"./index-5f4cd0c2.js";import{u as W}from"./utils-bb4bb7e7.js";import{E as G}from"./index-69566457.js";import{E as J}from"./index-e3536c2f.js";import{_ as K}from"./_plugin-vue_export-helper-1b428a4d.js";import"./throttle-3e85fe79.js";import"./debounce-de061bf0.js";import"./event-15d81b97.js";import"./scroll-8c03f05f.js";import"./strings-0eeb67c0.js";import"./index-e896acad.js";import"./el-overlay-d6f3b381.js";import"./use-form-item-14a057db.js";import"./el-tooltip-4ed993c7.js";import"./el-popper-9f38ba83.js";import"./focus-trap-4f47c9e6.js";import"./index-e0de4d31.js";import"./_Uint8Array-c1224f14.js";import"./_initCloneObject-ee341c84.js";import"./el-dialog-94ce5d08.js";import"./refs-b9a36019.js";import"./index-c887b90a.js";const X=e=>(b("data-v-cfb02f7a"),e=e(),g(),e),Y={class:"app-container"},$={key:0},B={key:1,class:"common-layout"},M=["infinite-scroll-disabled"],Z={class:"flex justify-between w-60 text-gray-500"},ee={class:"flow-leave"},ae=X((()=>_("h2",{class:"flex justify-center items-center"}," 审批表 ",-1))),le=X((()=>_("h4",{class:"mt-2"}," 审批意见 ",-1))),se=e({name:"ElementPlus"}),te=K(e({...se,setup(e){var b,g;const K=a("todo"),X=l(),se=a(),te=[{id:0,type:"",value:"病假"},{id:1,type:"success",value:"婚假"},{id:2,type:"info",value:"丧假"},{id:3,type:"warning",value:"产假"},{id:4,type:"danger",value:"其它"}],oe=s({approverId:null==(b=X.userInfo)?void 0:b.id,status:1,applicationType:"1",current:0,size:5}),re=s({id:"",applicationId:"",approverId:(null==(g=X.userInfo)?void 0:g.id)||"",approvalResult:0,reason:"",applicationType:"1"}),ie=a([]),ne=a(),ue=a(!0),de=a(!1),fe=a(""),pe=a(!1),me=t((()=>ue.value||de.value)),ve=()=>{ue.value=!0,Q(oe).then((e=>{var a;const l=[...ie.value,...e.data.records];ie.value=[...W(l)],ne.value=ie.value[0],fe.value=(null==(a=ne.value)?void 0:a.id)||"",ue.value=!1,oe.current++,e.data.total<=ie.value.length&&(de.value=!0)}))},ce=()=>{ve()},_e=e=>{ie.value=ie.value.filter((a=>a.id!==e))};return o((()=>{ve()})),(e,a)=>{const l=O,s=N,t=L,o=H,b=D,g=T,Q=x,W=U,X=G,oe=A,ve=J,je=F,Ie=q,he=R,ye=V,be=z,ge=k,we=E,Ce=C,xe=w;return r(),i("div",Y,[n(t,{shadow:"never"},{default:u((()=>[n(we,{modelValue:K.value,"onUpdate:modelValue":a[3]||(a[3]=e=>K.value=e),class:"demo-tabs"},{default:u((()=>[n(ge,{label:"待审批",name:"todo"},{default:u((()=>["todo"===K.value?d((r(),i("div",$,[0===ie.value.length?(r(),f(l,{key:0,"image-size":200,class:"h-120",description:"你已经全部审批完了"})):(r(),i("div",B,[n(be,null,{default:u((()=>[n(g,null,{default:u((()=>[n(b,{height:"480px"},{default:u((()=>[d((r(),i("div",{"infinite-scroll-disabled":p(me),class:"infinite-list"},[(r(!0),i(m,null,v(ie.value,(e=>(r(),f(t,{key:e.id,shadow:"hover",class:c([{activeCard:fe.value===e.id},"infinite-list-item cursor-pointer"]),onClick:a=>(e=>{ne.value=e,ue.value=!1,fe.value=e.id,re.applicationId=e.applicationId,re.id=e.id})(e)},{default:u((()=>[_("h4",null,[n(s,{status:parseInt(e.flowCancelInfo.leaveInfo.leaveType),"status-list":te},null,8,["status"])]),_("h5",Z,[_("span",null,j(e.flowCancelInfo.leaveInfo.proposer.username),1),_("span",null,j(e.flowCancelInfo.createTime),1)])])),_:2},1032,["class","onClick"])))),128)),de.value?(r(),f(o,{key:0,"border-style":"dashed"},{default:u((()=>[I(" 加载完毕 ")])),_:1})):h("",!0)],8,M)),[[Ce,ce]])])),_:1})])),_:1}),n(ye,null,{default:u((()=>[_("div",null,[n(Q,{element:".flow-leave","open-tips":"审批表全屏",class:"absolute right-0"}),ue.value?(r(),f(l,{key:0,"image-size":200,description:"请点击左侧的待审批单查看数据"})):d((r(),f(b,{key:1,height:"450px"},{default:u((()=>[_("div",ee,[ae,d((r(),f(oe,{title:"申请人信息",column:2,"label-align":"right"},{default:u((()=>[n(W,{label:"姓名"},{default:u((()=>[I(j(ne.value.flowCancelInfo.leaveInfo.proposer.username),1)])),_:1}),n(W,{label:"手机号码"},{default:u((()=>[I(j(ne.value.flowCancelInfo.leaveInfo.proposer.phoneNum),1)])),_:1}),n(W,{label:"部门"},{default:u((()=>[I(" Suzhou ")])),_:1}),n(W,{label:"职位"},{default:u((()=>[n(X,{size:"small"},{default:u((()=>[I(" School ")])),_:1})])),_:1})])),_:1})),[[xe,ue.value]]),n(oe,{title:"请假表单",column:2,border:""},{default:u((()=>[n(W,{label:"申请时间"},{default:u((()=>[I(j(ne.value.flowCancelInfo.leaveInfo.createTime),1)])),_:1}),n(W,{label:"请假时长"},{default:u((()=>[I(j(ne.value.flowCancelInfo.leaveInfo.duration)+" 天 ",1)])),_:1}),n(W,{label:"请假开始时间"},{default:u((()=>[I(j(ne.value.flowCancelInfo.leaveInfo.startTime),1)])),_:1}),n(W,{label:"请假结束时间"},{default:u((()=>[I(j(ne.value.flowCancelInfo.leaveInfo.endTime),1)])),_:1}),n(W,{label:"请假原因"},{default:u((()=>[I(j(ne.value.flowCancelInfo.leaveInfo.reason),1)])),_:1})])),_:1}),n(oe,{title:"销假表单",column:2,border:"",class:"mt-2"},{default:u((()=>[n(W,{label:"申请时间"},{default:u((()=>[I(j(ne.value.flowCancelInfo.createTime),1)])),_:1}),n(W,{label:"更新时间"},{default:u((()=>[I(j(ne.value.flowCancelInfo.updateTime||ne.value.flowCancelInfo.createTime),1)])),_:1}),n(W,{label:"申请原因"},{default:u((()=>[I(j(ne.value.flowCancelInfo.leaveInfo.reason),1)])),_:1})])),_:1}),le,n(he,{ref_key:"formRef",ref:se,model:re},{default:u((()=>[n(je,{prop:"reason",rules:[{required:!0,message:"请输入审批意见",trigger:"blur"}]},{default:u((()=>[n(ve,{modelValue:re.reason,"onUpdate:modelValue":a[0]||(a[0]=e=>re.reason=e),rows:5,type:"textarea",placeholder:"请输入审批意见",maxlength:"30","show-word-limit":""},null,8,["modelValue"])])),_:1}),n(je,null,{default:u((()=>[n(Ie,{type:"success",onClick:a[1]||(a[1]=e=>{var a;(a=se.value)&&a.validate((e=>{e?(re.approvalResult=0,pe.value=!0,S(re).then((e=>{y.success(e.msg),_e(re.id)})).catch((e=>{y.error(e.msg)})).finally((()=>{pe.value=!1,a.resetFields()}))):y.error("请输入审批意见")}))})},{default:u((()=>[I(" 通过 ")])),_:1}),n(Ie,{type:"danger",onClick:a[2]||(a[2]=e=>{var a;(a=se.value)&&a.validate((e=>{e?(pe.value=!0,re.approvalResult=1,S(re).then((e=>{y.success(e.msg),_e(re.id)})).catch((e=>{y.error(e.msg)})).finally((()=>{pe.value=!1,a.resetFields()}))):y.error("请输入审批意见")}))})},{default:u((()=>[I(" 拒绝 ")])),_:1})])),_:1})])),_:1},8,["model"])])])),_:1})),[[xe,pe.value]])])])),_:1})])),_:1})]))])),[[xe,ue.value]]):h("",!0)])),_:1}),n(ge,{label:"已审批",name:"done"},{default:u((()=>["done"===K.value?(r(),f(P,{key:0})):h("",!0)])),_:1})])),_:1},8,["modelValue"])])),_:1})])}}}),[["__scopeId","data-v-cfb02f7a"]]);export{te as default};
