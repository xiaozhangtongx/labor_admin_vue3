import{d as e,ad as l,r as s,b7 as t,Q as a,o,a as i,c as r,D as n,l as d,w as u,C as m,W as c,ah as p,a4 as g,q as f,k as y,an as V}from"./index-767da184.js";import{v as b}from"./el-loading-33c76387.js";import{E as v}from"./el-dialog-43e6a1da.js";import"./el-overlay-57158c24.js";import{E as I}from"./el-card-6cc15945.js";import{a as _,E as j}from"./el-form-item-fe019f9e.js";import{E as w}from"./el-input-number-d076ae12.js";/* empty css                 *//* empty css                       */import{E as x}from"./el-button-54b31ba4.js";import{E as h,a as q}from"./el-radio-b91e229b.js";import{g as C}from"./utils-6cebd9eb.js";import{a as Q,e as k,b as L}from"./index-404e910c.js";import{E as U}from"./index-42653005.js";import"./focus-trap-b48b5c02.js";import"./index-3bd3858b.js";import"./scroll-9d8dc3b9.js";import"./index-827f1ca0.js";import"./index-c18661a7.js";const z=y("strong",null,"题目：",-1),E=e({__name:"index",setup(e){const E=l(),T=s("default"),D=s(),F=s(!1),Y=s(!1),H=C(),M=t(new Date,"YYYY-MM-DD HH:mm:ss").value,O=a({id:H,title:"您的学校是",type:1,score:10,answerId:"",sort:0,tag:"测试",answerContent:"测试",sysQuestionItemList:[{id:C(),content:"武汉大学",questionId:H,sort:"1",des:"",createTime:M},{id:C(),content:"武汉理工大学",questionId:H,sort:"2",des:"",createTime:M},{id:C(),content:"华中科技大学",questionId:H,sort:"3",des:"",createTime:M},{id:C(),content:"华中师范大学",questionId:H,sort:"4",des:"",createTime:M}]}),$=a({title:[{required:!0,message:"请输入题干信息",trigger:"blur"},{min:3,max:50,message:"字数在3-50内",trigger:"blur"}],sysQuestionItemList:[{type:"array",required:!0,message:"请添加相关选项",trigger:"change"}],answerId:[{required:!0,message:"请给出标准答案",trigger:"change"}],answerContent:[{required:!0,message:"给出题目解析",trigger:"blur"}],tag:[{required:!0,message:"给出题目知识点",trigger:"blur"}],score:[{required:!0,message:"给出题目分数",trigger:"blur"}]}),R=()=>{""!==E.query.id&&Q(E.query.id).then((e=>Object.assign(O,e.data)))};return o((()=>{R()})),(e,l)=>{const s=U,t=_,a=h,o=x,Q=q,H=w,S=j,W=I,X=v,A=b;return i(),r("div",null,[n((i(),d(W,{class:"app-container m-5"},{default:u((()=>[m(S,{ref_key:"singleChoiceFormRef",ref:D,model:O,rules:$,"label-width":"130px",class:"demo-singleChoiceForm",size:T.value,"status-icon":""},{default:u((()=>[m(t,{label:"题干",prop:"title"},{default:u((()=>[m(s,{modelValue:O.title,"onUpdate:modelValue":l[0]||(l[0]=e=>O.title=e)},null,8,["modelValue"])])),_:1}),m(t,{label:"题目选项",prop:"sysQuestionItemList"},{default:u((()=>[m(Q,{modelValue:O.sysQuestionItemList[0].id,"onUpdate:modelValue":l[1]||(l[1]=e=>O.sysQuestionItemList[0].id=e),class:"flex flex-col"},{default:u((()=>[(i(!0),r(c,null,p(null==O?void 0:O.sysQuestionItemList,((e,l)=>(i(),r("li",{key:e.id,class:"m-0 flex"},[m(a,{label:l,size:"large",disabled:""},null,8,["label"]),m(s,{modelValue:e.content,"onUpdate:modelValue":l=>e.content=l,class:"w-100 m-2",size:"small"},null,8,["modelValue","onUpdate:modelValue"]),m(o,{type:"danger",class:"ml-3 mt-2",size:"small",onClick:l=>{return s=e.id,void(O.sysQuestionItemList=O.sysQuestionItemList.filter((e=>e.id!==s)));var s}},{default:u((()=>[g(" 删除 ")])),_:2},1032,["onClick"])])))),128))])),_:1},8,["modelValue"])])),_:1}),m(t,{label:"标准答案",prop:"answerId"},{default:u((()=>[m(Q,{modelValue:O.answerId,"onUpdate:modelValue":l[2]||(l[2]=e=>O.answerId=e)},{default:u((()=>[(i(!0),r(c,null,p(null==O?void 0:O.sysQuestionItemList,(e=>(i(),d(a,{key:e.id,label:e.id,size:"large"},{default:u((()=>[g(f(e.content),1)])),_:2},1032,["label"])))),128))])),_:1},8,["modelValue"])])),_:1}),m(t,{label:"分数",prop:"score"},{default:u((()=>[m(H,{modelValue:O.score,"onUpdate:modelValue":l[3]||(l[3]=e=>O.score=e),precision:2,step:.1,max:20,min:0},null,8,["modelValue","step"])])),_:1}),m(t,{label:"题目解析",prop:"answerContent"},{default:u((()=>[m(s,{modelValue:O.answerContent,"onUpdate:modelValue":l[4]||(l[4]=e=>O.answerContent=e),rows:3,type:"textarea"},null,8,["modelValue"])])),_:1}),m(t,{label:"知识点",prop:"tag"},{default:u((()=>[m(s,{modelValue:O.tag,"onUpdate:modelValue":l[5]||(l[5]=e=>O.tag=e)},null,8,["modelValue"])])),_:1}),m(t,null,{default:u((()=>[m(o,{type:"primary",onClick:l[6]||(l[6]=e=>(async e=>{e&&await e.validate((e=>{Y.value=!0,e?""!==E.query.id?k(O).then((e=>V.success(e.msg))).catch((e=>V.error(e.msg))).finally((()=>{Y.value=!1,R()})):L(O).then((e=>V.success(e.msg))).catch((e=>V.error(e.msg))).finally((()=>{Y.value=!1,D.value.resetFields()})):V.error("提交失败，请把数据补充完整"),Y.value=!1}))})(D.value))},{default:u((()=>[g(" 提交 ")])),_:1}),m(o,{onClick:l[7]||(l[7]=e=>{var l;(l=D.value)&&l.resetFields()})},{default:u((()=>[g(" 重置 ")])),_:1}),m(o,{type:"success",onClick:l[8]||(l[8]=e=>(()=>{const e={id:C(),content:"",questionId:O.id,sort:`${O.sysQuestionItemList.length+1}`,des:"",createTime:M};O.sysQuestionItemList.push(e)})())},{default:u((()=>[g(" 添加选项 ")])),_:1}),m(o,{type:"success",onClick:l[9]||(l[9]=e=>F.value=!0)},{default:u((()=>[g(" 预览 ")])),_:1})])),_:1})])),_:1},8,["model","rules","size"])])),_:1})),[[A,Y.value]]),m(X,{modelValue:F.value,"onUpdate:modelValue":l[10]||(l[10]=e=>F.value=e),"destroy-on-close":"",width:"370px",title:"题目预览"},{default:u((()=>[y("h3",null,[z,g(" "+f(null==O?void 0:O.title),1)]),(i(!0),r(c,null,p(null==O?void 0:O.sysQuestionItemList,(e=>(i(),r("p",{key:e.id,class:"m-0"},[m(a,{label:e.id,size:"large"},{default:u((()=>[g(f(e.content),1)])),_:2},1032,["label"])])))),128))])),_:1},8,["modelValue"])])}}});export{E as default};
