import{d as e,r as l,Q as a,ag as t,o,B as r,D as u,a as d,c as i,C as s,w as m,a4 as n,q as p,l as c,k as f,n as b,H as h,W as _,ah as g,b8 as j,a2 as v,b9 as w,an as y,ba as V,bb as x,ap as k,aq as T}from"./index-2b9e942f.js";import{v as U}from"./el-loading-3c10908a.js";import{E as C}from"./el-dialog-73760f8c.js";import"./el-overlay-45055e12.js";import{E as I}from"./el-input-number-ecaac66f.js";/* empty css                 *//* empty css                       */import{E,a as P}from"./el-radio-371ff127.js";/* empty css               */import{E as N,a as q}from"./el-select-a4cfa4aa.js";import"./el-scrollbar-a8bdb3de.js";import"./el-popper-b2d759cd.js";import{E as z,a as F}from"./el-table-column-bf3bbb8c.js";/* empty css                    */import"./el-tooltip-4ed993c7.js";import{E as B}from"./el-divider-d5133940.js";import{E as L}from"./el-button-4ba8563a.js";import{a as O,E as R}from"./el-form-item-9ef50f22.js";import{E as W}from"./index-b50974fd.js";import{E as $}from"./index-910faca8.js";import{E as A}from"./index-32efc5c0.js";import{_ as D}from"./_plugin-vue_export-helper-1b428a4d.js";import"./index-d57c4075.js";import"./event-15d81b97.js";import"./scroll-92931c15.js";import"./focus-trap-e29a6647.js";import"./refs-872a5d31.js";import"./index-9dedcc78.js";import"./use-form-item-55331cc2.js";import"./index-6aa2818d.js";import"./strings-77b070ee.js";import"./isEqual-456ab519.js";import"./_Uint8Array-fb59223e.js";import"./debounce-8e1f8eac.js";import"./index-17735892.js";import"./validator-6dddb1ee.js";import"./_initCloneObject-211d1c84.js";import"./isArrayLikeObject-e5e18108.js";import"./_overRest-eaaa482f.js";import"./_baseFlatten-b41864b9.js";import"./index-9510a6c0.js";import"./flatten-7f530804.js";import"./aria-49c72c55.js";import"./index-d63fe3b9.js";const H=e=>(k("data-v-206c8c87"),e=e(),T(),e),J={class:"app-container bg-white m-5"},K=H((()=>f("span",{class:"i-ph-pencil-line-light mr-1"},null,-1))),Q=H((()=>f("span",{class:"i-material-symbols-delete-outline-rounded mr-1"},null,-1))),G=D(e({__name:"index",setup(e){const k=l(!1),T=l(),D=l(!1),H=l(!0),G=l(!0),M=l([]),X=l([]),Y=a({id:"",menuTitle:"",menuPerms:"",menuIcon:"",menuPath:"",component:"",menuType:0,status:0,orderNum:0,redirect:"",parentId:"",menuName:"",hidden:1}),Z=t(),S=async()=>{k.value=!0;const{data:e}=await j();M.value=[...e],X.value=[{id:"0",menuTitle:"根节点"},...e],k.value=!1},ee=async()=>{G.value=!1,H.value=!H.value,await v(),G.value=!0};o((()=>{S()}));const le=a({parentId:[{required:!0,message:"请选择上级菜单",trigger:"blur"}],menuTitle:[{required:!0,message:"请输入名称",trigger:"blur"}],menuName:[{required:!0,message:"请输入标识",trigger:"blur"}],menuPerms:[{required:!0,message:"请输入权限编码",trigger:"blur"}],menuType:[{required:!0,message:"请选择状态",trigger:"blur"}],status:[{required:!0,message:"请选择状态",trigger:"blur"}],hidden:[{required:!0,message:"请选择是否展示",trigger:"blur"}]});return(e,l)=>{const a=r("vxe-button"),t=O,o=R,j=z,v=$,ae=L,te=B,oe=F,re=N,ue=q,de=A,ie=E,se=P,me=I,ne=C,pe=U;return u((d(),i("div",J,[s(o,{inline:!0},{default:m((()=>[s(t,null,{default:m((()=>[s(a,{status:"primary",icon:"vxe-icon-add",onClick:l[0]||(l[0]=e=>D.value=!0)},{default:m((()=>[n(" 新增菜单 ")])),_:1}),s(a,{status:"warning",onClick:ee},{default:m((()=>[n(p(H.value?"关闭所有":"展开所有"),1)])),_:1})])),_:1})])),_:1}),G.value?(d(),c(oe,{key:0,data:M.value,style:{width:"100%","margin-bottom":"20px"},"row-key":"id",border:"",stripe:"",lazy:"","max-height":"480","default-expand-all":H.value,"tree-props":{children:"children",hasChildren:"hasChildren"}},{default:m((()=>[s(j,{prop:"menuTitle",label:"名称",sortable:"",width:"173"}),s(j,{prop:"menuName",label:"标识",width:"150"}),s(j,{prop:"menuPerms",label:"权限编码",sortable:"",width:"180"}),s(j,{prop:"menuIcon",label:"图标"},{default:m((e=>[f("span",{class:b(e.row.menuIcon)},null,2)])),_:1}),s(j,{prop:"menuType",label:"类型"},{default:m((e=>[0===e.row.menuType?(d(),c(v,{key:0,size:"small"},{default:m((()=>[n(" 目录 ")])),_:1})):1===e.row.menuType?(d(),c(v,{key:1,size:"small",type:"success"},{default:m((()=>[n(" 菜单 ")])),_:1})):h("",!0)])),_:1}),s(j,{prop:"menuPath",label:"菜单URL",width:"137"}),s(j,{prop:"redirect",width:"150",label:"重定向"}),s(j,{prop:"component",label:"菜单组件",width:"100"}),s(j,{prop:"orderNum",label:"排序",width:"53"}),s(j,{prop:"createTime",label:"创建时间",width:"173"}),s(j,{prop:"status",label:"状态",width:"73"},{default:m((e=>[0===e.row.status?(d(),c(v,{key:0,size:"small",type:"success"},{default:m((()=>[n(" 正常 ")])),_:1})):1===e.row.status?(d(),c(v,{key:1,size:"small",type:"danger"},{default:m((()=>[n(" 禁用 ")])),_:1})):h("",!0)])),_:1}),s(j,{prop:"hidden",label:"展示状态",width:"73"},{default:m((e=>[0===e.row.hidden?(d(),c(v,{key:0,size:"small",type:"danger"},{default:m((()=>[n(" 隐藏 ")])),_:1})):1===e.row.hidden?(d(),c(v,{key:1,size:"small",type:"success"},{default:m((()=>[n(" 展示 ")])),_:1})):h("",!0)])),_:1}),s(j,{prop:"icon",label:"操作",width:"170",fixed:"right"},{default:m((e=>[s(ae,{type:"primary",link:"",onClick:l=>{return a=e.row,D.value=!0,void Object.assign(Y,a);var a}},{default:m((()=>[K,n(" 编辑 ")])),_:2},1032,["onClick"]),s(te,{direction:"vertical"}),s(ae,{type:"danger",link:"",onClick:l=>{return a=e.row,void W.confirm(`正在删除：${a.menuTitle}，确认删除？`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{w(a.id).then((e=>y.success(e.msg))).catch((e=>y.error(e.msg))).finally((()=>{Z.go(0),S()}))}));var a}},{default:m((()=>[Q,n(" 删除 ")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data","default-expand-all"])):h("",!0),s(ne,{modelValue:D.value,"onUpdate:modelValue":l[15]||(l[15]=e=>D.value=e),title:"提示",width:"537","align-center":""},{default:m((()=>[s(o,{ref_key:"ruleFormRef",ref:T,model:Y,rules:le,"label-width":"100px",class:"demo-editForm","label-position":"left"},{default:m((()=>[s(t,{label:"上级菜单",prop:"parentId"},{default:m((()=>[s(ue,{modelValue:Y.parentId,"onUpdate:modelValue":l[1]||(l[1]=e=>Y.parentId=e),placeholder:"请选择上级菜单"},{default:m((()=>[(d(!0),i(_,null,g(X.value,(e=>(d(),i(_,{key:e.id},[s(re,{label:e.menuTitle,value:e.id},null,8,["label","value"]),(d(!0),i(_,null,g(e.children,(e=>(d(),c(re,{key:e.id,label:e.menuTitle,value:e.id},{default:m((()=>[f("span",null,p(`- ${e.menuTitle}`),1)])),_:2},1032,["label","value"])))),128))],64)))),128))])),_:1},8,["modelValue"])])),_:1}),s(t,{label:"菜单名称",prop:"menuTitle","label-width":"100px"},{default:m((()=>[s(de,{modelValue:Y.menuTitle,"onUpdate:modelValue":l[2]||(l[2]=e=>Y.menuTitle=e),autocomplete:"off"},null,8,["modelValue"])])),_:1}),s(t,{label:"菜单标识",prop:"menuName","label-width":"100px"},{default:m((()=>[s(de,{modelValue:Y.menuName,"onUpdate:modelValue":l[3]||(l[3]=e=>Y.menuName=e),autocomplete:"off",placeholder:"标识最好输入为英文"},null,8,["modelValue"])])),_:1}),s(t,{label:"权限编码",prop:"menuPerms","label-width":"100px"},{default:m((()=>[s(de,{modelValue:Y.menuPerms,"onUpdate:modelValue":l[4]||(l[4]=e=>Y.menuPerms=e),autocomplete:"off"},null,8,["modelValue"])])),_:1}),s(t,{label:"图标",prop:"menuIcon","label-width":"100px"},{default:m((()=>[s(de,{modelValue:Y.menuIcon,"onUpdate:modelValue":l[5]||(l[5]=e=>Y.menuIcon=e),autocomplete:"off"},null,8,["modelValue"])])),_:1}),s(t,{label:"菜单URL",prop:"menuPath","label-width":"100px"},{default:m((()=>[s(de,{modelValue:Y.menuPath,"onUpdate:modelValue":l[6]||(l[6]=e=>Y.menuPath=e),autocomplete:"off"},null,8,["modelValue"])])),_:1}),s(t,{label:"重定向",prop:"redirect","label-width":"100px"},{default:m((()=>[s(de,{modelValue:Y.redirect,"onUpdate:modelValue":l[7]||(l[7]=e=>Y.redirect=e),autocomplete:"off"},null,8,["modelValue"])])),_:1}),s(t,{label:"菜单组件",prop:"component","label-width":"100px"},{default:m((()=>[s(de,{modelValue:Y.component,"onUpdate:modelValue":l[8]||(l[8]=e=>Y.component=e),autocomplete:"off"},null,8,["modelValue"])])),_:1}),s(t,{label:"类型",prop:"menuType","label-width":"100px"},{default:m((()=>[s(se,{modelValue:Y.menuType,"onUpdate:modelValue":l[9]||(l[9]=e=>Y.menuType=e)},{default:m((()=>[s(ie,{label:0},{default:m((()=>[n(" 目录 ")])),_:1}),s(ie,{label:1},{default:m((()=>[n(" 菜单 ")])),_:1})])),_:1},8,["modelValue"])])),_:1}),s(t,{label:"状态",prop:"status","label-width":"100px"},{default:m((()=>[s(se,{modelValue:Y.status,"onUpdate:modelValue":l[10]||(l[10]=e=>Y.status=e)},{default:m((()=>[s(ie,{label:0},{default:m((()=>[n(" 正常 ")])),_:1}),s(ie,{label:1},{default:m((()=>[n(" 禁用 ")])),_:1})])),_:1},8,["modelValue"])])),_:1}),s(t,{label:"是否展示",prop:"hidden","label-width":"100px"},{default:m((()=>[s(se,{modelValue:Y.hidden,"onUpdate:modelValue":l[11]||(l[11]=e=>Y.hidden=e)},{default:m((()=>[s(ie,{label:1},{default:m((()=>[n(" 是 ")])),_:1}),s(ie,{label:0},{default:m((()=>[n(" 否 ")])),_:1})])),_:1},8,["modelValue"])])),_:1}),s(t,{label:"排序号",prop:"orderNum","label-width":"100px"},{default:m((()=>[s(me,{modelValue:Y.orderNum,"onUpdate:modelValue":l[12]||(l[12]=e=>Y.orderNum=e),min:1,label:"排序号"},{default:m((()=>[n(" 1 ")])),_:1},8,["modelValue"])])),_:1}),s(t,null,{default:m((()=>[s(ae,{type:"primary",onClick:l[13]||(l[13]=e=>(async e=>{e&&(await e.validate(((e,l)=>{e?""===Y.id?V(Y).then((e=>{y.success(e.msg),S()})):x(Y).then((e=>{y.success(e.msg),Z.go(0),S()})):y.error("error submit!")})),D.value=!1,e.resetFields())})(T.value))},{default:m((()=>[n(" 立即创建 ")])),_:1}),s(ae,{onClick:l[14]||(l[14]=e=>{var l;(l=T.value)&&l.resetFields()})},{default:m((()=>[n(" 重置 ")])),_:1})])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue"])])),[[pe,k.value]])}}}),[["__scopeId","data-v-206c8c87"]]);export{G as default};
