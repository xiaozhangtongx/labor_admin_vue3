import{d as e,r as a,ao as l,Q as s,o as t,a as o,c as u,C as r,w as i,D as n,l as d,W as f,ag as p,n as v,k as m,q as c,a4 as _,H as I,am as y,ap as h,aq as g}from"./index-5cd95c96.js";import{E as b,v as j}from"./el-divider-66b5eeba.js";import{u as w,E as C,a as k,b as x,c as E}from"./el-message-0141f43b.js";import{E as T,_ as z,a as V,b as q}from"./el-card-faa07689.js";import{a as F,b as R,E as D}from"./el-form-item-8e00276f.js";import{E as H}from"./el-button-991a0e97.js";/* empty css                 */import{g as L,s as N,_ as P,E as S,a as U}from"./index.vue_vue_type_script_setup_true_lang-2c3ac2ce.js";import{E as B}from"./el-tag-e29fba55.js";import{E as G}from"./el-scrollbar-dfa5a1fc.js";import{E as J}from"./el-empty-aa4ab5c0.js";import{_ as M}from"./FinishList.vue_vue_type_script_setup_true_lang-5062e5ea.js";import{_ as O}from"./_plugin-vue_export-helper-1b428a4d.js";import"./throttle-983648f3.js";import"./debounce-73bc465e.js";import"./focus-trap-5e4873d1.js";import"./scroll-261c452e.js";import"./strings-7a48b062.js";import"./el-overlay-e674941e.js";import"./index-7a8f1332.js";import"./el-tooltip-b30b6abe.js";import"./index-e7bb116f.js";import"./index-6a3b3075.js";import"./el-dialog-550286b2.js";const Q=e=>(h("data-v-47246c07"),e=e(),g(),e),W={class:"app-container"},A={key:0},K={key:1,class:"common-layout"},X={"infinite-scroll-immediate":!1,class:"infinite-list"},Y={class:"flex justify-between w-60 text-gray-500"},Z={class:"flow-leave"},$=Q((()=>m("h2",{class:"flex justify-center items-center"}," 审批表 ",-1))),ee=Q((()=>m("h4",{class:"mt-2"}," 审批意见 ",-1))),ae=e({name:"ElementPlus"}),le=O(e({...ae,setup(e){var h,g;const O=a("todo"),Q=l(),ae=a(),le=[{id:0,type:"",value:"病假"},{id:1,type:"success",value:"婚假"},{id:2,type:"info",value:"丧假"},{id:3,type:"warning",value:"产假"},{id:4,type:"danger",value:"其它"}],se=s({approverId:null==(h=Q.userInfo)?void 0:h.id,status:1,applicationType:"1",current:0,size:5}),te=s({id:"",applicationId:"",approverId:(null==(g=Q.userInfo)?void 0:g.id)||"",approvalResult:0,reason:"",applicationType:"1"}),oe=a([]),ue=a(),re=a(!0),ie=a(!1),ne=a(""),de=a(!1),fe=()=>{re.value=!0,L(se).then((e=>{var a;const l=[...oe.value,...e.data.records];oe.value=[...w(l)],ue.value=oe.value[0],ne.value=(null==(a=ue.value)?void 0:a.id)||"",re.value=!1,se.current+=se.size,e.data.total>=oe.value.length&&(ie.value=!0)}))},pe=()=>{fe()},ve=e=>{oe.value=oe.value.filter((a=>a.id!==e))};return t((()=>{fe()})),(e,a)=>{const l=J,s=P,t=T,h=b,g=G,w=C,L=z,Q=S,se=B,fe=U,me=F,ce=R,_e=H,Ie=D,ye=k,he=x,ge=V,be=q,je=E,we=j;return o(),u("div",W,[r(t,{shadow:"never"},{default:i((()=>[r(be,{modelValue:O.value,"onUpdate:modelValue":a[3]||(a[3]=e=>O.value=e),class:"demo-tabs"},{default:i((()=>[r(ge,{label:"待审批",name:"todo"},{default:i((()=>["todo"===O.value?n((o(),u("div",A,[0===oe.value.length?(o(),d(l,{key:0,"image-size":200,class:"h-120",description:"你已经全部审批完了"})):(o(),u("div",K,[r(he,null,{default:i((()=>[r(w,null,{default:i((()=>[r(g,{height:"480px"},{default:i((()=>[n((o(),u("div",X,[(o(!0),u(f,null,p(oe.value,(e=>(o(),d(t,{key:e.id,shadow:"hover",class:v([{activeCard:ne.value===e.id},"infinite-list-item cursor-pointer"]),onClick:a=>(e=>{ue.value=e,re.value=!1,ne.value=e.id,te.applicationId=e.applicationId,te.id=e.id})(e)},{default:i((()=>[m("h4",null,[r(s,{status:parseInt(e.flowCancelInfo.leaveInfo.leaveType),"status-list":le},null,8,["status"])]),m("h5",Y,[m("span",null,c(e.flowCancelInfo.leaveInfo.proposer.username),1),m("span",null,c(e.flowCancelInfo.createTime),1)])])),_:2},1032,["class","onClick"])))),128)),ie.value?(o(),d(h,{key:0,"border-style":"dashed"},{default:i((()=>[_(" 加载完毕 ")])),_:1})):I("",!0)])),[[je,pe]])])),_:1})])),_:1}),r(ye,null,{default:i((()=>[m("div",null,[r(L,{element:".flow-leave","open-tips":"审批表全屏",class:"absolute right-0"}),re.value?(o(),d(l,{key:0,"image-size":200,description:"请点击左侧的待审批单查看数据"})):n((o(),d(g,{key:1,height:"450px"},{default:i((()=>[m("div",Z,[$,n((o(),d(fe,{title:"申请人信息",column:2,"label-align":"right"},{default:i((()=>[r(Q,{label:"姓名"},{default:i((()=>[_(c(ue.value.flowCancelInfo.leaveInfo.proposer.username),1)])),_:1}),r(Q,{label:"手机号码"},{default:i((()=>[_(c(ue.value.flowCancelInfo.leaveInfo.proposer.phoneNum),1)])),_:1}),r(Q,{label:"部门"},{default:i((()=>[_(" Suzhou ")])),_:1}),r(Q,{label:"职位"},{default:i((()=>[r(se,{size:"small"},{default:i((()=>[_(" School ")])),_:1})])),_:1})])),_:1})),[[we,re.value]]),r(fe,{title:"请假表单",column:2,border:""},{default:i((()=>[r(Q,{label:"申请时间"},{default:i((()=>[_(c(ue.value.flowCancelInfo.leaveInfo.createTime),1)])),_:1}),r(Q,{label:"请假时长"},{default:i((()=>[_(c(ue.value.flowCancelInfo.leaveInfo.duration)+" 天 ",1)])),_:1}),r(Q,{label:"请假开始时间"},{default:i((()=>[_(c(ue.value.flowCancelInfo.leaveInfo.startTime),1)])),_:1}),r(Q,{label:"请假结束时间"},{default:i((()=>[_(c(ue.value.flowCancelInfo.leaveInfo.endTime),1)])),_:1}),r(Q,{label:"请假原因"},{default:i((()=>[_(c(ue.value.flowCancelInfo.leaveInfo.reason),1)])),_:1})])),_:1}),r(fe,{title:"销假表单",column:2,border:"",class:"mt-2"},{default:i((()=>[r(Q,{label:"申请时间"},{default:i((()=>[_(c(ue.value.flowCancelInfo.createTime),1)])),_:1}),r(Q,{label:"更新时间"},{default:i((()=>[_(c(ue.value.flowCancelInfo.updateTime||ue.value.flowCancelInfo.createTime),1)])),_:1}),r(Q,{label:"申请原因"},{default:i((()=>[_(c(ue.value.flowCancelInfo.leaveInfo.reason),1)])),_:1})])),_:1}),ee,r(Ie,{ref_key:"formRef",ref:ae,model:te},{default:i((()=>[r(ce,{prop:"reason",rules:[{required:!0,message:"请输入审批意见",trigger:"blur"}]},{default:i((()=>[r(me,{modelValue:te.reason,"onUpdate:modelValue":a[0]||(a[0]=e=>te.reason=e),rows:5,type:"textarea",placeholder:"请输入审批意见",maxlength:"30","show-word-limit":""},null,8,["modelValue"])])),_:1}),r(ce,null,{default:i((()=>[r(_e,{type:"success",onClick:a[1]||(a[1]=e=>{var a;(a=ae.value)&&a.validate((e=>{e?(te.approvalResult=0,de.value=!0,N(te).then((e=>{y.success(e.msg),ve(te.id)})).catch((e=>{y.error(e.msg)})).finally((()=>{de.value=!1,a.resetFields()}))):y.error("请输入审批意见")}))})},{default:i((()=>[_(" 通过 ")])),_:1}),r(_e,{type:"danger",onClick:a[2]||(a[2]=e=>{var a;(a=ae.value)&&a.validate((e=>{e?(de.value=!0,te.approvalResult=1,N(te).then((e=>{y.success(e.msg),ve(te.id)})).catch((e=>{y.error(e.msg)})).finally((()=>{de.value=!1,a.resetFields()}))):y.error("请输入审批意见")}))})},{default:i((()=>[_(" 拒绝 ")])),_:1})])),_:1})])),_:1},8,["model"])])])),_:1})),[[we,de.value]])])])),_:1})])),_:1})]))])),[[we,re.value]]):I("",!0)])),_:1}),r(ge,{label:"已审批",name:"done"},{default:i((()=>["done"===O.value?(o(),d(M,{key:0})):I("",!0)])),_:1})])),_:1},8,["modelValue"])])),_:1})])}}}),[["__scopeId","data-v-47246c07"]]);export{le as default};
