import{bJ as e,bn as o,u as t,c7 as n,aU as l,N as a,R as s,by as u,L as d,c8 as c,M as r,bO as i,b as p,g as f,d as y,C as m,e as v,U as b,i as C,a5 as x,h as g,aL as h,r as E,c9 as k,y as M,A as B,a2 as I,o as S,ca as w,X as A}from"./index-c36cfae6.js";import{P as T}from"./vnode-89af9644.js";import{t as O,U as D}from"./focus-trap-1ea331f5.js";import{u as z}from"./index-d9e26d1a.js";import{a as F}from"./scroll-0ed63e85.js";const L=e=>Array.from(e.querySelectorAll('a[href],button:not([disabled]),button:not([hidden]),:not([tabindex="-1"]),input:not([disabled]),input:not([type="hidden"]),select:not([disabled]),textarea:not([disabled])')).filter((e=>N(e)&&(e=>"fixed"!==getComputedStyle(e).position&&null!==e.offsetParent)(e))),N=e=>{if(e.tabIndex>0||0===e.tabIndex&&null!==e.getAttribute("tabIndex"))return!0;if(e.disabled)return!1;switch(e.nodeName){case"A":return!!e.href&&"ignore"!==e.rel;case"INPUT":return!("hidden"===e.type||"file"===e.type);case"BUTTON":case"SELECT":case"TEXTAREA":return!0;default:return!1}},P=function(e,o,...t){let n;n=o.includes("mouse")||o.includes("click")?"MouseEvents":o.includes("key")?"KeyboardEvent":"HTMLEvents";const l=document.createEvent(n);return l.initEvent(o,...t),e.dispatchEvent(l),e},j=o=>["",...e].includes(o),R=(e,i={})=>{o(e)||O("[useLockscreen]","You need to pass a ref param to this function");const p=i.ns||t("popup"),f=n((()=>p.bm("parent","hidden")));if(!l||a(document.body,f.value))return;let y=0,m=!1,v="0";const b=()=>{setTimeout((()=>{r(null==document?void 0:document.body,f.value),m&&document&&(document.body.style.width=v)}),200)};s(e,(e=>{if(!e)return void b();m=!a(document.body,f.value),m&&(v=document.body.style.width),y=F(p.namespace.value);const o=document.documentElement.clientHeight<document.body.scrollHeight,t=u(document.body,"overflowY");y>0&&(o||"scroll"===t)&&m&&(document.body.style.width=`calc(100% - ${y}px)`),d(document.body,f.value)})),c((()=>b()))},U=e=>{if(!e)return{onClick:i,onMousedown:i,onMouseup:i};let o=!1,t=!1;return{onClick:n=>{o&&t&&e(n),o=t=!1},onMousedown:e=>{o=e.target===e.currentTarget},onMouseup:e=>{t=e.target===e.currentTarget}}},$=p({mask:{type:Boolean,default:!0},customMaskEvent:{type:Boolean,default:!1},overlayClass:{type:f([String,Array,Object])},zIndex:{type:f([String,Number])}});const q=y({name:"ElOverlay",props:$,emits:{click:e=>e instanceof MouseEvent},setup(e,{slots:o,emit:n}){const l=t("overlay"),{onClick:a,onMousedown:s,onMouseup:u}=U(e.customMaskEvent?void 0:e=>{n("click",e)});return()=>e.mask?m("div",{class:[l.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:a,onMousedown:s,onMouseup:u},[v(o,"default")],T.STYLE|T.CLASS|T.PROPS,["onClick","onMouseup","onMousedown"]):b("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[v(o,"default")])}}),H=p({center:{type:Boolean,default:!1},alignCenter:{type:Boolean,default:!1},closeIcon:{type:C},customClass:{type:String,default:""},draggable:{type:Boolean,default:!1},fullscreen:{type:Boolean,default:!1},showClose:{type:Boolean,default:!0},title:{type:String,default:""}}),V={close:()=>!0},Y=p({...H,appendToBody:{type:Boolean,default:!1},beforeClose:{type:f(Function)},destroyOnClose:{type:Boolean,default:!1},closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:{type:Boolean,default:!1},modalClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:{type:Boolean,default:!1}}),X={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[D]:e=>x(e),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},J=(e,o)=>{const t=g().emit,{nextZIndex:n}=h();let a="";const u=z(),d=z(),c=E(!1),r=E(!1),i=E(!1),p=E(e.zIndex||n());let f,y;const m=k("namespace",w),v=M((()=>{const o={},t=`--${m.value}-dialog`;return e.fullscreen||(e.top&&(o[`${t}-margin-top`]=e.top),e.width&&(o[`${t}-width`]=B(e.width))),o})),b=M((()=>e.alignCenter?{display:"flex"}:{}));function C(){null==y||y(),null==f||f(),e.openDelay&&e.openDelay>0?({stop:f}=A((()=>O()),e.openDelay)):O()}function x(){null==f||f(),null==y||y(),e.closeDelay&&e.closeDelay>0?({stop:y}=A((()=>F()),e.closeDelay)):F()}function T(){e.beforeClose?e.beforeClose((function(e){e||(r.value=!0,c.value=!1)})):x()}function O(){l&&(c.value=!0)}function F(){c.value=!1}return e.lockScroll&&R(c),s((()=>e.modelValue),(l=>{l?(r.value=!1,C(),i.value=!0,p.value=e.zIndex?p.value++:n(),I((()=>{t("open"),o.value&&(o.value.scrollTop=0)}))):c.value&&x()})),s((()=>e.fullscreen),(e=>{o.value&&(e?(a=o.value.style.transform,o.value.style.transform=""):o.value.style.transform=a)})),S((()=>{e.modelValue&&(c.value=!0,i.value=!0,C())})),{afterEnter:function(){t("opened")},afterLeave:function(){t("closed"),t(D,!1),e.destroyOnClose&&(i.value=!1)},beforeLeave:function(){t("close")},handleClose:T,onModalClick:function(){e.closeOnClickModal&&T()},close:x,doClose:F,onOpenAutoFocus:function(){t("openAutoFocus")},onCloseAutoFocus:function(){t("closeAutoFocus")},onCloseRequested:function(){e.closeOnPressEscape&&T()},onFocusoutPrevented:function(e){var o;"pointer"===(null==(o=e.detail)?void 0:o.focusReason)&&e.preventDefault()},titleId:u,bodyId:d,closed:r,style:v,overlayDialogStyle:b,rendered:i,visible:c,zIndex:p}};export{q as E,X as a,H as b,V as c,Y as d,U as e,R as f,j as i,L as o,P as t,J as u};
