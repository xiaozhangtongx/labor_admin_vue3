import{d as e,aV as a,u as l,y as t,a as s,c as o,e as n,n as r,f as i,_ as u,aa as c,s as d,v as p,aW as m,a2 as f,r as v,ao as h,Q as g,o as _,C as b,w as y,D as w,l as k,W as j,ag as E,k as I,q as x,a4 as S,H as T,am as H,ap as L,aq as V}from"./index-93ba5881.js";import{E as C,v as z}from"./el-divider-ec5d0947.js";import{E as F,_ as B,a as N,b as $}from"./el-card-e899bd99.js";import{a as q,b as A,E as M}from"./el-form-item-fb62bce8.js";import{E as R}from"./el-button-48d46b72.js";/* empty css                 */import{a as D,_ as O,g as U,s as W,E as G,b as P}from"./FinishList.vue_vue_type_script_setup_true_lang-90446915.js";import{E as Q}from"./el-tag-5e952519.js";import{E as J}from"./el-scrollbar-74e7d0b5.js";import{E as K}from"./el-empty-001fc140.js";import{t as X,g as Y}from"./throttle-2a7927e0.js";import{t as Z}from"./focus-trap-c8e74f19.js";import{g as ee}from"./scroll-6db31819.js";import{_ as ae}from"./_plugin-vue_export-helper-1b428a4d.js";import"./strings-40ce1ac8.js";import"./el-overlay-18efe7aa.js";import"./index-81ef74b7.js";import"./el-tooltip-3d29d588.js";import"./index-124101df.js";import"./index-7a4560bb.js";import"./el-dialog-ed8dcbdc.js";import"./debounce-df743a94.js";const le=e({name:"ElContainer"});var te=u(e({...le,props:{direction:{type:String}},setup(e){const u=e,c=a(),d=l("container"),p=t((()=>{if("vertical"===u.direction)return!0;if("horizontal"===u.direction)return!1;if(c&&c.default){return c.default().some((e=>{const a=e.type.name;return"ElHeader"===a||"ElFooter"===a}))}return!1}));return(e,a)=>(s(),o("section",{class:r([i(d).b(),i(d).is("vertical",i(p))])},[n(e.$slots,"default")],2))}}),[["__file","/home/runner/work/element-plus/element-plus/packages/components/container/src/container.vue"]]);const se=e({name:"ElAside"});var oe=u(e({...se,props:{width:{type:String,default:null}},setup(e){const a=e,u=l("aside"),d=t((()=>a.width?u.cssVarBlock({width:a.width}):{}));return(e,a)=>(s(),o("aside",{class:r(i(u).b()),style:c(i(d))},[n(e.$slots,"default")],6))}}),[["__file","/home/runner/work/element-plus/element-plus/packages/components/container/src/aside.vue"]]);const ne=e({name:"ElFooter"});var re=u(e({...ne,props:{height:{type:String,default:null}},setup(e){const a=e,u=l("footer"),d=t((()=>a.height?u.cssVarBlock({height:a.height}):{}));return(e,a)=>(s(),o("footer",{class:r(i(u).b()),style:c(i(d))},[n(e.$slots,"default")],6))}}),[["__file","/home/runner/work/element-plus/element-plus/packages/components/container/src/footer.vue"]]);const ie=e({name:"ElHeader"});var ue=u(e({...ie,props:{height:{type:String,default:null}},setup(e){const a=e,u=l("header"),d=t((()=>a.height?u.cssVarBlock({height:a.height}):{}));return(e,a)=>(s(),o("header",{class:r(i(u).b()),style:c(i(d))},[n(e.$slots,"default")],6))}}),[["__file","/home/runner/work/element-plus/element-plus/packages/components/container/src/header.vue"]]);const ce=e({name:"ElMain"});var de=u(e({...ce,setup(e){const a=l("main");return(e,l)=>(s(),o("main",{class:r(i(a).b())},[n(e.$slots,"default")],2))}}),[["__file","/home/runner/work/element-plus/element-plus/packages/components/container/src/main.vue"]]);const pe=d(te,{Aside:oe,Footer:re,Header:ue,Main:de}),me=p(oe);p(re),p(ue);const fe=p(de),ve="ElInfiniteScroll",he={delay:{type:Number,default:200},distance:{type:Number,default:0},disabled:{type:Boolean,default:!1},immediate:{type:Boolean,default:!0}},ge=(e,a)=>Object.entries(he).reduce(((l,[t,s])=>{var o,n;const{type:r,default:i}=s,u=e.getAttribute(`infinite-scroll-${t}`);let c=null!=(n=null!=(o=a[u])?o:u)?n:i;return c="false"!==c&&c,c=r(c),l[t]=Number.isNaN(c)?i:c,l}),{}),_e=e=>{const{observer:a}=e[ve];a&&(a.disconnect(),delete e[ve].observer)},be=(e,a)=>{const{container:l,containerEl:t,instance:s,observer:o,lastScrollTop:n}=e[ve],{disabled:r,distance:i}=ge(e,s),{clientHeight:u,scrollHeight:c,scrollTop:d}=t,p=d-n;if(e[ve].lastScrollTop=d,o||r||p<0)return;let m=!1;if(l===e)m=c-(u+d)<=i;else{const{clientTop:a,scrollHeight:l}=e;m=d+u>=Y(e,t)+a+l-i}m&&a.call(s)};function ye(e,a){const{containerEl:l,instance:t}=e[ve],{disabled:s}=ge(e,t);s||0===l.clientHeight||(l.scrollHeight<=l.clientHeight?a.call(t):_e(e))}const we={async mounted(e,a){const{instance:l,value:t}=a;m(t)||Z(ve,"'v-infinite-scroll' binding value must be a function"),await f();const{delay:s,immediate:o}=ge(e,l),n=ee(e,!0),r=n===window?document.documentElement:n,i=X(be.bind(null,e,t),s);if(n){if(e[ve]={instance:l,container:n,containerEl:r,delay:s,cb:t,onScroll:i,lastScrollTop:r.scrollTop},o){const a=new MutationObserver(X(ye.bind(null,e,t),50));e[ve].observer=a,a.observe(e,{childList:!0,subtree:!0}),ye(e,t)}n.addEventListener("scroll",i)}},unmounted(e){const{container:a,onScroll:l}=e[ve];null==a||a.removeEventListener("scroll",l),_e(e)},async updated(e){if(e[ve]){const{containerEl:a,cb:l,observer:t}=e[ve];a.clientHeight&&t&&ye(e,l)}else await f()},install:e=>{e.directive("InfiniteScroll",we)}},ke=we,je=e=>{const a=new Map;return e.filter((e=>!a.has(e.id)&&a.set(e.id,1)))},Ee=e=>(L("data-v-34ac5f7e"),e=e(),V(),e),Ie={class:"app-container"},xe={key:0},Se={key:1,class:"common-layout"},Te={"infinite-scroll-immediate":!1,class:"infinite-list"},He={class:"flex justify-between w-60 text-gray-500"},Le={class:"flow-leave"},Ve=Ee((()=>I("h2",{class:"flex justify-center items-center"}," 审批表 ",-1))),Ce=Ee((()=>I("h4",{class:"mt-2"}," 审批意见 ",-1))),ze=e({name:"ElementPlus"}),Fe=ae(e({...ze,setup(e){var a,l;const t=v("todo"),n=h(),i=v(),u=[{id:0,type:"",value:"病假"},{id:1,type:"success",value:"婚假"},{id:2,type:"info",value:"丧假"},{id:3,type:"warning",value:"产假"},{id:4,type:"danger",value:"其它"}],c=g({approverId:null==(a=n.userInfo)?void 0:a.id,status:1,applicationType:"0",current:0,size:5}),d=g({id:"",applicationId:"",approverId:(null==(l=n.userInfo)?void 0:l.id)||"",approvalResult:0,reason:"",applicationType:"0"}),p=v([]),m=v(),f=v(!0),L=v(!1),V=v(""),X=v(!1),Y=()=>{f.value=!0,U(c).then((e=>{var a;const l=[...p.value,...e.data.records];p.value=[...je(l)],m.value=p.value[0],V.value=(null==(a=m.value)?void 0:a.id)||"",f.value=!1,c.current+=c.size,e.data.total>=p.value.length&&(L.value=!0)}))},Z=()=>{Y()},ee=e=>{p.value=p.value.filter((a=>a.id!==e))};return _((()=>{Y()})),(e,a)=>{const l=K,n=F,c=C,v=J,h=me,g=B,_=G,U=Q,Y=P,ae=q,le=A,te=R,se=M,oe=fe,ne=pe,re=N,ie=$,ue=ke,ce=z;return s(),o("div",Ie,[b(n,{shadow:"never"},{default:y((()=>[b(ie,{modelValue:t.value,"onUpdate:modelValue":a[3]||(a[3]=e=>t.value=e),class:"demo-tabs"},{default:y((()=>[b(re,{label:"待审批",name:"todo"},{default:y((()=>["todo"===t.value?w((s(),o("div",xe,[0===p.value.length?(s(),k(l,{key:0,"image-size":200,class:"h-120",description:"你已经全部审批完了"})):(s(),o("div",Se,[b(ne,null,{default:y((()=>[b(h,null,{default:y((()=>[b(v,{height:"480px"},{default:y((()=>[w((s(),o("div",Te,[(s(!0),o(j,null,E(p.value,(e=>(s(),k(n,{key:e.id,shadow:"hover",class:r([{activeCard:V.value===e.id},"infinite-list-item cursor-pointer"]),onClick:a=>(e=>{m.value=e,f.value=!1,V.value=e.id,d.applicationId=e.applicationId,d.id=e.id})(e)},{default:y((()=>[I("h4",null,[b(D,{status:parseInt(e.applicationType),"status-list":u},null,8,["status"])]),I("h5",He,[I("span",null,x(e.flowLeaveInfo.proposer.username),1),I("span",null,x(e.approvalTime),1)])])),_:2},1032,["class","onClick"])))),128)),L.value?(s(),k(c,{key:0,"border-style":"dashed"},{default:y((()=>[S(" 加载完毕 ")])),_:1})):T("",!0)])),[[ue,Z]])])),_:1})])),_:1}),b(oe,null,{default:y((()=>[I("div",null,[b(g,{element:".flow-leave","open-tips":"审批表全屏",class:"absolute right-0"}),f.value?(s(),k(l,{key:0,"image-size":200,description:"请点击左侧的待审批单查看数据"})):w((s(),k(v,{key:1,height:"450px"},{default:y((()=>[I("div",Le,[Ve,w((s(),k(Y,{title:"申请人信息",column:2,"label-align":"right"},{default:y((()=>[b(_,{label:"姓名"},{default:y((()=>[S(x(m.value.flowLeaveInfo.proposer.username),1)])),_:1}),b(_,{label:"手机号码"},{default:y((()=>[S(x(m.value.flowLeaveInfo.proposer.phoneNum),1)])),_:1}),b(_,{label:"部门"},{default:y((()=>[S(" Suzhou ")])),_:1}),b(_,{label:"职位"},{default:y((()=>[b(U,{size:"small"},{default:y((()=>[S(" School ")])),_:1})])),_:1})])),_:1})),[[ce,f.value]]),b(Y,{title:"申请表单",column:2,border:""},{default:y((()=>[b(_,{label:"申请时间"},{default:y((()=>[S(x(m.value.flowLeaveInfo.createTime),1)])),_:1}),b(_,{label:"请假时长"},{default:y((()=>[S(x(m.value.flowLeaveInfo.duration)+" 天 ",1)])),_:1}),b(_,{label:"请假开始时间"},{default:y((()=>[S(x(m.value.flowLeaveInfo.startTime),1)])),_:1}),b(_,{label:"请假结束时间"},{default:y((()=>[S(x(m.value.flowLeaveInfo.endTime),1)])),_:1}),b(_,{label:"申请原因"},{default:y((()=>[S(x(m.value.flowLeaveInfo.reason),1)])),_:1})])),_:1}),Ce,b(se,{ref_key:"formRef",ref:i,model:d},{default:y((()=>[b(le,{prop:"reason",rules:[{required:!0,message:"请输入审批意见",trigger:"blur"}]},{default:y((()=>[b(ae,{modelValue:d.reason,"onUpdate:modelValue":a[0]||(a[0]=e=>d.reason=e),rows:5,type:"textarea",placeholder:"请输入审批意见",maxlength:"30","show-word-limit":""},null,8,["modelValue"])])),_:1}),b(le,null,{default:y((()=>[b(te,{type:"success",onClick:a[1]||(a[1]=e=>{var a;(a=i.value)&&a.validate((e=>{e?(d.approvalResult=0,X.value=!0,W(d).then((e=>{H.success(e.msg),ee(d.id)})).catch((e=>{H.error(e.msg)})).finally((()=>{X.value=!1,a.resetFields()}))):H.error("请输入审批意见")}))})},{default:y((()=>[S(" 通过 ")])),_:1}),b(te,{type:"danger",onClick:a[2]||(a[2]=e=>{var a;(a=i.value)&&a.validate((e=>{e?(X.value=!0,d.approvalResult=1,W(d).then((e=>{H.success(e.msg),ee(d.id)})).catch((e=>{H.error(e.msg)})).finally((()=>{X.value=!1,a.resetFields()}))):H.error("请输入审批意见")}))})},{default:y((()=>[S(" 拒绝 ")])),_:1})])),_:1})])),_:1},8,["model"])])])),_:1})),[[ce,X.value]])])])),_:1})])),_:1})]))])),[[ce,f.value]]):T("",!0)])),_:1}),b(re,{label:"已审批",name:"done"},{default:y((()=>["done"===t.value?(s(),k(O,{key:0})):T("",!0)])),_:1})])),_:1},8,["modelValue"])])),_:1})])}}}),[["__scopeId","data-v-34ac5f7e"]]);export{Fe as default};
