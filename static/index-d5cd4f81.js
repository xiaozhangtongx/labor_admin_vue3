import{d as e,ag as t,r as l,Q as s,B as a,a as o,c as r,C as i,w as n,W as u,ah as p,a4 as d,F as c,k as m,q as f,an as g}from"./index-9a706b5e.js";import{E as v}from"./el-dialog-94ce5d08.js";import"./el-overlay-d6f3b381.js";import{E as y}from"./el-scrollbar-c33e6783.js";import{E as h}from"./el-divider-333d043c.js";import{E as j}from"./el-button-cb2bce56.js";import{_ as x}from"./index.vue_vue_type_script_setup_true_lang-ee812c46.js";/* empty css                 *//* empty css               */import{E as w,a as _}from"./el-select-cf6a8710.js";import"./el-popper-9f38ba83.js";import{g as b,d as k}from"./index-5fd24183.js";import{E as C}from"./index-c3db2d78.js";import"./focus-trap-4f47c9e6.js";import"./event-15d81b97.js";import"./refs-b9a36019.js";import"./use-form-item-14a057db.js";import"./scroll-8c03f05f.js";import"./index-69566457.js";import"./index-e3536c2f.js";import"./index-c887b90a.js";import"./strings-0eeb67c0.js";import"./isEqual-8163224d.js";import"./_Uint8Array-c1224f14.js";import"./debounce-de061bf0.js";import"./index-8785ff64.js";import"./validator-1ce7f714.js";import"./aria-49c72c55.js";const T={class:"app-container"},E=m("span",{class:"i-carbon-task-view mr-1"},null,-1),V=m("span",{class:"i-ph-pencil-line-light mr-1"},null,-1),q=m("span",{class:"i-material-symbols-delete-outline-rounded"},null,-1),M={class:"text-center"},O={class:"text-center"},A=m("strong",null,"发布者：",-1),z={class:"text-blue-400"},H=m("strong",{class:"ml-30px"},"发布时间：",-1),P=m("strong",{class:"ml-30px"},"类型：",-1),U=["innerHTML"],$=e({name:"VxeTable"}),B=e({...$,setup(e){const $=t(),B=l(!1),L=l(null),R=[{id:"0",value:"安全公告",type:""},{id:"1",value:"学习公告",type:"success"},{id:"2",value:"考试公告",type:"danger"}],S=l(),D=l(),G=s({loading:!0,border:!0,autoResize:!0,showHeaderOverflow:!0,showOverflow:!0,keepSource:!0,columnConfig:{resizable:!0},pagerConfig:{align:"right"},formConfig:{items:[{field:"title",itemRender:{name:"$input",props:{placeholder:"请输入公告标题",clearable:!0}}},{field:"status",slots:{default:"type_item"}},{itemRender:{name:"$buttons",children:[{props:{type:"submit",content:"查询",status:"primary"}},{props:{type:"reset",content:"重置"}}]}}]},customConfig:{checkMethod:({column:e})=>!["username"].includes(e.field)},exportConfig:{modes:["current","selected","all"]},columns:[{type:"seq",width:"50px",title:"序号"},{field:"title",title:"公告标题",width:"370px"},{field:"creator.username",title:"发布者"},{field:"createTime",title:"创建时间"},{field:"updateTime",title:"最后更新时间"},{width:"80px",title:"公告类型",slots:{default:"row-type"}},{title:"操作",width:"210px",fixed:"right",showOverflow:!1,slots:{default:"row-operate"}}],proxyConfig:{seq:!0,form:!0,props:{total:"total"},ajax:{query:({page:e,form:t})=>(G.loading=!0,new Promise((l=>{let s=0,a=[];const o=e=>{if(e&&e.data){const t=e.data;Number.isInteger(t.total)&&(s=t.total),Array.isArray(t.records)&&(a=t.records)}G.loading=!1,l({total:s,result:a})},r={title:t.title||"",type:L.value||"",size:e.pageSize,current:e.currentPage};b(r).then(o).catch(o)})))}}});return(e,t)=>{const l=w,s=_,b=x,N=j,Q=a("vxe-grid"),W=h,F=y,I=v;return o(),r("div",T,[i(Q,c({ref_key:"xGridDom",ref:D},G),{type_item:n((()=>[i(s,{modelValue:L.value,"onUpdate:modelValue":t[0]||(t[0]=e=>L.value=e),clearable:"",placeholder:"请选择公告类型"},{default:n((()=>[(o(),r(u,null,p(R,(e=>i(l,{key:e.id,label:e.value,value:e.id},null,8,["label","value"]))),64))])),_:1},8,["modelValue"])])),"row-type":n((({row:e})=>[i(b,{status:e.type,"status-list":R},null,8,["status"])])),"row-operate":n((({row:e})=>[i(N,{link:"",type:"primary",onClick:t=>(e=>{B.value=!0,S.value=e})(e)},{default:n((()=>[E,d(" 预览 ")])),_:2},1032,["onClick"]),i(N,{link:"",type:"warning",onClick:t=>(e=>{$.push({path:"/sys-notice/edit",query:{id:null==e?void 0:e.id}})})(e)},{default:n((()=>[V,d(" 编辑 ")])),_:2},1032,["onClick"]),i(N,{link:"",type:"danger",onClick:t=>(e=>{const t=`确定 <strong style='color:red;'>删除</strong> 公告 <strong style='color:#409eff;'>${e.title}</strong> ？`;C.confirm(t,"提示",{type:"error",showClose:!0,closeOnClickModal:!0,closeOnPressEscape:!0,cancelButtonText:"取消",confirmButtonText:"确定",dangerouslyUseHTMLString:!0}).then((()=>{k(e.id).then((()=>{g.success("删除成功"),$.go(0)})).catch((()=>1))})).catch((()=>1))})(e)},{default:n((()=>[q,d(" 删除 ")])),_:2},1032,["onClick"])])),_:1},16),i(I,{modelValue:B.value,"onUpdate:modelValue":t[1]||(t[1]=e=>B.value=e),"destroy-on-close":"",width:"70%",title:"公告预览"},{default:n((()=>[i(F,{height:"400px"},{default:n((()=>{var e,t,l,s,a;return[m("h2",M,f(null==(e=S.value)?void 0:e.title),1),m("h4",O,[A,d(),m("span",z,f(null==(t=S.value)?void 0:t.creator.username),1),H,d(f(null==(l=S.value)?void 0:l.createTime)+" ",1),P,d(),i(b,{status:null==(s=S.value)?void 0:s.type,"status-list":R},null,8,["status"])]),i(W,{"border-style":"dotted"},{default:n((()=>[d(" 正文 ")])),_:1}),m("section",{class:"flex flex-col justify-center items-center",innerHTML:null==(a=S.value)?void 0:a.content},null,8,U)]})),_:1})])),_:1},8,["modelValue"])])}}});export{B as default};
