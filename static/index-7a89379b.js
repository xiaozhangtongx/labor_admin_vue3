import{d as e,r as a,ac as l,Q as s,y as t,o,a as i,c as r,C as u,w as d,D as n,l as p,f as m,W as f,ah as v,n as c,k as _,q as j,a4 as y,H as h,an as g,ap as b,aq as w}from"./index-af1b0f7f.js";import{v as x}from"./el-loading-5ac98d2b.js";import{E as I}from"./el-infinite-scroll-161e50a3.js";import{E as k,a as E}from"./el-tab-pane-d1abc38d.js";import{a as L,b as T,E as C}from"./el-main-1394803c.js";import{a as V,E as z}from"./el-form-item-bd285a29.js";import{E as q}from"./el-button-4c1bfddb.js";/* empty css                 */import{E as R,a as S}from"./el-descriptions-item-6ae38340.js";/* empty css               */import{_ as U}from"./index-8ae35612.js";import{E as F}from"./el-scrollbar-122da2af.js";import{E as H}from"./el-divider-1bd339ed.js";import{E as N}from"./el-card-9d3e5058.js";import{E as O}from"./el-empty-e65cfeef.js";import{_ as P}from"./FinishList.vue_vue_type_script_setup_true_lang-50976ea8.js";import{g as Q,s as W}from"./index-f5bb5919.js";import{_ as A}from"./index.vue_vue_type_script_setup_true_lang-f927f1c6.js";import{u as D}from"./utils-c6ae1a7e.js";import{E as G}from"./index-9e5f34e5.js";import{E as J}from"./index-b7e1e73a.js";import{_ as K}from"./_plugin-vue_export-helper-1b428a4d.js";import"./throttle-97af5aae.js";import"./debounce-8a611c37.js";import"./event-15d81b97.js";import"./scroll-9ad6d206.js";import"./strings-a26e2dce.js";import"./index-f91dd8dd.js";import"./index-0053bafd.js";import"./use-form-item-c127ca03.js";import"./_Uint8Array-e7b42d57.js";import"./_initCloneObject-40f87319.js";import"./el-tooltip-4ed993c7.js";import"./el-popper-93d8741f.js";import"./focus-trap-1edd113c.js";import"./index-fe31ed28.js";import"./el-dialog-eb6eea03.js";import"./el-overlay-064fc03e.js";import"./refs-b2772767.js";import"./index-6ff256e8.js";import"./index-de5a0541.js";const M=e=>(b("data-v-e961caad"),e=e(),w(),e),X={class:"app-container"},Y={key:0},Z={key:1,class:"common-layout"},B=["infinite-scroll-disabled"],$={class:"flex justify-between w-60 text-gray-500"},ee={class:"flow-leave"},ae=M((()=>_("h2",{class:"flex justify-center items-center"}," 审批表 ",-1))),le=M((()=>_("h4",{class:"mt-2"}," 审批意见 ",-1))),se=e({name:"ElementPlus"}),te=K(e({...se,setup(e){var b,w;const K=a("todo"),M=l(),se=a(),te=[{id:0,type:"",value:"病假"},{id:1,type:"success",value:"婚假"},{id:2,type:"info",value:"丧假"},{id:3,type:"warning",value:"产假"},{id:4,type:"danger",value:"其它"}],oe=s({approverId:null==(b=M.userInfo)?void 0:b.id,status:1,applicationType:"0",current:0,size:5}),ie=s({id:"",applicationId:"",approverId:(null==(w=M.userInfo)?void 0:w.id)||"",approvalResult:0,reason:"",applicationType:"0"}),re=a([]),ue=a(),de=a(!0),ne=a(!1),pe=a(""),me=a(!1),fe=t((()=>de.value||ne.value)),ve=()=>{de.value=!0,Q(oe).then((e=>{var a;const l=[...re.value,...e.data.records];re.value=[...D(l)],ue.value=re.value[0],pe.value=(null==(a=ue.value)?void 0:a.id)||"",de.value=!1,oe.current++,e.data.total<=re.value.length&&(ne.value=!0)}))},ce=()=>{ve()},_e=e=>{re.value=re.value.filter((a=>a.id!==e))};return o((()=>{ve()})),(e,a)=>{const l=O,s=N,t=H,o=F,b=L,w=U,Q=R,D=G,M=S,oe=J,ve=V,je=q,ye=z,he=T,ge=C,be=k,we=E,xe=I,Ie=x;return i(),r("div",X,[u(s,{shadow:"never"},{default:d((()=>[u(we,{modelValue:K.value,"onUpdate:modelValue":a[3]||(a[3]=e=>K.value=e),class:"demo-tabs"},{default:d((()=>[u(be,{label:"待审批",name:"todo"},{default:d((()=>["todo"===K.value?n((i(),r("div",Y,[0===re.value.length?(i(),p(l,{key:0,"image-size":200,class:"h-120",description:"你已经全部审批完了"})):(i(),r("div",Z,[u(ge,null,{default:d((()=>[u(b,null,{default:d((()=>[u(o,{height:"480px"},{default:d((()=>[n((i(),r("div",{"infinite-scroll-disabled":m(fe),class:"infinite-list"},[(i(!0),r(f,null,v(re.value,(e=>(i(),p(s,{key:e.id,shadow:"hover",class:c([{activeCard:pe.value===e.id},"infinite-list-item cursor-pointer"]),onClick:a=>(e=>{ue.value=e,de.value=!1,pe.value=e.id,ie.applicationId=e.applicationId,ie.id=e.id})(e)},{default:d((()=>[_("h4",null,[u(A,{status:parseInt(e.applicationType),"status-list":te},null,8,["status"])]),_("h5",$,[_("span",null,j(e.flowLeaveInfo.proposer.username),1),_("span",null,j(e.flowLeaveInfo.createTime),1)])])),_:2},1032,["class","onClick"])))),128)),de.value?(i(),p(t,{key:0,"border-style":"dashed"},{default:d((()=>[y(" Loading... ")])),_:1})):h("",!0),ne.value?(i(),p(t,{key:1,"border-style":"dashed"},{default:d((()=>[y(" 加载完毕 ")])),_:1})):h("",!0)],8,B)),[[xe,ce]])])),_:1})])),_:1}),u(he,null,{default:d((()=>[_("div",null,[u(w,{element:".flow-leave","open-tips":"审批表全屏",class:"absolute right-0"}),de.value?(i(),p(l,{key:0,"image-size":200,description:"请点击左侧的待审批单查看数据"})):n((i(),p(o,{key:1,height:"450px"},{default:d((()=>[_("div",ee,[ae,n((i(),p(M,{title:"申请人信息",column:2,"label-align":"right"},{default:d((()=>[u(Q,{label:"姓名"},{default:d((()=>[y(j(ue.value.flowLeaveInfo.proposer.username),1)])),_:1}),u(Q,{label:"手机号码"},{default:d((()=>[y(j(ue.value.flowLeaveInfo.proposer.phoneNum),1)])),_:1}),u(Q,{label:"部门"},{default:d((()=>[y(" Suzhou ")])),_:1}),u(Q,{label:"职位"},{default:d((()=>[u(D,{size:"small"},{default:d((()=>[y(" School ")])),_:1})])),_:1})])),_:1})),[[Ie,de.value]]),u(M,{title:"申请表单",column:2,border:""},{default:d((()=>[u(Q,{label:"申请时间"},{default:d((()=>[y(j(ue.value.flowLeaveInfo.createTime),1)])),_:1}),u(Q,{label:"请假时长"},{default:d((()=>[y(j(ue.value.flowLeaveInfo.duration)+" 天 ",1)])),_:1}),u(Q,{label:"请假开始时间"},{default:d((()=>[y(j(ue.value.flowLeaveInfo.startTime),1)])),_:1}),u(Q,{label:"请假结束时间"},{default:d((()=>[y(j(ue.value.flowLeaveInfo.endTime),1)])),_:1}),u(Q,{label:"申请原因"},{default:d((()=>[y(j(ue.value.flowLeaveInfo.reason),1)])),_:1})])),_:1}),le,u(ye,{ref_key:"formRef",ref:se,model:ie},{default:d((()=>[u(ve,{prop:"reason",rules:[{required:!0,message:"请输入审批意见",trigger:"blur"}]},{default:d((()=>[u(oe,{modelValue:ie.reason,"onUpdate:modelValue":a[0]||(a[0]=e=>ie.reason=e),rows:5,type:"textarea",placeholder:"请输入审批意见",maxlength:"30","show-word-limit":""},null,8,["modelValue"])])),_:1}),u(ve,null,{default:d((()=>[u(je,{type:"success",onClick:a[1]||(a[1]=e=>{var a;(a=se.value)&&a.validate((e=>{e?(ie.approvalResult=0,me.value=!0,W(ie).then((e=>{g.success(e.msg),_e(ie.id)})).catch((e=>{g.error(e.msg)})).finally((()=>{me.value=!1,a.resetFields()}))):g.error("请输入审批意见")}))})},{default:d((()=>[y(" 通过 ")])),_:1}),u(je,{type:"danger",onClick:a[2]||(a[2]=e=>{var a;(a=se.value)&&a.validate((e=>{e?(me.value=!0,ie.approvalResult=1,W(ie).then((e=>{g.success(e.msg),_e(ie.id)})).catch((e=>{g.error(e.msg)})).finally((()=>{me.value=!1,a.resetFields()}))):g.error("请输入审批意见")}))})},{default:d((()=>[y(" 拒绝 ")])),_:1})])),_:1})])),_:1},8,["model"])])])),_:1})),[[Ie,me.value]])])])),_:1})])),_:1})]))])),[[Ie,de.value]]):h("",!0)])),_:1}),u(be,{label:"已审批",name:"done"},{default:d((()=>["done"===K.value?(i(),p(P,{key:0})):h("",!0)])),_:1})])),_:1},8,["modelValue"])])),_:1})])}}}),[["__scopeId","data-v-e961caad"]]);export{te as default};
