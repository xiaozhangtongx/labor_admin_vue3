import{aT as e,d as n,r as a,o,a as i,c as l,k as t,a4 as p,q as s}from"./index-af1b0f7f.js";var r={};({get exports(){return r},set exports(e){r=e}}).exports=function(){function e(e){var o=[];return e.AMapUI&&o.push(n(e.AMapUI)),e.Loca&&o.push(a(e.Loca)),Promise.all(o)}function n(e){return new Promise((function(n,a){var i=[];if(e.plugins)for(var s=0;s<e.plugins.length;s+=1)-1==l.AMapUI.plugins.indexOf(e.plugins[s])&&i.push(e.plugins[s]);if(t.AMapUI===o.failed)a("前次请求 AMapUI 失败");else if(t.AMapUI===o.notload){t.AMapUI=o.loading,l.AMapUI.version=e.version||l.AMapUI.version,s=l.AMapUI.version;var r=document.body||document.head,d=document.createElement("script");d.type="text/javascript",d.src="https://webapi.amap.com/ui/"+s+"/main.js",d.onerror=function(e){t.AMapUI=o.failed,a("请求 AMapUI 失败")},d.onload=function(){if(t.AMapUI=o.loaded,i.length)window.AMapUI.loadUI(i,(function(){for(var e=0,a=i.length;e<a;e++){var o=i[e].split("/").slice(-1)[0];window.AMapUI[o]=arguments[e]}for(n();p.AMapUI.length;)p.AMapUI.splice(0,1)[0]()}));else for(n();p.AMapUI.length;)p.AMapUI.splice(0,1)[0]()},r.appendChild(d)}else t.AMapUI===o.loaded?e.version&&e.version!==l.AMapUI.version?a("不允许多个版本 AMapUI 混用"):i.length?window.AMapUI.loadUI(i,(function(){for(var e=0,a=i.length;e<a;e++){var o=i[e].split("/").slice(-1)[0];window.AMapUI[o]=arguments[e]}n()})):n():e.version&&e.version!==l.AMapUI.version?a("不允许多个版本 AMapUI 混用"):p.AMapUI.push((function(e){e?a(e):i.length?window.AMapUI.loadUI(i,(function(){for(var e=0,a=i.length;e<a;e++){var o=i[e].split("/").slice(-1)[0];window.AMapUI[o]=arguments[e]}n()})):n()}))}))}function a(e){return new Promise((function(n,a){if(t.Loca===o.failed)a("前次请求 Loca 失败");else if(t.Loca===o.notload){t.Loca=o.loading,l.Loca.version=e.version||l.Loca.version;var i=l.Loca.version,s=l.AMap.version.startsWith("2"),r=i.startsWith("2");if(s&&!r||!s&&r)a("JSAPI 与 Loca 版本不对应！！");else{s=l.key,r=document.body||document.head;var d=document.createElement("script");d.type="text/javascript",d.src="https://webapi.amap.com/loca?v="+i+"&key="+s,d.onerror=function(e){t.Loca=o.failed,a("请求 AMapUI 失败")},d.onload=function(){for(t.Loca=o.loaded,n();p.Loca.length;)p.Loca.splice(0,1)[0]()},r.appendChild(d)}}else t.Loca===o.loaded?e.version&&e.version!==l.Loca.version?a("不允许多个版本 Loca 混用"):n():e.version&&e.version!==l.Loca.version?a("不允许多个版本 Loca 混用"):p.Loca.push((function(e){e?a(e):a()}))}))}if(!window)throw Error("AMap JSAPI can only be used in Browser.");var o,i;(i=o||(o={})).notload="notload",i.loading="loading",i.loaded="loaded",i.failed="failed";var l={key:"",AMap:{version:"1.4.15",plugins:[]},AMapUI:{version:"1.1",plugins:[]},Loca:{version:"1.3.2"}},t={AMap:o.notload,AMapUI:o.notload,Loca:o.notload},p={AMap:[],AMapUI:[],Loca:[]},s=[],r=function(e){"function"==typeof e&&(t.AMap===o.loaded?e(window.AMap):s.push(e))};return{load:function(n){return new Promise((function(a,i){if(t.AMap==o.failed)i("");else if(t.AMap==o.notload){var p=n.key,d=n.version,c=n.plugins;p?(window.AMap&&"lbs.amap.com"!==location.host&&i("禁止多种API加载方式混用"),l.key=p,l.AMap.version=d||l.AMap.version,l.AMap.plugins=c||l.AMap.plugins,t.AMap=o.loading,d=document.body||document.head,window.___onAPILoaded=function(l){if(delete window.___onAPILoaded,l)t.AMap=o.failed,i(l);else for(t.AMap=o.loaded,e(n).then((function(){a(window.AMap)})).catch(i);s.length;)s.splice(0,1)[0]()},(c=document.createElement("script")).type="text/javascript",c.src="https://webapi.amap.com/maps?callback=___onAPILoaded&v="+l.AMap.version+"&key="+p+"&plugin="+l.AMap.plugins.join(","),c.onerror=function(e){t.AMap=o.failed,i(e)},d.appendChild(c)):i("请填写key")}else if(t.AMap==o.loaded)if(n.key&&n.key!==l.key)i("多个不一致的 key");else if(n.version&&n.version!==l.AMap.version)i("不允许多个版本 JSAPI 混用");else{if(p=[],n.plugins)for(d=0;d<n.plugins.length;d+=1)-1==l.AMap.plugins.indexOf(n.plugins[d])&&p.push(n.plugins[d]);p.length?window.AMap.plugin(p,(function(){e(n).then((function(){a(window.AMap)})).catch(i)})):e(n).then((function(){a(window.AMap)})).catch(i)}else if(n.key&&n.key!==l.key)i("多个不一致的 key");else if(n.version&&n.version!==l.AMap.version)i("不允许多个版本 JSAPI 混用");else{var u=[];if(n.plugins)for(d=0;d<n.plugins.length;d+=1)-1==l.AMap.plugins.indexOf(n.plugins[d])&&u.push(n.plugins[d]);r((function(){u.length?window.AMap.plugin(u,(function(){e(n).then((function(){a(window.AMap)})).catch(i)})):e(n).then((function(){a(window.AMap)})).catch(i)}))}}))},reset:function(){delete window.AMap,delete window.AMapUI,delete window.Loca,l={key:"",AMap:{version:"1.4.15",plugins:[]},AMapUI:{version:"1.1",plugins:[]},Loca:{version:"1.3.2"}},t={AMap:o.notload,AMapUI:o.notload,Loca:o.notload},p={AMap:[],AMapUI:[],Loca:[]}}}}();const d=r,c={class:"map-container"},u=t("strong",null,"经度：",-1),A=t("strong",{class:"ml-3"}," 纬度：",-1),f=t("strong",null,"地址：",-1),M=t("div",{id:"map"},null,-1),v=n({__name:"index",props:{lng:{type:Number,required:!0,default:116.397428},lat:{type:Number,require:!0,default:39.90923}},setup(e){const n=e,r=a(null),v=a(""),g=a([116.397428,39.90923]);return o((()=>{null!==n.lat&&null!==n.lng&&(g.value=[n.lng,n.lat]),d.load({key:"b8fdf4fcb8c3449e4d3ef4e1a0172552",version:"2.0",plugins:["AMap.Geolocation","AMap.Geocoder"]}).then((e=>{var a;r.value=new e.Map("map",{center:g.value,zoom:13});new e.Geocoder({city:"全国",radius:1e3}).getAddress([n.lng,n.lat],((e,n)=>{"complete"===e&&n.regeocode&&(v.value=n.regeocode.formattedAddress)}));const o=new e.Marker({position:new e.LngLat(n.lng,n.lat),title:"打卡"});null==(a=r.value)||a.add(o),r.value.zoom=18}))})),(e,a)=>(i(),l("div",c,[t("p",null,[u,p(s(n.lng||"还未打卡")+" ",1),A,p(" "+s(n.lat||"还未打卡"),1)]),t("p",null,[f,p(s(v.value||"还未打卡"),1)]),M]))}});export{d as A,v as _};
