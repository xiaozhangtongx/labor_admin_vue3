import{d as e,r as l,Q as a,ag as t,o,B as r,D as u,a as m,c as n,C as d,w as s,a4 as i,q as p,l as c,k as f,n as b,H as h,W as _,ah as v,a$ as g,a2 as j,b0 as y,an as w,b1 as V,b2 as x,ap as T,aq as k}from"./index-9a706b5e.js";import{v as P}from"./el-loading-9a7b0add.js";import{E as I}from"./el-dialog-94ce5d08.js";import"./el-overlay-d6f3b381.js";import{E as N}from"./el-input-number-0139b51a.js";/* empty css                 *//* empty css                       */import{E as U,a as C}from"./el-radio-df486416.js";/* empty css               */import{E,a as q}from"./el-select-cf6a8710.js";import"./el-scrollbar-c33e6783.js";import"./el-popper-9f38ba83.js";import{E as z,a as F}from"./el-table-column-2b1fdcb9.js";/* empty css                    */import"./el-tooltip-4ed993c7.js";import{E as $}from"./el-divider-333d043c.js";import{E as A}from"./el-button-cb2bce56.js";import{a as B,E as R}from"./el-form-item-ea286b40.js";import{E as D}from"./index-c3db2d78.js";import{E as H}from"./index-69566457.js";import{E as L}from"./index-e3536c2f.js";import{_ as O}from"./_plugin-vue_export-helper-1b428a4d.js";import"./focus-trap-4f47c9e6.js";import"./event-15d81b97.js";import"./refs-b9a36019.js";import"./use-form-item-14a057db.js";import"./scroll-8c03f05f.js";import"./index-dfaaa1d6.js";import"./strings-0eeb67c0.js";import"./isEqual-8163224d.js";import"./_Uint8Array-c1224f14.js";import"./debounce-de061bf0.js";import"./index-8785ff64.js";import"./validator-1ce7f714.js";import"./_initCloneObject-ee341c84.js";import"./index-e76db81e.js";import"./flatten-0d005a2e.js";import"./aria-49c72c55.js";import"./index-c887b90a.js";const Q=e=>(T("data-v-c05cf6fb"),e=e(),k(),e),W={class:"app-container bg-white m-5"},G=Q((()=>f("span",{class:"i-ph-pencil-line-light mr-1"},null,-1))),K=Q((()=>f("span",{class:"i-material-symbols-delete-outline-rounded mr-1"},null,-1))),M=O(e({__name:"index",setup(e){const T=l(!1),k=l(),O=l(!1),Q=l(!0),M=l(!0),Y=l([]),J=l([]),S=a({id:"",menuTitle:"",menuPerms:"",menuIcon:"",menuPath:"",component:"",menuType:0,status:0,orderNum:0,redirect:"",parentId:"",menuName:""}),X=t(),Z=async()=>{T.value=!0;const{data:e}=await g();Y.value=[...e],J.value=[{id:"0",menuTitle:"根节点"},...e],T.value=!1},ee=async()=>{M.value=!1,Q.value=!Q.value,await j(),M.value=!0};o((()=>{Z()}));const le=a({parentId:[{required:!0,message:"请选择上级菜单",trigger:"blur"}],menuTitle:[{required:!0,message:"请输入名称",trigger:"blur"}],menuName:[{required:!0,message:"请输入标识",trigger:"blur"}],menuPerms:[{required:!0,message:"请输入权限编码",trigger:"blur"}],menuType:[{required:!0,message:"请选择状态",trigger:"blur"}],status:[{required:!0,message:"请选择状态",trigger:"blur"}]});return(e,l)=>{const a=r("vxe-button"),t=B,o=R,g=z,j=H,ae=A,te=$,oe=F,re=E,ue=q,me=L,ne=U,de=C,se=N,ie=I,pe=P;return u((m(),n("div",W,[d(o,{inline:!0},{default:s((()=>[d(t,null,{default:s((()=>[d(a,{status:"primary",icon:"vxe-icon-add",onClick:l[0]||(l[0]=e=>O.value=!0)},{default:s((()=>[i(" 新增菜单 ")])),_:1}),d(a,{status:"warning",onClick:ee},{default:s((()=>[i(p(Q.value?"关闭所有":"展开所有"),1)])),_:1})])),_:1})])),_:1}),M.value?(m(),c(oe,{key:0,data:Y.value,style:{width:"100%","margin-bottom":"20px"},"row-key":"id",border:"",stripe:"",lazy:"","max-height":"480","default-expand-all":Q.value,"tree-props":{children:"children",hasChildren:"hasChildren"}},{default:s((()=>[d(g,{prop:"menuTitle",label:"名称",sortable:"",width:"173"}),d(g,{prop:"menuName",label:"标识",width:"150"}),d(g,{prop:"menuPerms",label:"权限编码",sortable:"",width:"180"}),d(g,{prop:"menuIcon",label:"图标"},{default:s((e=>[f("span",{class:b(e.row.menuIcon)},null,2)])),_:1}),d(g,{prop:"menuType",label:"类型"},{default:s((e=>[0===e.row.menuType?(m(),c(j,{key:0,size:"small"},{default:s((()=>[i(" 目录 ")])),_:1})):1===e.row.menuType?(m(),c(j,{key:1,size:"small",type:"success"},{default:s((()=>[i(" 菜单 ")])),_:1})):h("",!0)])),_:1}),d(g,{prop:"menuPath",label:"菜单URL",width:"137"}),d(g,{prop:"redirect",width:"150",label:"重定向"}),d(g,{prop:"component",label:"菜单组件",width:"100"}),d(g,{prop:"orderNum",label:"排序",width:"53"}),d(g,{prop:"createTime",label:"创建时间",width:"173"}),d(g,{prop:"status",label:"状态",width:"73"},{default:s((e=>[0===e.row.status?(m(),c(j,{key:0,size:"small",type:"success"},{default:s((()=>[i(" 正常 ")])),_:1})):1===e.row.status?(m(),c(j,{key:1,size:"small",type:"danger"},{default:s((()=>[i(" 禁用 ")])),_:1})):h("",!0)])),_:1}),d(g,{prop:"icon",label:"操作",width:"170",fixed:"right"},{default:s((e=>[d(ae,{type:"primary",link:"",onClick:l=>{return a=e.row,O.value=!0,S.id=a.id,S.menuPath=a.menuPath,S.menuTitle=a.menuTitle,S.menuPerms=a.menuPerms,S.menuIcon=a.menuIcon||"",S.menuPath=a.menuPath,S.menuType=a.menuType,S.status=a.status,S.orderNum=a.orderNum||0,S.redirect=a.redirect||"",S.parentId=a.parentId,S.component=a.component,void(S.menuName=a.menuName);var a}},{default:s((()=>[G,i(" 编辑 ")])),_:2},1032,["onClick"]),d(te,{direction:"vertical"}),d(ae,{type:"danger",link:"",onClick:l=>{return a=e.row,void D.confirm(`正在删除：${a.menuTitle}，确认删除？`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{y(a.id).then((e=>w.success(e.msg))).catch((e=>w.error(e.msg))).finally((()=>{X.go(0),Z()}))}));var a}},{default:s((()=>[K,i(" 删除 ")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data","default-expand-all"])):h("",!0),d(ie,{modelValue:O.value,"onUpdate:modelValue":l[14]||(l[14]=e=>O.value=e),title:"提示",width:"537","align-center":""},{default:s((()=>[d(o,{ref_key:"ruleFormRef",ref:k,model:S,rules:le,"label-width":"100px",class:"demo-editForm"},{default:s((()=>[d(t,{label:"上级菜单",prop:"parentId"},{default:s((()=>[d(ue,{modelValue:S.parentId,"onUpdate:modelValue":l[1]||(l[1]=e=>S.parentId=e),placeholder:"请选择上级菜单"},{default:s((()=>[(m(!0),n(_,null,v(J.value,(e=>(m(),n(_,{key:e.id},[d(re,{label:e.menuTitle,value:e.id},null,8,["label","value"]),(m(!0),n(_,null,v(e.children,(e=>(m(),c(re,{key:e.id,label:e.menuTitle,value:e.id},{default:s((()=>[f("span",null,p(`- ${e.menuTitle}`),1)])),_:2},1032,["label","value"])))),128))],64)))),128))])),_:1},8,["modelValue"])])),_:1}),d(t,{label:"菜单名称",prop:"menuTitle","label-width":"100px"},{default:s((()=>[d(me,{modelValue:S.menuTitle,"onUpdate:modelValue":l[2]||(l[2]=e=>S.menuTitle=e),autocomplete:"off"},null,8,["modelValue"])])),_:1}),d(t,{label:"菜单标识",prop:"menuName","label-width":"100px"},{default:s((()=>[d(me,{modelValue:S.menuName,"onUpdate:modelValue":l[3]||(l[3]=e=>S.menuName=e),autocomplete:"off",placeholder:"标识最好输入为英文"},null,8,["modelValue"])])),_:1}),d(t,{label:"权限编码",prop:"menuPerms","label-width":"100px"},{default:s((()=>[d(me,{modelValue:S.menuPerms,"onUpdate:modelValue":l[4]||(l[4]=e=>S.menuPerms=e),autocomplete:"off"},null,8,["modelValue"])])),_:1}),d(t,{label:"图标",prop:"menuIcon","label-width":"100px"},{default:s((()=>[d(me,{modelValue:S.menuIcon,"onUpdate:modelValue":l[5]||(l[5]=e=>S.menuIcon=e),autocomplete:"off"},null,8,["modelValue"])])),_:1}),d(t,{label:"菜单URL",prop:"menuPath","label-width":"100px"},{default:s((()=>[d(me,{modelValue:S.menuPath,"onUpdate:modelValue":l[6]||(l[6]=e=>S.menuPath=e),autocomplete:"off"},null,8,["modelValue"])])),_:1}),d(t,{label:"重定向",prop:"redirect","label-width":"100px"},{default:s((()=>[d(me,{modelValue:S.redirect,"onUpdate:modelValue":l[7]||(l[7]=e=>S.redirect=e),autocomplete:"off"},null,8,["modelValue"])])),_:1}),d(t,{label:"菜单组件",prop:"component","label-width":"100px"},{default:s((()=>[d(me,{modelValue:S.component,"onUpdate:modelValue":l[8]||(l[8]=e=>S.component=e),autocomplete:"off"},null,8,["modelValue"])])),_:1}),d(t,{label:"类型",prop:"menuType","label-width":"100px"},{default:s((()=>[d(de,{modelValue:S.menuType,"onUpdate:modelValue":l[9]||(l[9]=e=>S.menuType=e)},{default:s((()=>[d(ne,{label:0},{default:s((()=>[i(" 目录 ")])),_:1}),d(ne,{label:1},{default:s((()=>[i(" 菜单 ")])),_:1})])),_:1},8,["modelValue"])])),_:1}),d(t,{label:"状态",prop:"status","label-width":"100px"},{default:s((()=>[d(de,{modelValue:S.status,"onUpdate:modelValue":l[10]||(l[10]=e=>S.status=e)},{default:s((()=>[d(ne,{label:0},{default:s((()=>[i(" 正常 ")])),_:1}),d(ne,{label:1},{default:s((()=>[i(" 禁用 ")])),_:1})])),_:1},8,["modelValue"])])),_:1}),d(t,{label:"排序号",prop:"orderNum","label-width":"100px"},{default:s((()=>[d(se,{modelValue:S.orderNum,"onUpdate:modelValue":l[11]||(l[11]=e=>S.orderNum=e),min:1,label:"排序号"},{default:s((()=>[i(" 1 ")])),_:1},8,["modelValue"])])),_:1}),d(t,null,{default:s((()=>[d(ae,{type:"primary",onClick:l[12]||(l[12]=e=>(async e=>{e&&(await e.validate(((e,l)=>{e?""===S.id?V(S).then((e=>{w.success(e.msg),Z()})):x(S).then((e=>{w.success(e.msg),X.go(0),Z()})):w.error("error submit!")})),O.value=!1,e.resetFields())})(k.value))},{default:s((()=>[i(" 立即创建 ")])),_:1}),d(ae,{onClick:l[13]||(l[13]=e=>{var l;(l=k.value)&&l.resetFields()})},{default:s((()=>[i(" 重置 ")])),_:1})])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue"])])),[[pe,T.value]])}}}),[["__scopeId","data-v-c05cf6fb"]]);export{M as default};
